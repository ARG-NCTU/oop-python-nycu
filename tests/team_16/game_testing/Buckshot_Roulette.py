import random
import time
import math
import pickle
import os
'''æœªä¾†æƒ³æ³•:

8.æ”¹æˆç”¨æ»‘é¼ æ“ä½œçš„GUI

'''
#å¤§å»³ç‰©ä»¶
class NPC:
    def __init__(self,name):
        self.name = name
        self.devil_dependency = False
        pass
    def challenge_mode_dialogue(self,win_count,computer):
        #æ¯å ´çµæŸæ™‚èªªçš„è©±
        pass
    def challenge_mode_reward(self,player_lobby):
        #è©¦ç…‰çå‹µ
        pass
    def say_normal_dialogue(self):
        #æ­£å¸¸æ™‚èªªçš„è©±
        pass
    def before_challenge(self):
        #è©¦ç…‰é–‹å§‹å‰èªªçš„è©±
        pass
    def devil_transform(self):
        #çœ·å±¬æ¢ä»¶è§¸ç™¼æˆåŠŸï¼Œé¸æ“‡æ˜¯å¦æˆç‚ºçœ·å±¬
        pass

class all_item:
    def __init__(self,name,description):
        self.name_hide = name
        self.name = 'ä½ å°šæœªè§£é–é€™å€‹é“å…·'
        #self.name = name
        self.description_hide = description
        self.description = '???'
        #self.description = description
        self.unlock = False
    def unlock_item(self,show_text):
        if self.unlock == False:
            self.unlock = True
            self.name = self.name_hide
            self.description = self.description_hide
            if show_text:
                print('åœ–é‘‘è§£é–äº†',self.name_hide)
                time.sleep(0.7)

class achievement(all_item):
    def __init__(self,name,description,hint):
        all_item.__init__(self,name,description)
        self.name = '???'
        self.description = hint
    def unlock_item(self):
        if self.unlock == False:
            self.unlock = True
            self.name = self.name_hide
            self.description = self.description_hide
            print('å·²è§£é–æˆå°± ',self.name)
            time.sleep(0.7)

class rule(all_item):
    def __init__(self,name,before_text,after_text):
        self.name = name
        self.before_text = before_text
        self.after_text = after_text
        self.unlock = False
    def unlock_rule(self):
        self.before_text = self.after_text
        self.unlock = True
    def show_rule(self):
        print(self.before_text)
    

class shop_item:
    def __init__(self,name,price,stock,raise_multiply,description = ''):
        self.name = name
        self.price = price
        self.stock = stock
        self.description = description
        self.required_item = None
        self.raise_count = 0
        self.raise_multiply = raise_multiply
        if self.stock == 3:
            self.set_required_item('äº”é€£å‹æ¨™è¨˜')
        if self.stock == 1:
            self.set_required_item('äºŒåé€£å‹æ¨™è¨˜')
    def raise_price(self):
        self.raise_count += 1
        self.price = int(self.price*self.raise_multiply)
        self.stock -= 1
        if self.stock == 0:
            self.description = 'å·²å”®å®Œ'
            self.price = math.inf
        if self.raise_count/(self.raise_count+self.stock) == 0.2:
            self.set_required_item('äº”é€£å‹æ¨™è¨˜')
        elif self.raise_count/(self.raise_count+self.stock) == 0.4:
            self.set_required_item('åé€£å‹æ¨™è¨˜')
        elif self.raise_count/(self.raise_count+self.stock) == 0.6:
            self.set_required_item('äºŒåé€£å‹æ¨™è¨˜')
        elif self.raise_count/(self.raise_count+self.stock) == 0.8:
            self.set_required_item('äº”åé€£å‹æ¨™è¨˜')

        if self.raise_count/(self.raise_count+self.stock) == 0.25:
            self.set_required_item('äº”é€£å‹æ¨™è¨˜')
        elif self.raise_count/(self.raise_count+self.stock) == 0.5:
            self.set_required_item('åé€£å‹æ¨™è¨˜')
        elif self.raise_count/(self.raise_count+self.stock) == 0.75:
            self.set_required_item('äºŒåé€£å‹æ¨™è¨˜')

        if self.raise_count == 0 and self.stock == 3:
            self.set_required_item('äº”é€£å‹æ¨™è¨˜')
        elif self.raise_count == 1 and self.stock == 2:
            self.set_required_item('åé€£å‹æ¨™è¨˜')
        elif self.raise_count == 2 and self.stock == 1:
            self.set_required_item('äºŒåé€£å‹æ¨™è¨˜') 

        if self.raise_count == 0 and self.stock == 1:
            self.set_required_item('äºŒåé€£å‹æ¨™è¨˜')

    def show_item(self,index):
        print(index,self.name,':',self.price,'å…ƒ')
        print('    ',self.description)
        if self.required_item != None:
            print('     éœ€è¦',self.required_item,'æ‰èƒ½è³¼è²·')
    def set_required_item(self,item):
        self.required_item = item
    def check_required_item(self,player):
        if self.required_item == None:
            return True
        if self.required_item in player.unlockable_item:
            return True
        return False

class shopkeeper(NPC):
    def __init__(self):
        NPC.__init__(self,'åˆ©ç¶­å¦')
        self.shop=[]
        self.shop.append(shop_item('äººå·¥å¿ƒè‡Ÿ',5000000,10,12,'æ­»äº¡æ™‚å¯ä»¥ä½¿ç”¨äººå·¥å¿ƒè‡Ÿå¾©æ´»ï¼Œæ‰‹è¡“éœ€æ¶ˆè€—50%è²¡ç”¢'))
        self.shop.append(shop_item('é“å…·æ¬„ä½',1000000,10,2.15,'å¢åŠ é›¢é–‹è³­æ¡Œå¾Œå¯ä¿å­˜çš„é“å…·æ•¸é‡'))
        self.shop.append(shop_item('æ°¸ä¹…éš¨æ©Ÿçš‡å',4000000,3,30,'é–‹å±€æ™‚ç²å¾—éš¨æ©Ÿçš‡åé“å…·'))
        self.shop.append(shop_item('æ°¸ä¹…é¡å¤–è¡€é‡',1000000,4,20,'é–‹å±€æ™‚ç²å¾—é¡å¤–è¡€é‡'))
        self.shop.append(shop_item('æ°¸ä¹…æœªçŸ¥è—åœ–',1000000,3,7,'é–‹å±€æ™‚ç²å¾—æœªçŸ¥è—åœ–é“å…·'))
        self.shop.append(shop_item('è§£é–ç‰ç’ƒçš‡å',4444444444,1,1,'è±¡å¾µå¸Œæœ›çš„éˆé­‚å°‡åœ¨è³­å±€ä¸­å‡ºç¾'))
        self.shop.append(shop_item('è§£é–æƒ¡é­”è©¦ç…‰',99999999999,1,1,'é€šå¾€åœ°ç„çš„å¤§é–€ç‚ºä½ æ•é–‹'))
        self.normal_dialogue = ['åˆ©ç¶­å¦: å°è€å¼Ÿè²·é¡†å¿ƒè‡Ÿå§ï¼Œä½ æ­»äº†å¯å°±æ²’äººé™ªæˆ‘èŠå¤©äº†',\
                                'åˆ©ç¶­å¦å¼äº†æ ¹è¸ï¼Œæ‚ é–’åœ°æ»‘è‘—æ‰‹æ©Ÿ',\
                                'åˆ©ç¶­å¦ä¸åœ¨ï¼Œåº—è£¡ç©ºç„¡ä¸€äººï¼Œå•†å“éœéœçš„é™³åˆ—è‘—',\
                                'åˆ©ç¶­å¦æŠŠç©è‘—æ‰‹éŠ¬å’Œæ§æ¢°é›¶ä»¶ï¼Œä¼¼ä¹æ²’æ³¨æ„åˆ°ä½ ',\
                                'å¦ä¸€åè³­å®¢å’Œä½ æ“¦èº«è€Œéï¼Œå£ä¸­å¿µå¿µæœ‰è©',\
                                'åˆ©ç¶­å¦: ä½ çœ‹èµ·ä¾†æœ‰é»ç–²æ†Šï¼Œè¦ä¸è¦ä¾†é»åˆºæ¿€çš„? èªªè‘—ï¼Œå¥¹æ™ƒäº†æ™ƒæ‰‹ä¸­çš„ç¥ç¥•è—¥åŒ…',\
                                'åˆ©ç¶­å¦: è³­å±€ä¸­é“å…·å°±æ˜¯çœŸç†ï¼Œæ²’æœ‰é“å…·æ¬„ä½æ€éº¼è´ï¼Œä½ èªªå°å§?',\
                                'åˆ©ç¶­å¦: é€™ä½å®¢å®˜ï¼Œæ—¢ç„¶éƒ½ä¾†äº†ï¼Œä½•ä¸è²·å¼µè—åœ–è©¦è©¦æ‰‹æ°£?',\
                                'åˆ©ç¶­å¦: ä½ å•ç‰ç’ƒçš‡åæ˜¯ä»€éº¼? è²·ä¸‹ä¾†ä¸å°±çŸ¥é“äº†å—?',\
                                'åˆ©ç¶­å¦: å¦‚æœä½ å«Œå‘½å¤ªé•·ï¼Œè¦ä¸è¦è©¦è©¦æƒ¡é­”è©¦ç…‰? å‰ææ˜¯ä½ è¦æœ‰éŒ¢å°±æ˜¯äº†(ç¬‘',\
                                'åˆ©ç¶­å¦: ä¸€å£æ°£ç”¨å…‰8å€‹é“å…·ï¼Œç„¶å¾Œä¸€æ§è½Ÿåœ¨è‡ªå·±è‡‰ä¸Šï¼Œé€™ç¨®ç™½ç™¡çœŸçš„æœ‰å¤ å¸¥']
    
    def player_buy_item(self,index):
        self.shop[index].raise_price()

    def say_normal_dialogue(self):
        print(self.normal_dialogue[random.randint(0,len(self.normal_dialogue)-1)])

    def before_challenge(self):
        print('åˆ©ç¶­å¦: å°å¤¥å­è¦æŒ‘æˆ°æˆ‘? å¸Œæœ›ä½ å·²ç¶“åšå¥½èµ´æ­»çš„å¿ƒç†æº–å‚™äº†ï¼Œæˆ‘å¯ä¸æœƒæ‰‹ä¸‹ç•™æƒ…å–”')
        time.sleep(2)
        print('åˆ©ç¶­å¦: é †å¸¶ä¸€æï¼Œå¦‚æœä½ é‚„æ²’å¾è‰è‰æ–¯ç´è£¡è½èªªéçš„è©±ï¼Œæˆ‘å¯æ˜¯æˆ‘å€‘ä¸‰äººä¹‹ä¸­æœ€å¼·çš„å–”?')
        time.sleep(2)
        print('åˆ©ç¶­å¦: å¦‚æœä½ èƒ½è®“æˆ‘æ¬£è³ä½ ï¼Œæˆ‘å°±æ•™ä½ é“å…·çš„çœŸæ­£ä½¿ç”¨æ–¹å¼å§! ')
        time.sleep(2)
        print('åˆ©ç¶­å¦: é‚£éº¼ï¼Œä½ æº–å‚™å¥½äº†å—?')
        time.sleep(2)
        input('æŒ‰ä¸‹Enteré–‹å§‹æŒ‘æˆ°')
    def challenge_mode_dialogue(self,win_count,computer):
        #æ¯å ´çµæŸæ™‚èªªçš„è©±
        if win_count == 5:
            print('åˆ©ç¶­å¦: å¥½å‚¢ä¼™ï¼Œæ˜¯æˆ‘è¼¸äº†ï¼Œä½ çš„å¯¦åŠ›æˆ‘èªå¯äº†')
        else:
            print('å·²ç²å‹å‹',win_count,'/5å ´')
            time.sleep(2)
            if win_count == 1:
                print('åˆ©ç¶­å¦: ä½ é‚„ä¸éŒ¯ï¼Œä¸éé€™åªæ˜¯æš–èº«ç½·äº†')
                time.sleep(2)
            elif win_count == 3:
                print('åˆ©ç¶­å¦: å¥½äº†ï¼Œå·®ä¸å¤šè¦æ‹¿å‡ºçœŸå¯¦åŠ›äº†')
                time.sleep(2)
            elif win_count == 4:
                computer.item.append('è²ªå©ªåœ‹ç‹')
                computer.item.append('æœ¦æœ§åœ‹ç‹')
                time.sleep(2)
            
    
    def challenge_mode_reward(self,player_lobby):
        if 'æ‰­æ›²å°è¨˜' not in player_lobby.unlockable_item:
            player_lobby.unlockable_item.append('æ‰­æ›²å°è¨˜')
            time.sleep(2)
            print('åˆ©ç¶­å¦æŠ“ä½ä½ çš„æ‰‹ï¼Œä½ æ„Ÿè¦ºçš®è†šé–‹å§‹ç¼ç‡’')
            time.sleep(2)
            print('ä½ çš„å‰è‡‚è¢«çƒ™ä¸Šäº†ä¸€éš»çºç¹çš„è›‡')
            time.sleep(2)
            print('åˆ©ç¶­å¦: æ ¹æ“šå¥‘ç´„ï¼Œç¾åœ¨ä½ ä¹Ÿèƒ½ä½¿ç”¨æˆ‘çš„ä¸€éƒ¨åˆ†èƒ½åŠ›äº†')
            time.sleep(2)
            print('åˆ©ç¶­å¦: ä¸æœƒç”¨çš„è©±å°±å»å•è‰è‰æ–¯ï¼Œå¥¹æœƒå¾ˆæ¨‚æ„æ•™ä½ çš„')
            time.sleep(2)
            print('èªªå®Œï¼Œåˆ©ç¶­å¦é»äº†æ ¹è¸ï¼Œèµ·èº«èµ°å›äº†å¥¹çš„åº—å…§')
            time.sleep(2)
            print('ä½ ç²å¾—äº†æ‰­æ›²å°è¨˜')
            time.sleep(2)
            player_lobby.max_item += 2
            print('ä½ çš„ç‰©å“æŒæœ‰ä¸Šé™å¢åŠ 2å€‹')
            time.sleep(2)
            lobby_NPC[0].unlock_achievement('æ‰­æ›²çš„è›‡')

    def unlock_final_challenge(self):
        print('åˆ©ç¶­å¦: å°å¤¥å­ï¼Œé‡å¿ƒæŒºå¤§çš„å˜›')
        time.sleep(3)
        print('åˆ©ç¶­å¦: ä½ è¦çŸ¥é“ï¼ŒæŒ‘æˆ°æƒ¡é­”è©¦ç…‰æ„å‘³è‘—ä½ è²ªæ±‚æƒ¡é­”çš„åŠ›é‡')
        time.sleep(3)
        print('åˆ©ç¶­å¦: çœŸçš„è¦æ‰“çš„è©±ï¼Œæˆ‘å€‘æ˜¯ä¸æœƒæ”¾æ°´çš„ï¼Œè«‹åšå¥½ç»å‡ºéˆé­‚çš„å¿ƒç†æº–å‚™å–”')
        time.sleep(3)
        print('åˆ©ç¶­å¦: å¦‚æœä½ åšå¥½æŒ‘æˆ°çš„æº–å‚™ï¼Œå°±å»æ‰¾è–©é‚çˆ¾å§ï¼Œä»–æœƒç‚ºä½ è§£é‡‹ä½ å°‡é¢å°ä»€éº¼æ¨£çš„åœ°ç„')
        time.sleep(3)
        print('åˆ©ç¶­å¦: ç¥ä½ å¥½é‹ï¼Œå°å¤¥å­')
        time.sleep(3)
        lobby_NPC[0].unlock_achievement('åœ°ç„ä¹‹é–€')
    


class host(NPC):
    def __init__(self):
        NPC.__init__(self,'è–©é‚çˆ¾')
        pass

    def before_challenge(self):
        print('è–©é‚çˆ¾: ä½ è¦æŒ‘æˆ°æˆ‘? ä½ çš„å‹‡æ°£ä»¤äººæ•¬ä½©')
        time.sleep(2)
        print('è–©é‚çˆ¾: æˆ‘å’Œå…¶ä»–å…©ä½ä¸åŒï¼Œä¸å–œæ­¡èŠ±ä¿çš„é“å…·æˆ–è¦å‰‡')
        time.sleep(2)
        print('è–©é‚çˆ¾: é€™å ´è©¦ç…‰ï¼Œè«‹ä»¥ä½ è‡ªå·±é›™çœ¼çœ‹ç ´æœªä¾†')
        time.sleep(2)
        print('è–©é‚çˆ¾: å¦‚æœä½ èƒ½æ“Šæ•—æˆ‘ï¼Œæˆ‘æœƒè³œäºˆä½ æˆ‘çš„ç¾½ç¿¼')
        time.sleep(2)
        print('è–©é‚çˆ¾: è«‡è©±å°±æ­¤æ‰“ä½ï¼Œæº–å‚™å¥½äº†å—?')
        time.sleep(2)
        input('æŒ‰ä¸‹Enteré–‹å§‹æŒ‘æˆ°')

    def challenge_mode_reward(self,player_lobby):
        if 'å¢®å¤©ä½¿å°è¨˜' not in player_lobby.unlockable_item:
            player_lobby.unlockable_item.append('å¢®å¤©ä½¿å°è¨˜')
            time.sleep(2)
            print('è–©é‚çˆ¾å¾åº§ä½ä¸Šç«™èµ·ä¾†ï¼Œå‘ä½ é èº¬')
            time.sleep(2)
            print('è–©é‚çˆ¾: ä½ çš„å¯¦åŠ›ï¼Œåˆæˆ–è€…èªªæ˜¯é‹æ°£ï¼Œæˆ‘èªå¯äº†')
            time.sleep(2)
            print('è–©é‚çˆ¾: ä¾ç…§ç´„å®šï¼Œæˆ‘å°‡è³œäºˆä½ æˆ‘çš„ç¾½ç¿¼')
            time.sleep(2)
            print('èªç•¢ï¼Œè–©é‚çˆ¾çš„èº«å½¢é–‹å§‹é€æ¼¸åŒ–ç‚ºä¸å¯åç‹€ä¹‹ç‰©ï¼Œæƒ¡é­”çš„çœŸèº«')
            time.sleep(2)
            print('è¡æ“Šæ€§çš„ç•«é¢åœ¨ä½ çš„çœ¼ä¸­ç•™ä¸‹äº†çƒ™å°')
            time.sleep(2)
            print('ä½ ç²å¾—äº†å¢®å¤©ä½¿å°è¨˜')
            time.sleep(2)
            print('è–©é‚çˆ¾: é€™æ˜¯æˆ‘å°ä½ çš„ç¥ç¦ï¼Œäº¦æˆ–è€…æ˜¯è©›å’’ã€‚ç„¡è«–å¦‚ä½•ï¼Œé€šéè©¦ç…‰çš„ä½ ï¼Œæ“æœ‰è¦‹å…¬ä¸»å¤§äººçš„è³‡æ ¼')
            time.sleep(2)
            print('è–©é‚çˆ¾: æº–å‚™å¥½ä¹‹å¾Œå°±ä¾†å¤§å»³æ‰¾æˆ‘å§')
            time.sleep(2)
            lobby_NPC[0].unlock_achievement('å¢®è½çš„ç¾½ç¿¼')

    def devil_transform(self):
        print('è–©é‚çˆ¾: é€™ä½å®¢å®˜ï¼Œè«‹ç•™æ­¥')
        time.sleep(2)
        print('è–©é‚çˆ¾: ä½ çš„éˆé­‚ï¼Œä½ çš„å …æŒï¼Œæˆ‘å¾ˆæ¬£è³')
        time.sleep(4)
        print('è–©é‚çˆ¾: å¦‚æœä½ æƒ³è¦ï¼Œæˆ‘å¯ä»¥è®“ä½ æˆç‚ºæˆ‘çš„çœ·å±¬')
        time.sleep(4)
        print('è–©é‚çˆ¾: åˆ¥çœ‹æˆ‘é€™æ¨£ï¼Œæˆ‘ä¹Ÿæ›¾ç¶“æ˜¯ä¸€åå¤©ä½¿')
        time.sleep(4)
        print('è–©é‚çˆ¾: æˆ‘èƒ½çµ¦äºˆä½ æ¸´æ±‚çš„åŠ›é‡ï¼Œç›¸å°çš„ï¼Œä½ ä¹Ÿå°‡æ°¸é ç‚ºæˆ‘æ•ˆåŠ›')
        time.sleep(3)
        action = input('æˆç‚ºè–©é‚çˆ¾çš„çœ·å±¬? 1.æ˜¯ 2.å¦')
        if action == '1':
            print('è–©é‚çˆ¾: äº†è§£ï¼Œå¾ç¾åœ¨èµ·ï¼Œä½ ä¾¿ä¸å†æ˜¯ä¸€å€‹äººé¡')
            time.sleep(4)
            print('è–©é‚çˆ¾æŠŠæ‰‹æ­åœ¨ä½ çš„è‚©ä¸Šï¼Œä½ æ„Ÿè¦ºåˆ°ä¸€è‚¡å¼·å¤§çš„åŠ›é‡æ¹§å…¥ä½ çš„èº«é«”')
            time.sleep(4)
            print('å¢®å¤©ä½¿å°è¨˜æ˜‡è¯æˆç‚ºäº†â˜…æ­»ä¹‹å¤©ä½¿å°è¨˜â˜…')
            main_player.unlockable_item.remove('å¢®å¤©ä½¿å°è¨˜')
            main_player.unlockable_item.append('â˜…æ­»ä¹‹å¤©ä½¿å°è¨˜â˜…')
            time.sleep(4)
            print('ä½ æˆç‚ºäº†è–©é‚çˆ¾çš„çœ·å±¬')
            if main_player.devil == '':
                main_player.devil = 'è–©é‚çˆ¾'
            else:
                time.sleep(2)
                print('ä½ å°‡ä¸å†æ˜¯',main_player.devil,'çš„çœ·å±¬')
                main_player.devil = 'è–©é‚çˆ¾'
            time.sleep(4)
            print('è–©é‚çˆ¾: ç•¶ä½ åšå¥½ç›´é¢"å…¬ä¸»"çš„æº–å‚™æ™‚ï¼Œå†ä¾†æ‰¾æˆ‘å§')
            time.sleep(4)
            lobby_NPC[0].unlock_achievement('ç„¡è¬‚çš„å …æŒ')
        else:
            print('è–©é‚çˆ¾: äº†è§£äº†ï¼Œä½ çš„é¸æ“‡ï¼Œæˆ‘æœƒè¨˜ä½çš„')
            time.sleep(4)
            print('è–©é‚çˆ¾: åšå‡ºæ”¹è®Šä¸¦ä¸æ˜¯ä¸€ä»¶å®¹æ˜“çš„äº‹ï¼Œä½ çš„å …æŒæˆ‘å°Šé‡')
            time.sleep(4)
            print('è–©é‚çˆ¾: ç•¶ä½ åšå¥½ç›´é¢"å…¬ä¸»"çš„æº–å‚™æ™‚ï¼Œå†ä¾†æ‰¾æˆ‘å§')
            time.sleep(4)

    def tutorial(self):
        win_count = 0
        print('ä½ èµ°é€²äº†åµé›œçš„è³­å ´ï¼Œä¸€åç”·å­æ†‘ç©ºå‡ºç¾åœ¨ä½ é¢å‰')
        time.sleep(2)
        print('è–©é‚çˆ¾: ä½ å¥½ï¼Œæˆ‘æ˜¯é€™è£¡çš„è² è²¬äººï¼Œæ­¡è¿å…‰è‡¨BuckShot')
        time.sleep(2)
        print('è–©é‚çˆ¾: éœ€è¦æˆ‘ç‚ºä½ ä»‹ç´¹ä¸€ä¸‹å—?')
        time.sleep(1)
        action = input('è§€çœ‹æ•™å­¸? 1.æ˜¯ 2.å¦')
        if action == '2':
            print('è–©é‚çˆ¾: åŸä¾†æ˜¯ç†Ÿå®¢äº†å‘€ï¼ŒçœŸæ˜¯å¤±ç¦®äº†')
            time.sleep(2)
            print('è–©é‚çˆ¾: å¦‚æœæœ‰ä»»ä½•å•é¡Œï¼Œéš¨æ™‚å¯ä»¥ä¾†å¤§å»³æ‰¾æˆ‘ï¼Œç¥ä½ è³­é‹æ˜Œéš†')
            time.sleep(2)
            return
        elif action == '1':
            print('è–©é‚çˆ¾: äº†è§£äº†ï¼Œé‚£éº¼è«‹è·Ÿæˆ‘ä¾†')
            time.sleep(2)
            print('è–©é‚çˆ¾: BuckShotæ˜¯ä¸€é–“ç”±æƒ¡é­”ç¶“ç‡Ÿçš„è³­å ´ï¼Œæˆ‘å€‘æä¾›å·¨é¡çé‡‘ï¼Œè€Œä½ å‰‡æ˜¯ç”¨éˆé­‚ä½œç‚ºè³­æ³¨')
            time.sleep(4)
            print('è–©é‚çˆ¾å¸¶è‘—ä½ åˆ°è³­æ¡Œå‰ï¼Œä¸¦äº¤çµ¦ä½ ä¸€æŠŠæ•£å½ˆæ§')
            time.sleep(4)
            print('è–©é‚çˆ¾: æ¯å±€é–‹å§‹æ™‚ï¼Œé€™æŠŠæ§æœƒä»¥éš¨æ©Ÿé †åºè£å¡«2~8ç™¼å¯¦å½ˆæˆ–ç©ºåŒ…å½ˆ')
            time.sleep(4)
            print('è–©é‚çˆ¾: è¼ªåˆ°ä½ çš„å›åˆæ™‚ï¼Œä½ å¯ä»¥é¸æ“‡é–‹æ§å°„å‘è‡ªå·±æˆ–å°„å‘èŠå®¶')
            time.sleep(4)
            print('è–©é‚çˆ¾: è¢«å¯¦å½ˆå°„ä¸­è€…å°‡æœƒæå¤±1é»è¡€é‡')
            time.sleep(4)
            print('è–©é‚çˆ¾: ç•¶ä½ ç”¨ç©ºåŒ…å½ˆå°„ä¸­è‡ªå·±æ™‚ï¼Œä½ å°‡ç²å¾—ä¸€å€‹é¡å¤–çš„å›åˆ')
            time.sleep(4)
            print('è–©é‚çˆ¾: é›™æ–¹è¼ªæµé–‹æ§ç›´åˆ°å­å½ˆæ‰“ç©ºï¼Œé€²å…¥ä¸‹ä¸€å±€ä¸¦é‡æ–°è£å¡«å­å½ˆ')
            time.sleep(4)
            print('è–©é‚çˆ¾: å…ˆå°‡å°æ–¹è¡€é‡æ­¸é›¶è€…ç²å‹')
            time.sleep(4)
            print('è–©é‚çˆ¾: ä»¥ä¸Šä¾¿æ˜¯æƒ¡é­”è¼ªç›¤çš„åŸºç¤è¦å‰‡ï¼Œæº–å‚™å¥½çš„è©±å°±ä¾†ç·´ç¿’ä¸€å ´å§?')
            time.sleep(4)
            input('æŒ‰ä¸‹Enteré–‹å§‹ç·´ç¿’')
            player1 = player(5,[],0)
            computer1 = computer(5,[])
            tutorial_games={}
            tutorial_games[0] = tutorial_game(player1,computer1,2)
            while True:
                if tutorial_games[0].round == 1:
                    live_bullet = 2
                    blank = 1
                else:
                    live_bullet = 2
                    blank = 3
                tutorial_games[0].basic_one_round(live_bullet,blank)
                tutorial_games[0].round += 1
                if player1.hp <= 0:
                    print('ä½ å¿½ç„¶å›éç¥ä¾†ï¼Œç™¼ç¾è‡ªå·±ä»ååœ¨è³­æ¡Œå‰ï¼Œå½·å½¿å‰›æ‰éƒ½åªæ˜¯ä¸€å ´å¤¢')
                    time.sleep(3)
                    print('è–©é‚çˆ¾: è³­åšé€™ç¨®äº‹ï¼Œé‹æ°£æ˜¯å¾ˆé‡è¦çš„ã€‚å¸Œæœ›ä½ å·²ç¶“æŒæ¡åŸºæœ¬è¦å‰‡äº†')
                    break
                elif computer1.hp <= 0:
                    win_count += 1
                    print('è–©é‚çˆ¾: å¾ˆå¥½ï¼Œçœ‹ä¾†ä½ å·²ç¶“æŒæ¡äº†åŸºæœ¬è¦å‰‡')
                    break
            time.sleep(4)
            print('è–©é‚çˆ¾: é‚£éº¼ï¼Œæ¥ä¸‹ä¾†ç”±åˆ©ç¶­å¦ç‚ºä½ ä»‹ç´¹é—œæ–¼"é“å…·"çš„è¦å‰‡å§')
            time.sleep(4)
            print('èªç•¢ï¼Œä¸€åèº«æé«˜æŒ‘ï¼Œå…¨èº«åˆºé’çš„å¥³å­ä¸çŸ¥å¾ä½•è™•å‡ºç¾ï¼Œæ¹Šåˆ°ä½ çš„é¢å‰')
            time.sleep(4)
            print('åˆ©ç¶­å¦: æ–°ä¾†çš„å°å¤¥å­æŒºæ¨™ç·»å˜›ï¼Œæˆ‘æ˜¯é€™è£¡çš„å•†åº—è€é—†ï¼Œåˆ©ç¶­å¦')
            time.sleep(4)
            print('åˆ©ç¶­å¦: ä½ ä¸è¦ºå¾—ç´”ç²¹è³­é‹æ°£çš„éŠæˆ²æœ‰é»ç„¡èŠå—?')
            time.sleep(4)
            print('åˆ©ç¶­å¦: ç„¶è€Œåªè¦åŠ å…¥é“å…·ï¼Œè³­å±€å°±æœƒè®Šå¾—æ›´åˆºæ¿€ï¼Œä½ èªªæ˜¯å§?')
            time.sleep(4)
            print('è–©é‚çˆ¾åœ¨ä¸€æ—çªäº†å¥¹ä¸€çœ¼ï¼Œåˆ©ç¶­å¦æ¸…äº†æ¸…å–‰åš¨ï¼Œç¹¼çºŒèªªé“')
            time.sleep(4)
            print('åˆ©ç¶­å¦: æ¥ä¸‹ä¾†æˆ‘æœƒç‚ºä½ ä»‹ç´¹ä¸€ä¸‹é“å…·çš„ä½¿ç”¨æ–¹æ³•å’Œè¦å‰‡')
            time.sleep(4)
            print('åˆ©ç¶­å¦: æ¯å±€é–‹å§‹ï¼Œä¹Ÿå°±æ˜¯é‡æ–°è£å½ˆçš„æ™‚å€™ï¼Œä½ å’ŒèŠå®¶éƒ½å°‡éš¨æ©Ÿç²å¾—2~5å€‹é“å…·')
            time.sleep(4)
            print('åˆ©ç¶­å¦: é€™äº›é“å…·å¯ä»¥å¹«åŠ©ä½ æˆ–è€…å¹²æ“¾å°æ‰‹ï¼Œå¢åŠ éŠæˆ²çš„è®Šæ•¸æ€§')
            time.sleep(4)
            print('åˆ©ç¶­å¦: ä½ å¯ä»¥åœ¨æ¯å›åˆé–‹æ§å‰ä½¿ç”¨é“å…·ï¼Œæƒ³ç”¨å¹¾å€‹é“å…·éƒ½å¯ä»¥ï¼Œæ¬¡æ•¸æ²’æœ‰é™åˆ¶')
            time.sleep(4)
            print('åˆ©ç¶­å¦: æ²’ç”¨å®Œçš„é“å…·å°‡æœƒä¿ç•™ï¼Œä¸éè«‹æ³¨æ„æ¯äººæœ€å¤šæŒæœ‰8å€‹é“å…·')
            time.sleep(4)
            print('åˆ©ç¶­å¦: æ¯å€‹é“å…·çš„æ•ˆæœå„ä¸ç›¸åŒï¼Œä¸€èˆ¬é“å…·ç¸½å…±æœ‰9ç¨®ï¼Œå®ƒå€‘çš„æ•ˆæœåˆ†åˆ¥æ˜¯...ä»€éº¼ä¾†è‘—?')
            time.sleep(4)
            print('ä½ è½åˆ°èº«å¾Œå‚³ä¾†ä¸€è²å˜†æ°£ï¼Œæ¥è‘—ä¸€æœ¬åœ–é‘‘è¢«æ”¾åˆ°äº†è³­æ¡Œä¸Š')
            time.sleep(4)
            print('è‰è‰æ–¯: é€™è£¡æœ‰ä¸€èˆ¬é“å…·çš„ä»‹ç´¹ï¼Œè¨˜ä¸‹ä¾†å°ä½ æœƒå¾ˆæœ‰å¹«åŠ©')
            time.sleep(4)
            action = input('æŸ¥çœ‹åœ–é‘‘? 1.æ˜¯ 2.å¦')
            lobby_NPC[0].unlock_normal_item()
            lobby_NPC[0].unlock_special_item()
            if action == '1':
                lobby_NPC[0].show_normal_item()
            time.sleep(2)
            print('è‰è‰æ–¯: é€™äº›é“å…·æ˜¯æ™®é€šé“å…·ï¼Œç•¶ç„¶æœªä¾†ä½ åœ¨è³­æ¡Œä¸Šæœ‰æ©Ÿæœƒé‡è¦‹ä¸€äº›ç‰¹æ®Šé“å…·')
            time.sleep(4)
            print('è‰è‰æ–¯: åˆ°æ™‚å€™ä½ å¯ä»¥ä¾†æˆ‘é€™è£¡æŸ¥çœ‹åœ–é‘‘ï¼Œæˆ‘æœƒå‘Šè¨´ä½ å¦‚ä½•ä½¿ç”¨é€™äº›é“å…·')
            time.sleep(4)
            print('åˆ©ç¶­å¦: å’³å’³...ç¸½ä¹‹ï¼Œæº–å‚™å¥½çš„è©±å°±ä¾†ç·´ç¿’ä¸€å ´å§? å˜¿å˜¿å˜¿ï¼Œæˆ‘æœƒè®“ä½ é«”é©—é“å…·çœŸæ­£çš„åŠ›é‡......')
            time.sleep(4)
            print('è–©é‚çˆ¾ä¸€æ‹³æ‰“åœ¨åˆ©ç¶­å¦é ­ä¸Šï¼Œå¼·è¡ŒæŠŠå¥¹æ‹–èµ°')
            time.sleep(4)
            print('è‰è‰æ–¯: é‚£å€‹ç¬¨è›‹ç¸½æ˜¯æœƒæå‡ºä¸å¿…è¦çš„æ··äº‚ã€‚é€™å ´å°±ç”±æˆ‘ä¾†å¹«ä½ ç·´ç¿’å§?')
            time.sleep(4)
            input('æŒ‰ä¸‹Enteré–‹å§‹ç·´ç¿’')
            player1 = player(5,[],0)
            computer1 = computer(5,[])
            tutorial_games={}
            tutorial_games[1] = tutorial_game(player1,computer1,6)
            while True:
                live_bullet = random.randint(1,4)
                blank = random.randint(1,4)
                item_number = random.randint(2,5)
                tutorial_games[1].item_one_round(live_bullet,blank,item_number)
                tutorial_games[1].round += 1
                if player1.hp <= 0:
                    print('ä½ å¿½ç„¶å›éç¥ä¾†ï¼Œç™¼ç¾è‡ªå·±æ­£è¶´åœ¨è³­æ¡Œå‰ï¼Œè‰è‰æ–¯å‰›å¥½ç‚ºä½ å®ŒæˆåŒ…ç´®')
                    break
                elif computer1.hp <= 0:
                    win_count += 1
                    print('è‰è‰æ–¯: ä½ å­¸å¾—å¾ˆå¿«å‘¢! éˆæ´»é‹ç”¨é“å…·æ˜¯è‡´å‹çš„é—œéµ')
                    break
            time.sleep(4)
            print('è‰è‰æ–¯: é‚£éº¼ä»¥ä¸Šå°±æ˜¯é—œæ–¼é“å…·çš„ä½¿ç”¨æ–¹æ³•å’ŒåŸºæœ¬è¦å‰‡')
            time.sleep(4)
            print('è‰è‰æ–¯: å¦‚æœæœ‰ä»»ä½•è¦å‰‡ç›¸é—œçš„å•é¡Œï¼Œä½ å¯ä»¥åœ¨å¤§å»³æ‰¾åˆ°è–©é‚çˆ¾ï¼Œä»–æœƒå¾ˆæ¨‚æ„ç‚ºä½ è§£ç­”')
            time.sleep(4)
            print('è‰è‰æ–¯: é‡åˆ°æ–°çš„é“å…·æˆ–è€…æƒ³è¦ä¸€äº›é—œæ–¼è³­å±€çš„æŠ€å·§ï¼Œéƒ½å¯ä»¥ä¾†æ‰¾æˆ‘')
            time.sleep(4)
            print('è‰è‰æ–¯: é †å¸¶ä¸€æï¼Œåˆ©ç¶­å¦é‚£ç¬¨è›‹è² è²¬å•†åº—ï¼Œç­‰ä½ æœ‰éŒ¢å¾Œä¹Ÿå¯ä»¥å»å¥¹é‚£è£¡å…‰é¡§ä¸€ä¸‹')
            time.sleep(4)
            print('è‰è‰æ–¯: ç„¶å¾Œé€™å€‹çµ¦ä½ ï¼Œåœ¨ä½ çŠ¯éŒ¯æ™‚å¯ä»¥æ•‘ä½ ä¸€å‘½ï¼Œå°±ç•¶ä½œæ˜¯åˆæ¬¡è¦‹é¢çš„ç¦®ç‰©å§')
            time.sleep(4)
            print('ä½ ç²å¾—äº†äººå·¥å¿ƒè‡Ÿï¼Œå¯ä»¥åœ¨æ­»äº¡çš„å¾©æ´»ä¸€æ¬¡ï¼Œä½¿ç”¨æ™‚æ¶ˆè€—50%è²¡ç”¢ä½œç‚ºæ‰‹è¡“è²»ç”¨')
            main_player.unlockable_item.append('äººå·¥å¿ƒè‡Ÿ')
            time.sleep(4)
            print('è‰è‰æ–¯: é‚£éº¼ç¥ä½ å¥½é‹ï¼Œå¸Œæœ›ä½ èƒ½åœ¨é€™è£¡æ‰¾åˆ°ä½ æƒ³è¦çš„æ±è¥¿')
            time.sleep(4)
            input('æŒ‰ä¸‹Enterå›åˆ°å¤§å»³')
            if win_count == 0:
                lobby_NPC[0].unlock_achievement('ä¹Ÿè¨±ä½ ä¸é©åˆé€™è£¡')
            elif win_count == 2:
                lobby_NPC[0].unlock_achievement('ç‚¸é­š')
    
    def show_rule(self):
        i = 5
        rule_list = []
        rule_list.extend(['ä¸€èˆ¬è¦å‰‡','ç‰¹æ®Šé“å…·è¦å‰‡','é¡å¤–åŠ æ³¨è¦å‰‡','çš‡å&åœ‹ç‹é“å…·è¦å‰‡'])
        print ('=================================================================')
        print('1.ä¸€èˆ¬è¦å‰‡')
        print('2.ç‰¹æ®Šé“å…·è¦å‰‡')
        print('3.é¡å¤–åŠ æ³¨è¦å‰‡')
        print('4.çš‡å&åœ‹ç‹é“å…·è¦å‰‡')
        if 'æœ€çµ‚è©¦ç…‰' in main_player.unlockable_item:
            print(str(i)+'.æƒ¡é­”è©¦ç…‰è¦å‰‡')
            rule_list.append('æƒ¡é­”è©¦ç…‰è¦å‰‡')
            i += 1
        if lobby_NPC[0].achievement_list[2].unlock == True:
            print(str(i)+'.é—œæ–¼æƒ¡é­”çœ·å±¬')
            rule_list.append('æƒ¡é­”çœ·å±¬è¦å‰‡')
            i += 1
        if not all([any(['å—œè¡€å°è¨˜' in main_player.unlockable_item, 'â˜…æ…¾ä¹‹è¡€å°è¨˜â˜…' in main_player.unlockable_item]),
                    any(['å¢®å¤©ä½¿å°è¨˜' in main_player.unlockable_item, 'â˜…æ­»ä¹‹å¤©ä½¿å°è¨˜â˜…' in main_player.unlockable_item]),
                    any(['æ‰­æ›²å°è¨˜' in main_player.unlockable_item, 'é‚„æ²’æƒ³å¥½' in main_player.unlockable_item])]):
            print(str(i)+'.å¤§å»³ä¸­å¤®çš„å¤§é–€?')
            i += 1
            rule_list.append('å¤§å»³ä¸­å¤®çš„å¤§é–€?')
        else:
            print(str(i)+'.é€²å…¥å¤§å»³ä¸­å¤®çš„å¤§é–€')
            rule_list.append('é€²å…¥å¤§å»³ä¸­å¤®çš„å¤§é–€')
            i += 1
        
        print(str(i)+'.æ²’äº‹')
        print ('=================================================================')
        action = int(input(''))
        if action > len(rule_list):
            print('è–©é‚çˆ¾: æ²’äº‹å°±å¥½ï¼Œæœ‰å•é¡Œå†ä¾†æ‰¾æˆ‘å§')
            return
        if action == 1:
            print('è–©é‚çˆ¾: é‚£éº¼æˆ‘å†ç‚ºä½ è¤‡ç¿’ä¸€ä¸‹åŸºæœ¬è¦å‰‡')
            time.sleep(5)
            print('è–©é‚çˆ¾: æ¯ä¸€"å ´"è³­å±€é–‹å§‹æ™‚ï¼Œä½ å’ŒèŠå®¶éƒ½æœƒéš¨æ©Ÿåˆ†é…2~6é»è¡€é‡ï¼Œè¡€é‡å…ˆæ­¸é›¶è€…è¦–ç‚ºæ•—åŒ—')
            time.sleep(5)
            print('è–©é‚çˆ¾: æ¯ä¸€"å±€"é–‹å§‹æ™‚ï¼Œæ•£å½ˆæ§æœƒä»¥éš¨æ©Ÿé †åºè£å¡«2~8ç™¼å¯¦å½ˆæˆ–ç©ºåŒ…å½ˆï¼Œå…©äººä¹Ÿæœƒåˆ†åˆ¥ç²å¾—2~5å€‹éš¨æ©Ÿé“å…·')
            time.sleep(5)
            print('è–©é‚çˆ¾: å­å½ˆè£å¡«å®Œç•¢å¾Œå°‡æœƒè¼ªåˆ°ä½ çš„"å›åˆ"ï¼Œä½ å¯ä»¥é¸æ“‡ä½¿ç”¨é“å…·ã€é–‹æ§å°„å‘è‡ªå·±æˆ–é–‹æ§å°„å‘èŠå®¶')
            time.sleep(5)
            print('è–©é‚çˆ¾: é“å…·ç‚ºæ¶ˆè€—å“ï¼Œæ¯å›åˆé“å…·ä½¿ç”¨é‡ä¸é™ï¼Œæ²’ç”¨å®Œçš„é“å…·æœƒè¢«ä¿ç•™ï¼Œæ¯äººæœ€å¤šæŒæœ‰8å€‹é“å…·')
            time.sleep(5)
            print('è–©é‚çˆ¾: å¦‚æœä½ ç”¨å¯¦å½ˆé–‹æ§å°„ä¸­è‡ªå·±ï¼Œå°‡æå¤±1é»è¡€é‡ä¸¦çµæŸä½ çš„å›åˆï¼›ç•¶ä½ ç”¨ç©ºåŒ…å½ˆå°„ä¸­è‡ªå·±ï¼Œä½ å°‡ç²å¾—ä¸€å€‹é¡å¤–çš„å›åˆ')
            time.sleep(5)
            print('è–©é‚çˆ¾: å¦‚æœä½ é¸æ“‡é–‹æ§å°„å‘èŠå®¶ï¼Œè‹¥ç‚ºå¯¦å½ˆèŠå®¶å°‡æå¤±1é»è¡€é‡ï¼Œç©ºåŒ…å½ˆå‰‡ç„¡äº‹ç™¼ç”Ÿã€‚ç„¡è«–å°„å‡ºçš„å­å½ˆç‚ºä½•ï¼Œéƒ½å°‡çµæŸä½ çš„å›åˆ')    
            time.sleep(5)
            print('è–©é‚çˆ¾: èŠå®¶çš„è¡Œå‹•é¸é …å’Œä½ ç›¸åŒï¼Œé›™æ–¹è¼ªæµé–‹æ§ç›´åˆ°å­å½ˆæ‰“ç©ºï¼Œé€²å…¥ä¸‹ä¸€"å±€"ï¼Œé‡æ–°è£å¡«å­å½ˆå’Œç²å¾—æ–°é“å…·')
            time.sleep(5)
            print('è–©é‚çˆ¾: æŒçºŒç›´åˆ°ä¸€æ–¹çš„è¡€é‡æ­¸é›¶ï¼ŒçµæŸé€™ä¸€"å ´"ä¸¦ç²å¾—çé‡‘')
            time.sleep(5)
            print('è–©é‚çˆ¾: å‹åˆ©å¾Œï¼Œè‹¥ä½ é¸æ“‡ç¹¼çºŒï¼Œæ²’ç”¨å®Œçš„é“å…·å¯ä»¥ç¹¼æ‰¿åˆ°ä¸‹ä¸€å ´è³­å±€')
            time.sleep(5)
            print('è–©é‚çˆ¾: éš¨è‘—ä½ çš„é€£å‹æ•¸å¢åŠ ï¼ŒèŠå®¶çš„è¡€é‡å°‡æœƒå¢åŠ ï¼Œæ‰€ä»¥è«‹è‡ªè¡Œè©•ä¼°é¢¨éšª')
            time.sleep(5)
            print('è–©é‚çˆ¾: ä»¥ä¸Šå°±æ˜¯è³­å±€çš„åŸºæœ¬è¦å‰‡')
            input('æŒ‰ä¸‹Enterå›åˆ°ä¸Šä¸€é ')
        elif action == 2:
            print('è–©é‚çˆ¾: é‚£éº¼æˆ‘ä¾†ç‚ºä½ è¬›è§£ä¸€ä¸‹ç‰¹æ®Šé“å…·çš„è¦å‰‡')
            time.sleep(5)
            print('è–©é‚çˆ¾: ç‰¹æ®Šé“å…·æ“æœ‰æ¯”ä¸€èˆ¬é“å…·æ›´å¼·åŠ›çš„æ•ˆæœï¼Œä¸€èˆ¬ç‹€æ³ä¸‹ç„¡æ³•ç›´æ¥ç²å¾—')   
            time.sleep(5)
            print('è–©é‚çˆ¾: å”¯ä¸€èƒ½å¤ åœ¨æ›å½ˆå¾Œç›´æ¥ç²å¾—çš„ç‰¹æ®Šé“å…·æ˜¯"æœªçŸ¥è—åœ–"')
            time.sleep(5)
            print('è–©é‚çˆ¾: å…¶é¤˜ç‰¹æ®Šé“å…·çš„ç²å¾—æ–¹å¼æ˜¯ä½¿ç”¨æœªçŸ¥è—åœ–èˆ‡ä¸€èˆ¬é“å…·é€²è¡Œ"åˆæˆ"')
            time.sleep(5)
            print('è–©é‚çˆ¾: èˆ‰ä¾‹ä¾†èªªï¼Œå‡è¨­ä½ çš„èƒŒåŒ…ä¸­æŒæœ‰3å€‹"éæœŸè—¥ç‰©"å’Œ1å€‹"æœªçŸ¥è—åœ–"')
            time.sleep(5)
            print('è–©é‚çˆ¾: é€™æ™‚å€™ä½¿ç”¨"æœªçŸ¥è—åœ–"ï¼Œä¾¿å¯ä»¥æ¶ˆè€—3å€‹"éæœŸè—¥ç‰©"å’Œ1å€‹"æœªçŸ¥è—åœ–"åˆæˆç‰¹æ®Šé“å…·"ç¦è—¥"')
            time.sleep(5)
            print('è–©é‚çˆ¾: åˆæˆå¾Œçš„ç‰¹æ®Šé“å…·å°‡æœƒç›´æ¥æ”¾å…¥ä½ çš„èƒŒåŒ…ä¸­ï¼Œèƒ½å¤ ç«‹å³ä½¿ç”¨ï¼Œä¸¦ä¸”ä¸æœƒæ¶ˆè€—ä½ çš„å›åˆ')
            time.sleep(5)
            print('è–©é‚çˆ¾: åˆæˆè¡¨å¯ä»¥åœ¨è‰è‰æ–¯çš„åœ–é‘‘ä¸­æŸ¥çœ‹ï¼Œå¥¹æœƒç‚ºä½ æä¾›æ›´è©³ç´°çš„æ•˜è¿°')
            time.sleep(5)
            print('è–©é‚çˆ¾: ä»¥ä¸Šå°±æ˜¯ç‰¹æ®Šé“å…·çš„è¦å‰‡')
            input('æŒ‰ä¸‹Enterå›åˆ°ä¸Šä¸€é ')
        elif action == 3:
            print('è–©é‚çˆ¾: æˆ‘ä¾†ç‚ºä½ è¬›è§£ä¸€ä¸‹é¡å¤–åŠ æ³¨çš„è¦å‰‡')
            time.sleep(5)
            print('è–©é‚çˆ¾: é¡å¤–åŠ æ³¨å¯åœ¨è³­å±€é–‹å§‹å‰é¸æ“‡ï¼Œæ–°çš„è¦å‰‡æœƒè¢«åŠ å…¥è³­å±€ï¼Œç²å‹çé‡‘ä¹Ÿå°‡æé«˜')
            time.sleep(5)
            print('è–©é‚çˆ¾: çé‡‘å€ç‡å¯ä»¥å½¼æ­¤ç–ŠåŠ ï¼Œä¸ééœ€è¦è‡³å°‘é€£å‹5å ´ï¼Œå€ç‡æ‰æœƒè¢«è¨ˆç®—')
            time.sleep(5)
            print('è–©é‚çˆ¾: ç›®å‰æœ‰4ç¨®æ¨¡å¼å¯åŠ æ³¨:')
            time.sleep(5)
            print('è–©é‚çˆ¾: 1.é«˜é¢¨éšªæ¨¡å¼ï¼Œçé‡‘å€ç‡5å€')
            time.sleep(5)
            print('è–©é‚çˆ¾: é€™å€‹æ¨¡å¼ä¸‹ï¼Œé›™æ–¹éƒ½æœ‰å¯èƒ½åœ¨æ–°çš„ä¸€å±€é–‹å§‹æ™‚ç²å¾—"ç‰¹æ®Šé“å…·"')   
            time.sleep(5)   
            print('è–©é‚çˆ¾: å¦å¤–ï¼Œæ¯å ´è³­å±€é–‹å§‹æ™‚ï¼Œæœ‰50%çš„æ©Ÿç‡å¤§å¹…æå‡ä½ å’ŒèŠå®¶çš„åˆå§‹è¡€é‡')
            time.sleep(5)
            print('è–©é‚çˆ¾: 2.æ®ºæ‰‹åœ‹ç‹æ¨¡å¼ï¼Œçé‡‘å€ç‡10å€')
            time.sleep(5)
            print('è–©é‚çˆ¾: é€™å€‹æ¨¡å¼ä¸‹ï¼ŒèŠå®¶æœ‰å¯èƒ½åœ¨æ–°çš„ä¸€å±€é–‹å§‹æ™‚ç²å¾—å¼·åŠ›çš„"åœ‹ç‹é“å…·"')
            time.sleep(5)
            print('è–©é‚çˆ¾: é“å…·çš„æ•ˆæœå¯åœ¨é‡è¦‹å¾Œè§£é–åœ–é‘‘ï¼Œè‰è‰æ–¯èƒ½ç‚ºä½ æä¾›æ›´è©³ç´°çš„æ•˜è¿°')
            time.sleep(5)
            print('è–©é‚çˆ¾: 3.å¹½é–‰çš‡åæ¨¡å¼ï¼Œçé‡‘å€ç‡7å€')
            time.sleep(5)
            print('è–©é‚çˆ¾: é€™å€‹æ¨¡å¼ä¸‹ï¼Œä½ å°‡ç„¡æ³•ç²å¾—å°ˆå±¬ç©å®¶çš„å¼·åŠ›"çš‡åé“å…·"')
            time.sleep(5)
            print('è–©é‚çˆ¾: å’Œåœ‹ç‹é“å…·ç›¸åŒï¼Œé‡è¦‹å¾Œå¯åœ¨è‰è‰æ–¯çš„é–±è¦½å®¤æŸ¥çœ‹åœ–é‘‘')
            time.sleep(5)
            print('è–©é‚çˆ¾: 4.èŠå®¶å…ˆæ‰‹æ¨¡å¼ï¼Œçé‡‘å€ç‡50å€')
            time.sleep(5)
            print('è–©é‚çˆ¾: é€™å€‹æ¨¡å¼ä¸‹ï¼Œæ¯å±€å­å½ˆè£å¡«å®Œç•¢å¾ŒèŠå®¶å°‡å…ˆè¡Œç²å¾—å›åˆ')
            time.sleep(5)    
            print('è–©é‚çˆ¾: è®“å‡ºå…ˆæ‰‹æ¬Šçš„é¢¨éšªç›¸ç•¶é«˜ï¼Œç•¶ç„¶çé‡‘å€ç‡ä¹Ÿæ˜¯æœ€é«˜çš„') 
            time.sleep(5)
            print('è–©é‚çˆ¾: ä»¥ä¸Šå°±æ˜¯é¡å¤–åŠ æ³¨çš„è¦å‰‡')
            input('æŒ‰ä¸‹Enterå›åˆ°ä¸Šä¸€é ')
        elif action == 4:
            print('è–©é‚çˆ¾: é‚£éº¼æˆ‘ä¾†ç‚ºä½ è¬›è§£ä¸€ä¸‹çš‡å&åœ‹ç‹é“å…·çš„è¦å‰‡')
            time.sleep(5)
            print('è–©é‚çˆ¾: çš‡åé“å…·æ˜¯ä¸€ç¨®ç¨€æœ‰çš„é“å…·ï¼Œå®ƒå€‘èƒ½å¤ åœ¨æ›å½ˆæ™‚ä½æ©Ÿç‡ç›´æ¥ç²å¾—')
            time.sleep(5)
            print('è–©é‚çˆ¾: çš‡åé“å…·æ“æœ‰å¼·å¤§çš„æ•ˆæœï¼Œèƒ½å¤§å¹…æé«˜ç²å‹æ©Ÿæœƒ')
            time.sleep(5)
            print('è–©é‚çˆ¾: æ­¤å¤–ï¼Œçš‡åçš„ä½¿ç”¨æ¬¡æ•¸å°‡è¢«è¨˜éŒ„ï¼Œä¸¦åœ¨ä½ é¸æ“‡é€€å‡ºè³­å±€æ™‚æä¾›é¡å¤–çš„çé‡‘å€ç‡')
            time.sleep(5)    
            print('è–©é‚çˆ¾: èŠå®¶ç„¡æ³•ç²å¾—çš‡åé“å…·ï¼Œç„¶è€Œï¼Œé€™ä¸ä»£è¡¨ä»–å€‘ä¸èƒ½"ä½¿ç”¨"çš‡åé“å…·ï¼Œé€™é»è«‹æ³¨æ„')
            time.sleep(5)
            print('è–©é‚çˆ¾: ç›¸å°æ–¼çš‡åé“å…·ï¼Œåœ‹ç‹é“å…·æ˜¯ä¸€ç¨®å°ˆå±¬æ–¼èŠå®¶çš„å¼·åŠ›é“å…·')
            time.sleep(5)
            print('è–©é‚çˆ¾: åœ‹ç‹é“å…·åªæœ‰åœ¨ä¸‹æ³¨æ®ºæ‰‹åœ‹ç‹æ¨¡å¼æ™‚ï¼ŒèŠå®¶æ‰èƒ½å¤ åœ¨æ›å½ˆæ™‚ä½æ©Ÿç‡ç²å¾—')
            time.sleep(5)
            print('è–©é‚çˆ¾: çš‡åå’Œåœ‹ç‹é“å…·çš„æ•ˆæœéƒ½å¯ä»¥åœ¨é‡è¦‹å¾Œæ–¼åœ–é‘‘è§£é–è©³ç´°æ•˜è¿°')
            time.sleep(5)
            print('è–©é‚çˆ¾: ä»¥ä¸Šå°±æ˜¯çš‡å&åœ‹ç‹é“å…·çš„è¦å‰‡')
            input('æŒ‰ä¸‹Enterå›åˆ°ä¸Šä¸€é ')
        elif rule_list[action-1] == 'æƒ¡é­”è©¦ç…‰è¦å‰‡':
            print('è–©é‚çˆ¾: ä½ æ‡‰è©²å·²ç¶“å¾åˆ©ç¶­å¦é‚£è£¡è§£é–äº†æƒ¡é­”è©¦ç…‰')
            time.sleep(5)
            print('è–©é‚çˆ¾: å¦‚å¥¹æ‰€èªªï¼Œæƒ¡é­”è©¦ç…‰å°‡ç”±è‰è‰æ–¯ã€åˆ©ç¶­å¦å’Œæˆ‘åšç‚ºä½ çš„å°æ‰‹')
            time.sleep(5)
            print('è–©é‚çˆ¾: æƒ¡é­”è©¦ç…‰æ²’æœ‰çé‡‘ï¼Œç„¶è€Œï¼Œå¦‚æœä½ èƒ½å¤ ç²å‹ï¼Œå°‡å¯ä»¥ç²å¾—æƒ¡é­”çš„ä¸€éƒ¨ä»½åŠ›é‡:"æƒ¡é­”å°è¨˜"')
            time.sleep(5)
            print('è–©é‚çˆ¾: è«‹æ³¨æ„ï¼Œæˆ‘å€‘ä¸‰äººçš„è©¦ç…‰çš†æœƒæœ‰è‡ªå·±ç¨ç‰¹çš„è¦å‰‡å’Œé€£å‹è¦æ±‚ï¼Œä¸”æƒ¡é­”å°è¨˜å°æˆ‘å€‘æ˜¯æ²’æœ‰æ•ˆæœçš„')
            time.sleep(5)
            print('è–©é‚çˆ¾: ç•¶ä½ åšå¥½æº–å‚™æ™‚ï¼Œå¯ä»¥å„è‡ªä¾†æ‰¾æˆ‘å€‘ä¸‰å€‹é€²è¡Œè©¦ç…‰')
            time.sleep(5)
            print('è–©é‚çˆ¾: ä»¥ä¸Šå°±æ˜¯æƒ¡é­”è©¦ç…‰çš„è¦å‰‡')
            input('æŒ‰ä¸‹Enterå›åˆ°ä¸Šä¸€é ')
        elif rule_list[action-1] == 'æƒ¡é­”çœ·å±¬è¦å‰‡':
            print('è–©é‚çˆ¾: æƒ¡é­”çœ·å±¬? ä½ å¾å“ªè£¡è½ä¾†çš„?')
            time.sleep(5)
            print('è–©é‚çˆ¾: ......è‰è‰æ–¯é‚£å‚¢ä¼™')
            time.sleep(5)
            print('è–©é‚çˆ¾: ç®—äº†ï¼Œè·Ÿä½ èªªæ˜ä¹Ÿç„¡å¦¨')
            time.sleep(5)
            print('è–©é‚çˆ¾: æˆç‚ºæƒ¡é­”çœ·å±¬ï¼Œæ„å‘³è‘—ä½ å°‡è‡ªå·±çš„éˆé­‚ç»çµ¦æƒ¡é­”ï¼Œå·²ä¸€ç”Ÿç‚ºæƒ¡é­”æ•ˆåŠ›ç‚ºä»£åƒ¹æ›å–åŠ›é‡')
            time.sleep(5)
            print('è–©é‚çˆ¾: ç„¶è€Œï¼Œæƒ³æˆç‚ºçœ·å±¬ä¸¦ä¸æ˜¯ä½ èªªäº†ç®—ï¼Œä½ å¿…é ˆå¾—åˆ°å°æ–¹çš„é‚€è«‹')
            time.sleep(5)
            print('è–©é‚çˆ¾: å…·é«”ä¾†èªªï¼Œä½ ä¸åªå¿…é ˆåœ¨æƒ¡é­”è©¦ç…‰ä¸­ç²å‹ï¼Œé‚„å¿…é ˆåŒæ™‚å‘æˆ‘å€‘å±•ç¾ä½ è‡ªå·±')
            time.sleep(5)
            print('è–©é‚çˆ¾: æ¯å€‹æƒ¡é­”éƒ½æœ‰è‡ªå·±çš„åå¥½ï¼Œä½ å¿…é ˆæ»¿è¶³æˆ‘å€‘çš„è¦æ±‚ï¼Œæ‰æœ‰æ©Ÿæœƒç²å¾—é‚€è«‹')
            time.sleep(5)
            print('è–©é‚çˆ¾: ä¸€å€‹éˆé­‚åªèƒ½æˆç‚ºä¸€å€‹æƒ¡é­”çš„çœ·å±¬ï¼Œæ‰€ä»¥åšå‡ºé¸æ“‡å‰è«‹ä¸‰æ€')
            time.sleep(5)
            print('è–©é‚çˆ¾: å¤§æ¦‚é€™æ¨£ï¼Œè‡³æ–¼æƒ¡é­”çš„å–œå¥½ï¼Œè«‹è‡ªè¡Œæ‘¸ç´¢')
            input('æŒ‰ä¸‹Enterå›åˆ°ä¸Šä¸€é ')
        elif rule_list[action-1] == 'å¤§å»³ä¸­å¤®çš„å¤§é–€?':
            print('è–©é‚çˆ¾: ä½ æƒ³é€²å»é‚£æ‰‡å¤§é–€? æ•æˆ‘æ‹’çµ•')
            time.sleep(5)
            print('è–©é‚çˆ¾: é–€å¾Œæ˜¯é€™åº§è³­å ´çš„å‰µè¾¦è€…ï¼Œå…¬ä¸»å¤§äººçš„æˆ¿é–“')
            time.sleep(5)
            print('è–©é‚çˆ¾: åªæœ‰å—åˆ°èªå¯çš„è³­å¾’æ‰æœ‰è³‡æ ¼å’Œå…¬ä¸»å¤§äººè¦‹é¢')
            time.sleep(5)
            print('è–©é‚çˆ¾: ç­‰ä½ çš„å¯¦åŠ›å—åˆ°èªå¯å¾Œï¼Œå†ä¾†å’Œæˆ‘è«‡é€™ä»¶äº‹å§')
            input('æŒ‰ä¸‹Enterå›åˆ°ä¸Šä¸€é ')
        elif rule_list[action-1] == 'é€²å…¥å¤§å»³ä¸­å¤®çš„å¤§é–€':
            print('è–©é‚çˆ¾: æˆ‘äº†è§£äº†ï¼Œä½ çš„å¯¦åŠ›å·²è¢«èªå¯ï¼Œæ“æœ‰è¬è¦‹å…¬ä¸»å¤§äººçš„æ¬Šåˆ©')
            time.sleep(5)
            print('è–©é‚çˆ¾: å…¬ä¸»å¤§äººè³è­˜æœ‰æŠ€å·§çš„è³­å¾’ï¼Œå¥¹å°‡æœƒè¦ªè‡ªå’Œä½ å°å±€ä¾†ç¢ºèªä½ çš„å¯¦åŠ›')
            time.sleep(5)
            print('è–©é‚çˆ¾: ä¸éè«‹å°å¿ƒï¼Œå’Œå…¬ä¸»å¤§äººçš„å°å±€å°‡æ˜¯å°å½¼æ­¤éˆé­‚çš„å»æ®ºï¼Œä¸€æ—¦æ­»äº¡ï¼Œäººå·¥å¿ƒè‡Ÿä¹ŸèˆŠä¸äº†ä½ ')
            time.sleep(5)
            print('è–©é‚çˆ¾: ç„¡è«–å¦‚ä½•ï¼Œè¸å…¥é‚£æ‰‡é–€ä¾¿ç„¡æ³•å›é ­ï¼Œè«‹ä¸‰æ€')
            time.sleep(5)
            print('è–©é‚çˆ¾: ç•¶ä½ æº–å‚™å¥½æ™‚ï¼Œæˆ‘å€‘å°±åœ¨é–€å‰ç¢°é¢å§ï¼Œæˆ‘å°‡å¸¶ä½ é€²å…¥å…¬ä¸»å¤§äººçš„æˆ¿é–“')
            time.sleep(3)
            print('å¤§å»³è§£é–äº†æ–°çš„é¸é …: å‰å¾€æƒ¡é­”å…¬ä¸»çš„æˆ¿é–“')
            input('æŒ‰ä¸‹Enterå›åˆ°ä¸Šä¸€é ')

        self.show_rule()
        
            
         
class collection_manager(NPC):
    def __init__(self):
        NPC.__init__(self,'è‰è‰æ–¯')
        self.finish_normal_dialogue = False
        self.normal_item=[]
        self.special_item=[]
        self.queen_king_item=[]
        self.mark_item=[]
        self.snake_item=[]
        
        self.normal_item.append(all_item('æ”¾å¤§é¡','ä½ å¯ä»¥æŸ¥çœ‹ç¾åœ¨é€™ç™¼å­å½ˆæ˜¯å¯¦å½ˆæˆ–ç©ºåŒ…å½ˆ'))
        self.normal_item.append(all_item('é¦™è¸','ç·©è§£å£“åŠ›ï¼Œå›å¾©ä¸€é»è¡€é‡'))
        self.normal_item.append(all_item('æ‰‹é‹¸','é‹¸ä¸‹æ•£å½ˆæ§å‰ç«¯ï¼Œä¸‹ä¸€ç™¼å­å½ˆå‚·å®³åŠ å€'))
        self.normal_item.append(all_item('å•¤é…’','é€€å‡ºä¸¦æŸ¥çœ‹ç•¶å‰é€™ç™¼å­å½ˆ'))
        self.normal_item.append(all_item('æ‰‹éŠ¬','æŠŠèŠå®¶éŠ¬èµ·ä¾†ï¼Œä¸‹ä¸€å›åˆèŠå®¶ç„¡æ³•è¡Œå‹•'))
        self.normal_item.append(all_item('æ‰‹æ©Ÿ','é çŸ¥æœªä¾†æŸä¸€ç™¼å­å½ˆæ˜¯å¯¦å½ˆæˆ–ç©ºåŒ…å½ˆ'))
        self.normal_item.append(all_item('è½‰æ›å™¨','å°‡å¯¦å½ˆè½‰æ›æˆç©ºåŒ…å½ˆï¼Œç©ºåŒ…å½ˆè½‰æ›æˆå¯¦å½ˆ'))
        self.normal_item.append(all_item('éæœŸè—¥ç‰©','50%æ©Ÿç‡å›å¾©2é»è¡€é‡ï¼Œ50%æ©Ÿç‡æå¤±1é»è¡€é‡'))
        self.normal_item.append(all_item('è…ä¸Šè…ºç´ ','ç«Šå–èŠå®¶ä¸€å€‹é“å…·ï¼Œæ³¨æ„æŸäº›é“å…·æ˜¯ç„¡æ³•ç«Šå–çš„'))
        self.special_item.append(all_item('æœªçŸ¥è—åœ–','ä½ å¯ä»¥ç”¨ä¾†åˆæˆä¸€å€‹ç‰¹æ®Šé“å…·'))
        self.special_item.append(all_item('ç¦è—¥','70%æ©Ÿç‡è¡€é‡å¤§å¹…æå‡ï¼Œ30%æ©Ÿç‡ä¸­æ¯’\n     ç”±3å€‹éæœŸè—¥ç‰©åˆæˆ'))
        self.special_item.append(all_item('å¤§å£å¾‘å­å½ˆ','ç•¶å‰å­å½ˆæ›æˆå¤§å£å¾‘å­å½ˆä¸¦ç›´æ¥å°„å‡ºï¼Œé€ æˆ3é»å‚·å®³ï¼Œæ³¨æ„é€™æœƒçµæŸä½ çš„å›åˆ\n     ç”±2å€‹æ‰‹é‰…å’Œ1å€‹æ”¾å¤§é¡åˆæˆ'))  
        self.special_item.append(all_item('æ¦´å½ˆç ²','ä½¿ç”¨æ¦´å½ˆç ²æ”»æ“Šï¼Œè‹¥ç‚ºå¯¦å½ˆå‰‡é€ æˆè‡ªèº«ç•¶å‰è¡€é‡çš„å‚·å®³ï¼Œæ³¨æ„é€™æœƒçµæŸä½ çš„å›åˆä¸¦ä½¿ä½ å‰©ä¸‹1é»è¡€é‡\n     ç”±1å€‹å¤§å£å¾‘å­å½ˆã€1å€‹è…ä¸Šè…ºç´ å’Œ1å€‹è½‰æ›å™¨åˆæˆ'))
        self.special_item.append(all_item('å½ˆè—¥åŒ…','ç›´æ¥å°„å‡ºæ‰€æœ‰å­å½ˆä¸¦é‡æ–°è£å¡«å…«é¡†å­å½ˆ\n     ç”±2å€‹å•¤é…’å’Œ1å€‹é¦™è¸åˆæˆ'))
        self.special_item.append(all_item('æ“´å¢èƒŒåŒ…','èƒŒåŒ…ç©ºé–“+2\n     ç”±æ»¿èƒŒåŒ…ä»»æ„çš„ç‰©å“åˆæˆ'))
        self.queen_king_item.append(all_item('ç‰ç’ƒçš‡å','ç²å¾—ç‰ç’ƒçš„ç¥ç¦ï¼Œé€€å‡ºæ‰€æœ‰å­å½ˆä¸¦é‡æ–°è£å¡«ä¸€ç™¼å¯¦å½ˆ\næ¥ä¸‹ä¾†æ¯æ¬¡æ›å½ˆéƒ½æœƒå›å¾©1é»è¡€é‡ï¼Œä¸¦ä¸”æ ¹æ“šç¬¬ä¸€ç™¼å­å½ˆç²å¾—ä¸åŒå¢ç›Šæ•ˆæœ'))
        self.queen_king_item.append(all_item('æ¼†é»‘çš‡å','å°‡å­å½ˆé‡æ–°è£å¡«ç‚º1ç™¼5é»å‚·å®³çš„å¯¦å½ˆå’Œ1ç™¼ç©ºåŒ…å½ˆï¼ŒåŒæ™‚æ¸…ç©ºé›™æ–¹ç‰©å“æ¬„'))
        self.queen_king_item.append(all_item('ç¥è–çš‡å','å›å¾©2é»è¡€é‡ï¼Œç²å¾—3å€‹éš¨æ©Ÿç‰©å“ï¼Œå¢åŠ 2æ ¼èƒŒåŒ…ç©ºé–“'))
        self.queen_king_item.append(all_item('è”šè—çš‡å','æ¯æ¬¡è¼ªåˆ°èŠå®¶çš„å›åˆæ™‚ï¼Œç²å¾—1å€‹éš¨æ©Ÿç‰©å“'))
        self.queen_king_item.append(all_item('è…¥ç´…çš‡å','æ¯å›åˆç²å¾—æ‰‹é‰…æ•ˆæœä¸¦å…ç–«èŠå®¶çš„æ‰‹é‰…é›™å€å‚·å®³æ•ˆæœï¼Œæœ€å¤šè§¸ç™¼5æ¬¡'))
        self.queen_king_item.append(all_item('æœ¦æœ§åœ‹ç‹','å…ç–«æ¯å±€ç¬¬ä¸€æ¬¡å‚·å®³'))
        self.queen_king_item.append(all_item('ç‹‚æš´åœ‹ç‹','æ¥ä¸‹ä¾†5æ¬¡å‚·å®³ç¿»å€'))
        self.queen_king_item.append(all_item('ç‹¡è©åœ‹ç‹','é çŸ¥å‰ä¸‰ç™¼å­å½ˆ'))
        self.queen_king_item.append(all_item('è²ªå©ªåœ‹ç‹','å·èµ°ç©å®¶æ‰€æœ‰éçš‡åç‰©å“'))
        self.mark_item.append(all_item('å—œè¡€å°è¨˜','é–‹æ§é€ æˆ1é»å‚·å®³æ™‚ï¼Œé¡å¤–å¸æ”¶èŠå®¶çš„1é»è¡€é‡'))
        self.mark_item.append(all_item('æ‰­æ›²å°è¨˜','æ¯å±€å¯ä½¿ç”¨ä¸€æ¬¡ï¼Œä½¿ç”¨å¾Œæ”¹è®Šé“å…·çš„æœ¬è³ª(è©³è¦‹ä¸‹ä¸€é )ï¼Œç›´åˆ°æœ¬å±€çµæŸ'))
        self.mark_item.append(all_item('å¢®å¤©ä½¿å°è¨˜','å‰©ä¸‹1é»è¡€é‡æ™‚ï¼Œç«‹å³æ¢å¾©3é»è¡€é‡ï¼Œç²å‹å¾Œé‡ç½®ä½¿ç”¨æ¬¡æ•¸'))
        self.mark_item.append(all_item('â˜…æ…¾ä¹‹è¡€å°è¨˜â˜…','é–‹æ§é€ æˆ1é»å‚·å®³æ™‚ï¼Œé¡å¤–å¸æ”¶èŠå®¶çš„1é»è¡€é‡ã€‚æœç”¨éæœŸè—¥ç‰©å’Œç¦è—¥æ™‚ä¸å†æå¤±è¡€é‡'))
        self.mark_item.append(all_item('æ‰­æ›²å°è¨˜','æ¯å±€å¯ä½¿ç”¨ä¸€æ¬¡ï¼Œä½¿ç”¨å¾Œæ”¹è®Šé“å…·çš„æœ¬è³ªï¼Œç›´åˆ°æœ¬å±€çµæŸ'))
        self.mark_item.append(all_item('â˜…æ­»ä¹‹å¤©ä½¿å°è¨˜','å‰©ä¸‹1é»è¡€é‡æ™‚ï¼Œç«‹å³æ¢å¾©3é»è¡€é‡ï¼Œç²å‹å¾Œé‡ç½®ä½¿ç”¨æ¬¡æ•¸ã€‚æ‰‹æ©Ÿå°‡é çŸ¥å…¨éƒ¨å­å½ˆ'))
        self.snake_item.append(all_item('*æ”¾å¤§é¡','ç²å¾—1æ ¼èƒŒåŒ…ç©ºé–“ï¼Œé¡å¤–è£å¡«3ç™¼å­å½ˆ'))
        self.snake_item.append(all_item('*é¦™è¸','ä½¿ç•¶å‰ç©ºåŒ…å½ˆè®Šç‚ºå¯¦å½ˆï¼Œè‹¥ç‚ºå¯¦å½ˆé€€å½ˆ'))
        self.snake_item.append(all_item('*æ‰‹é‹¸','ç”¨æ‰‹é‰…æ”»æ“ŠèŠå®¶ï¼Œé€ æˆ1é»å‚·å®³ï¼Œç„¡è¦–æœ¦æœ§åœ‹ç‹æ•ˆæœ'))
        self.snake_item.append(all_item('*å•¤é…’','å›å¾©1é»è¡€é‡'))
        self.snake_item.append(all_item('*æ‰‹éŠ¬','æ”¹é€ æ•£å½ˆæ§ï¼Œæœ¬å±€é›™æ–¹éƒ½ç„¡æ³•å†å°„å‘è‡ªå·±'))
        self.snake_item.append(all_item('*æ‰‹æ©Ÿ','æ”¹è®Šæ‰€æœ‰å‰©é¤˜å­å½ˆçš„é †åºï¼Œé çŸ¥å‰å…©ç™¼å­å½ˆ'))
        self.snake_item.append(all_item('*è½‰æ›å™¨','å°‡æ‰€æœ‰å¯¦å½ˆè½‰æ›æˆç©ºåŒ…å½ˆï¼Œæ‰€æœ‰ç©ºåŒ…å½ˆè½‰æ›æˆå¯¦å½ˆ'))
        self.snake_item.append(all_item('*éæœŸè—¥ç‰©','çœ‹ç ´æœ¬å±€èŠå®¶çš„æœ¦æœ§åœ‹ç‹æ•ˆæœ'))
        self.snake_item.append(all_item('*è…ä¸Šè…ºç´ ','ä¸‹ä¸€æ¬¡æ”»æ“Šå‚·å®³2å€'))
        self.snake_item.append(all_item('*æœªçŸ¥è—åœ–','ç²å¾—3å€‹éš¨æ©Ÿé“å…·'))
        self.snake_item.append(all_item('*ç¦è—¥','å¸åˆ°highèµ·ä¾†ï¼Œé¡å¤–ç²å¾—ä¸€å›åˆ'))
        self.snake_item.append(all_item('*å¤§å£å¾‘å­å½ˆ','ç•¶æ‰€æœ‰ç©ºåŒ…å½ˆæ›æˆå¯¦å½ˆ'))  
        self.snake_item.append(all_item('*æ¦´å½ˆç ²','æŠŠæ‰€æœ‰å­å½ˆç•¶æˆå¯¦å½ˆå°„å‡º'))
        self.snake_item.append(all_item('*å½ˆè—¥åŒ…','é€€åˆ°å‰©ä¸€ç™¼å­å½ˆï¼Œæ¯é€€1ç™¼å¯¦å½ˆå›å¾©1é»è¡€é‡ï¼Œæ¯é€€1ç™¼ç©ºåŒ…å½ˆé€ æˆ1é»å‚·å®³'))
    
        self.item_list = []
        self.item_list.append(self.normal_item)
        self.item_list.append(self.special_item)
        self.item_list.append(self.queen_king_item)
        self.item_list.append(self.mark_item)
        self.item_list.append(self.snake_item)

        self.achievement_list = []
        self.achievement_list.append(achievement('ç‚¸é­š','æ´»è‘—é€šéæ–°æ‰‹æ•™å­¸','åœ¨æ•™å­¸éšæ®µè¡¨ç¾è‰¯å¥½'))
        self.achievement_list.append(achievement('ä¹Ÿè¨±ä½ ä¸é©åˆé€™è£¡','åœ¨æ–°æ‰‹æ•™å­¸æ­»äº†å…©æ¬¡','ä½ å·²ç¶“æ­»å…©æ¬¡äº†'))
        self.achievement_list.append(achievement('æƒ¡é­”çš„å–œå¥½?','å¾è‰è‰æ–¯å£ä¸­å¾—çŸ¥æƒ¡é­”çœ·å±¬ä¸€äº‹','ä¸å°å¿ƒèªªæºœå˜´äº†!'))
        self.achievement_list.append(achievement('å±…å¿ƒåµæ¸¬','çœ‹éè‰è‰çµ²çš„å…¨éƒ¨å°è©±','tipsæ°¸é ä¸å«Œå¤šï¼Œå…«å¦ä¹Ÿæ˜¯'))
        self.achievement_list.append(achievement('ç ´è§£','è§£é–æ‰€æœ‰é“å…·','æ”¶é›†é“å…·é‚„å¾—é é‹æ°£'))
        self.achievement_list.append(achievement('èª˜æƒ‘çš„å»','é€šé—œè‰è‰æ–¯çš„è©¦ç…‰','ä½ çš„ç”Ÿå‘½åŠ›å¤ é ‘å¼·å—'))
        self.achievement_list.append(achievement('æ‰­æ›²çš„è›‡','é€šé—œåˆ©ç¶­å¦çš„è©¦ç…‰','é€™æ±è¥¿ä¸æ˜¯é€™æ¨£ç”¨çš„å§å–‚!'))
        self.achievement_list.append(achievement('å¢®è½çš„ç¾½ç¿¼','é€šé—œè–©é‚çˆ¾çš„è©¦ç…‰','0%æˆ°è¡“ï¼Œ100%é‹æ°£'))
        self.achievement_list.append(achievement('åœ°ç„ä¹‹é–€','è§£é–æƒ¡é­”è©¦ç…‰','ä½ å·²ç¶“æº–å‚™å¥½äº†'))
        self.achievement_list.append(achievement('ç¬¬ä¸€æ¡¶é‡‘','æŒæœ‰10000000å…ƒ','ä¾†å§ï¼Œé–‹å§‹éŠæˆ²å§'))
        self.achievement_list.append(achievement('è²¡å¯Œè‡ªç”±','æŒæœ‰500000000å…ƒ','æˆ–è¨±é‚„å‚µæœ‰æœ›äº†?'))
        self.achievement_list.append(achievement('å¯Œå¯æ•µåœ‹','æŒæœ‰999999999999å…ƒ','å…„å¼Ÿï¼Œä½ æ˜¯ä¸æ˜¯è©²è²·å€‹å³¶äº†?'))
        self.achievement_list.append(achievement('è¦‹å¥½å°±æ”¶','è´äº†ä¸€å ´å¾Œé¦¬ä¸Šæ”¾æ£„','Nope'))
        self.achievement_list.append(achievement('æ¢å¾©å‘¼å¸','ç¬¬ä¸€æ¬¡ç”¨äººå·¥å¿ƒè‡Ÿå¾©æ´»','è²ªå©ªçš„ä»£åƒ¹'))
        self.achievement_list.append(achievement('é¢¨éšªå¤§å¸«','é«˜é¢¨éšªæ¨¡å¼ä¸‹é€£çºŒè´äº†10å ´','é¢¨éšªç®¡ç†'))
        self.achievement_list.append(achievement('äº’ç›¸å‚·å®³å‘€','æ®ºæ‰‹åœ‹ç‹æ¨¡å¼ä¸‹é€£çºŒè´äº†10å ´','åœ‹ç‹èˆ‡çš‡åçš„å°æ±º'))
        self.achievement_list.append(achievement('çœŸå¯¦åŠ›','å¹½é–‰çš‡åæ¨¡å¼ä¸‹é€£çºŒè´äº†10å ´','é è‡ªå·±ä¹Ÿèƒ½è´'))
        self.achievement_list.append(achievement('ä½ æ‰æ˜¯æŒ‘æˆ°è€…','èŠå®¶å…ˆæ‰‹æ¨¡å¼ä¸‹é€£çºŒè´äº†10å ´','æƒ³å¤ªå¤šï¼Œé †åºæ ¹æœ¬ä¸é‡è¦'))
        self.achievement_list.append(achievement('è³­ç¥','ä¸‹æ³¨å…¨éƒ¨æ¨¡å¼ä¸‹é€£çºŒè´äº†10å ´','ä½ çš„é‹æ°£æ˜¯æ€éº¼å›äº‹?'))
        self.achievement_list.append(achievement('å“ˆå“ˆå±çœ¼','èŠå®¶å…ˆæ‰‹æ¨¡å¼ä¸‹ç¬¬ä¸€å›åˆå°±æ­»äº†','é€™æˆ‘ä¹Ÿæ²’è¾¦æ³•'))
        self.achievement_list.append(achievement('ä½ æ˜¯ç¬¨è›‹å—','ä½¿ç”¨æ‰‹é‰…å°è‡ªå·±é€ æˆ2é»å‚·å®³ä¸¦è¢«å˜²ç¬‘','ä½ æ˜¯ç¬¨è›‹å—?'))
        self.achievement_list.append(achievement('æ¼†é»‘å­å½ˆ','è¡€é‡ä½æ–¼5çš„ç‹€æ…‹ä¸‹ä½¿ç”¨æ¼†é»‘çš‡åè´ä¸‹ä¸€å±€','50%'))
        self.achievement_list.append(achievement('é“å…·æ°¸å‹•æ©Ÿ','ç²å¾—5å±¤ä»¥ä¸Šçš„è”šè—çš‡åæ•ˆæœ','å¤ª...å¤ªå¤šäº†'))
        self.achievement_list.append(achievement('é“ç†æˆ‘éƒ½æ‡‚ï¼Œä½†æ˜¯é€™å€‹èƒŒåŒ…æ€éº¼é€™éº¼å¤§','èƒŒåŒ…ä¸Šé™çªç ´20','æ›´å¤§çš„èƒŒåŒ…'))
        self.achievement_list.append(achievement('å·¨ç ²','ç”¨æ¦´å½ˆç ²é€ æˆ30ä»¥ä¸Šçš„å‚·å®³','é€™æ­¦å™¨æ”»æ“ŠåŠ›ç„¡ä¸Šé™å°å§?'))
        self.achievement_list.append(achievement('å¸æ¯’æœ‰ç¤™èº«å¿ƒå¥åº·ï¼Œè«‹å‹¿è¼•æ˜“å˜—è©¦','åƒç¦è—¥æ­»äº¡','ä¾†è·¯ä¸æ˜çš„è—¥ç‰©åˆ¥äº‚å—‘'))
        self.achievement_list.append(achievement('ç‰ç’ƒçš„ç¥ç¦','ç²å¾—ç‰ç’ƒçš„ç¥ç¦','é€™é“å…·ä¹Ÿå¤ªå¼·äº†å§'))
        self.achievement_list.append(achievement('å°±èªªäº†ä¸è¡Œ','å˜—è©¦å·èµ°è…ä¸Šè…ºç´ ','æœ‰äº›æ±è¥¿æ˜¯å·ä¸èµ°çš„'))
        self.achievement_list.append(achievement('æ»¿è¡€','ç²å¾—æ‰€æœ‰é¡å¤–è¡€é‡','ä¿éšªèµ·è¦‹å•¦'))
        self.achievement_list.append(achievement('ç˜‹ç‹‚çš„å‚»å­','æˆç‚ºåˆ©ç¶­å¦çš„çœ·å±¬','åœ¨åˆ©ç¶­å¦é¢å‰è€å¸¥ä¸€æ³¢'))
        self.achievement_list.append(achievement('æ…¾æœ›çš„å¥´éš¸','æˆç‚ºè‰è‰æ–¯çš„çœ·å±¬','å‘è‰è‰æ–¯å±•ç¾ä½ çš„ç”Ÿå‘½åŠ›'))
        self.achievement_list.append(achievement('ç„¡è¬‚çš„å …æŒ','æˆç‚ºè–©é‚çˆ¾çš„çœ·å±¬','å›æ‡‰è–©é‚çˆ¾çš„æœŸå¾…'))

        self.normal_dialogue = []
        #è‰è‰æ–¯çš„å°è©±å«æœ‰é‡è¦è¨Šæ¯ï¼Œæ‰€ä»¥é›–ç„¶æ˜¯éš¨æ©Ÿä½†æ˜¯æœƒå¾ªç’°
        self.dialogue_number = [i for i in range(0,17)]
        
        self.normal_dialogue.extend([f'è‰è‰æ–¯: {main_player.name}ä½ ä¾†å•¦ï¼Œéš¨ä¾¿åï¼Œæˆ‘å»ç‚ºä½ æ³¡æ¯èŒ¶'\
                                    ,'è‰è‰æ–¯: åˆ©ç¶­å¦åˆè¨­è¨ˆäº†å¥‡æ€ªçš„é“å…·...ä¸è¦å¢åŠ æˆ‘çš„å·¥ä½œé‡å•Š!'\
                                    ,'è‰è‰æ–¯: è½‰æ›å™¨æœ‰å€‹å¾ˆæ–¹ä¾¿çš„å‰¯ä½œç”¨ï¼Œä¸‹æ¬¡å¯ä»¥è©¦è‘—ä»”ç´°è§€å¯Ÿä½¿ç”¨å‰å¾Œå‰©é¤˜å­å½ˆæ•¸é‡'\
                                    ,'è‰è‰æ–¯: åœ‹ç‹é“å…·ç„¡æ³•è¢«ç«Šå–ï¼Œä½†æ˜¯çš‡åå¯ä»¥ï¼Œæ‰€ä»¥è¦å°å¿ƒ!'\
                                    ,'è‰è‰æ–¯: è—åœ–çš„é“å…·åˆæˆæœ‰å„ªå…ˆé †åºï¼Œå’Œåœ–é‘‘çš„æ’åºæ˜¯ä¸€æ¨£çš„'\
                                    ,'è‰è‰æ–¯: æ‰‹é‰…çš„å‚·å®³åŠ æˆå°æ‰€æœ‰ç«å…µå™¨éƒ½æœ‰æ•ˆï¼ŒåŒ…æ‹¬å¤§å£å¾‘å­å½ˆã€æ¦´å½ˆç ²ã€å½ˆè—¥åŒ…å’Œæ¼†é»‘çš‡å'\
                                    ,'è‰è‰æ–¯: è¡€é‡æ¢å¾©æ˜¯æ²’æœ‰ä¸Šé™çš„ï¼Œæˆ‘æœ€å–œæ­¡ç”Ÿå‘½åŠ›æ—ºç››çš„éˆé­‚äº†ï¼Œå¦‚æœæœ‰44é»ä»¥ä¸Šçš„è©±...å•Š!æ²’äº‹!æˆ‘ä»€éº¼éƒ½æ²’èªª!'\
                                    ,'è‰è‰æ–¯: æ‰‹éŠ¬ä¸èƒ½åœ¨ä¸€å›åˆé€£çºŒä½¿ç”¨å…©æ¬¡ï¼Œä½†å¯ä»¥é€£çºŒå…©å›åˆå„è‡ªä½¿ç”¨ä¸€æ¬¡'\
                                    ,'è‰è‰æ–¯: æ‰‹é‰…ç„¡æ³•å’Œä»»ä½•å‚·å®³åŠ å€çš„æ•ˆæœç–ŠåŠ ï¼Œæœ€å¤šå°±æ˜¯å…©å€!'\
                                    ,'è‰è‰æ–¯: çš‡åé“å…·æ˜¯å·²æ•…è³­å¾’çš„éˆé­‚æ®˜æ¸£ï¼Œæ“æœ‰æå‡çé‡‘å€ç‡çš„èƒ½åŠ›ï¼Œå¾ˆå¥‡æ€ªå§?'\
                                    ,'è‰è‰æ–¯: æ¦´å½ˆç ²æ®ºä¸æ­»è¡€é‡æ¯”è‡ªå·±é«˜çš„ç›®æ¨™ï¼Œæƒ³æ‰­è½‰å±€å‹¢å¯èƒ½å¾—æ­é…å…¶ä»–é“å…·'\
                                    ,'è‰è‰æ–¯: ç¦è—¥çš„å›è¡€å…¬å¼æ˜¯ç¿»å€å†+3ã€‚ä½ å•æˆ‘æ€éº¼çŸ¥é“çš„? ç•¶ç„¶æ˜¯è¦ªè‡ªå¯¦æ¸¬å‘€'\
                                    ,'è‰è‰æ–¯: åœ‹ç‹é“å…·çš„æ•ˆæœéå¸¸èª‡å¼µï¼Œå»ºè­°éš¨æ™‚æ³¨æ„èŠå®¶çš„ç‰©å“æ¬„'\
                                    ,'è‰è‰æ–¯: åˆ©ç¶­å¦æ˜¯å€‹ä¸æŒ‰ç‰Œç†å‡ºç‰Œçš„å‚¢ä¼™ï¼Œå¤§å®¶éƒ½èªªåªæœ‰å¥¹æ‰çŸ¥é“é“å…·çš„çœŸæ­£ä½¿ç”¨æ–¹å¼'\
                                    ,'è‰è‰æ–¯: å¥½æƒ³è¦æœ‰æ›´å¤šçœ·å±¬å•Š......åˆ¥é€™æ¨£çœ‹è‘—æˆ‘ï¼Œè¦æƒ³æˆç‚ºçœ·å±¬çš„è©±ï¼Œä½ å¾—å…ˆå­¸æœƒçœ‹ç©¿æƒ¡é­”çš„å–œå¥½æ‰è¡Œ'\
                                    ,'è‰è‰æ–¯: èªªå¯¦è©±ï¼Œæ•´å¤©æ”¶å‰²äººé¡éˆé­‚çš„ç”Ÿæ´»ä¹Ÿæ˜¯å¾ˆç„¡èŠçš„ï¼Œæ‰€ä»¥å…¬ä¸»å¤§äººæ‰æœƒçªç™¼å¥‡æƒ³äº†é€™é–“è³­å ´'\
                                    ,'è‰è‰æ–¯: ä½ æ‡‰è©²æœ‰ç™¼è¦ºï¼Œè–©é‚çˆ¾å…¶å¯¦å’Œåˆ©ç¶­å¦ä¸å¤ªåˆï¼Œä½†ç¤™æ–¼å¯¦åŠ›å·®è·ï¼Œå³ä½¿ä»–æ˜¯é€™è£¡çš„è€å¤§ä¹Ÿåªèƒ½å˜´ä¸ŠæŠ±æ€¨è€Œå·²'])
        self.special_dialogue = []
        self.special_dialogue.extend(['è‰è‰æ–¯: ä½ æƒ³è¦çš„è©±ï¼Œéš¨æ™‚å¯ä»¥å–”ğŸ¤    ç•¢ç«Ÿä½ æ˜¯æˆ‘çš„çœ·å±¬å˜›'])

    def unlock_normal_item(self):
        for item in self.normal_item:
            item.unlock_item(show_text=False)
    def unlock_special_item(self):
        for item in self.special_item:
            item.unlock_item(show_text=False)
    def unlock_queen_king_item(self,target):
        for item in self.queen_king_item:
            if item.name_hide == target:
                item.unlock_item(True)
        unlock_all = True
        for cat in self.item_list:
            for item in cat:
                if item.description == '???':
                    unlock_all = False 
        if unlock_all:
            self.unlock_achievement('ç ´è§£') 
    def unlock_mark_item(self,target):
        for item in self.mark_item:
            if item.name_hide == target:
                item.unlock_item(True)
        unlock_all = True
        for cat in self.item_list:
            for item in cat:
                if item.description == '???':
                    unlock_all = False 
        if unlock_all:
            self.unlock_achievement('ç ´è§£') 
    def unlock_snake_item(self):
        for item in self.snake_item:
            item.unlock_item(True)
    def show_normal_item(self):
        print('æ™®é€šé“å…·:')
        #é¡¯ç¤ºç‰©å“åç¨±å’Œæ•˜è¿°
        for i in range(len(self.normal_item)):
            print(i+1,self.normal_item[i].name)
            print('    ',self.normal_item[i].description)
        input('æŒ‰ä¸‹Enterå›åˆ°ä¸Šä¸€é ')
    def show_special_item(self):
        print('ç‰¹æ®Šé“å…·:')
        #é¡¯ç¤ºç‰©å“åç¨±å’Œæ•˜è¿°
        for i in range(len(self.special_item)):
            print(i+1,self.special_item[i].name)
            print('    ',self.special_item[i].description)
        input('æŒ‰ä¸‹Enterå›åˆ°ä¸Šä¸€é ')
    def show_queen_king_item(self):
        print('çš‡å&åœ‹ç‹é“å…·:')
        #é¡¯ç¤ºç‰©å“åç¨±å’Œæ•˜è¿°
        for i in range(len(self.queen_king_item)):
            print(i+1,self.queen_king_item[i].name)
            print('    ',self.queen_king_item[i].description)
        input('æŒ‰ä¸‹Enterå›åˆ°ä¸Šä¸€é ')
    def show_mark_item(self):
        print('æƒ¡é­”å°è¨˜:')
        #é¡¯ç¤ºç‰©å“åç¨±å’Œæ•˜è¿°
        if 'â˜…æ…¾ä¹‹è¡€å°è¨˜â˜…' not in main_player.unlockable_item:
            print(1,self.mark_item[0].name)
            print('    ',self.mark_item[0].description)
        elif 'â˜…æ…¾ä¹‹è¡€å°è¨˜â˜…' in main_player.unlockable_item:
            print(1,self.mark_item[3].name)
            print('    ',self.mark_item[3].description)

        print(2,self.mark_item[1].name)
        print('    ',self.mark_item[1].description)

        if 'â˜…æ­»ä¹‹å¤©ä½¿å°è¨˜â˜…' not in main_player.unlockable_item:
            print(3,self.mark_item[2].name)
            print('    ',self.mark_item[2].description)
        elif 'â˜…æ­»ä¹‹å¤©ä½¿å°è¨˜â˜…' in main_player.unlockable_item:
            print(3,self.mark_item[5].name)
            print('    ',self.mark_item[5].description)

        input('æŒ‰ä¸‹Enterå›åˆ°ä¸Šä¸€é ')
    def show_snake_item(self):
        print('æ‰­æ›²å°è¨˜å•Ÿç”¨æ™‚çš„é“å…·:')
        #é¡¯ç¤ºç‰©å“åç¨±å’Œæ•˜è¿°
        for i in range(len(self.snake_item)):
            print(i+1,self.snake_item[i].name)
            print('    ',self.snake_item[i].description)
        input('æŒ‰ä¸‹Enterå›åˆ°ä¸Šä¸€é ')
    def show_achievement_1(self):
        print('æˆå°±åˆ—è¡¨:')
        for i in range(len(self.achievement_list)//2):
            print(i+1,self.achievement_list[i].name)
            print('     æç¤º: ' if not self.achievement_list[i].unlock else '    ',self.achievement_list[i].description)
        input('æŒ‰ä¸‹EnteræŸ¥çœ‹ä¸‹ä¸€é ')

    def show_achievement_2(self):
        for i in range(len(self.achievement_list)//2,len(self.achievement_list)):
            print(i+1,self.achievement_list[i].name)
            print('     æç¤º: ' if not self.achievement_list[i].unlock else '    ',self.achievement_list[i].description)
        input('æŒ‰ä¸‹Enterå›åˆ°åˆ—è¡¨')

    def unlock_achievement(self,target):
        for achievement in self.achievement_list:
            if achievement.name_hide == target:
                achievement.unlock_item()

    def show_list(self):
        print ('=================================================================')
        print('åœ–é‘‘:')
        print('1.æ™®é€šé“å…·')
        print('2.ç‰¹æ®Šé“å…·')
        print('3.çš‡å&åœ‹ç‹é“å…·')
        print('4.æƒ¡é­”å°è¨˜')
        if 'æ‰­æ›²å°è¨˜' in main_player.unlockable_item:
            print('5.æ‰­æ›²å°è¨˜å•Ÿç”¨æ™‚çš„é“å…·')
            print('6.æˆå°±åˆ—è¡¨')
        else:
            print('5.æˆå°±åˆ—è¡¨')
        print('æŒ‰ä¸‹Enteré›¢é–‹')
        while True:
            try:
                choice = input('è«‹é¸æ“‡:')
            except ValueError:
                print('è«‹é‡æ–°è¼¸å…¥')
                continue
            break
        if choice == '1':
            self.show_normal_item()
            self.show_list()
        elif choice == '2':
            self.show_special_item()
            self.show_list()
        elif choice == '3':
            self.show_queen_king_item()
            self.show_list()
        elif choice == '4':
            self.show_mark_item()
            self.show_list()
        elif choice == '5' and 'æ‰­æ›²å°è¨˜' in main_player.unlockable_item:
            self.show_snake_item()
            self.show_list()
        elif choice == '5' and 'æ‰­æ›²å°è¨˜' not in main_player.unlockable_item:
            self.show_achievement_1()
            self.show_achievement_2()
            self.show_list()
        elif choice == '6':
            self.show_achievement_1()
            self.show_achievement_2()
            self.show_list()
        else:
            return
           
    
    def say_normal_dialogue(self):
        time.sleep(1)
        if len(self.dialogue_number) == 0:
            self.dialogue_number = [i for i in range(0,17)]
        if self.devil_dependency:
            if random.randint(0,4) == 4 :
                one_time_text = self.special_dialogue.pop(0)
                print(one_time_text)
        elif 0 in self.dialogue_number:
            number = self.dialogue_number.pop(0)
            print(self.normal_dialogue[number])
        else:
            number = self.dialogue_number.pop(random.randint(0,len(self.dialogue_number)-1))
            print(self.normal_dialogue[number])
        
        if number == 14:
            self.unlock_achievement('æƒ¡é­”çš„å–œå¥½?')
        if self.dialogue_number == []:
            self.finish_normal_dialogue = True
        
        if self.finish_normal_dialogue and self.special_dialogue == []:
            self.unlock_achievement('å±…å¿ƒåµæ¸¬')
        time.sleep(2)
    
    def before_challenge(self):
        print('è‰è‰æ–¯: ä½ è¦æŒ‘æˆ°æˆ‘å—? ä¹Ÿä¸æ˜¯ä¸è¡Œï¼Œå°±ä¾†ç©ç©å§')
        time.sleep(2)
        print('è‰è‰æ–¯: ä¹…é•çš„éˆé­‚ç‹©çµï¼Œå°±è®“æˆ‘åšåšä½ éˆé­‚çš„æ»‹å‘³å§')
        time.sleep(2)
        print('è‰è‰æ–¯: å¦‚æœä½ èƒ½è´éæˆ‘ï¼Œæˆ‘å°±å‚³æˆä½ å¸æ”¶ä»–äººéˆé­‚çš„æŠ€å·§!')
        time.sleep(2)
        if lobby_NPC[0].achievement_list[2].unlock:    
            print('è‰è‰æ–¯: ......')
            time.sleep(2)
            print('è‰è‰æ–¯: ...å¦‚æœä½ èƒ½è®“æˆ‘æ»¿æ„çš„è©±ï¼Œæƒ³æˆç‚ºçœ·å±¬ä»€éº¼çš„ä¹Ÿä¸æ˜¯ä¸è¡Œå•¦......')
            time.sleep(2)
            print('è‰è‰æ–¯: ç¸½ä¹‹ï¼Œä½ æº–å‚™å¥½ä¹‹å¾Œå°±é–‹å§‹å§')
        else:
            print('è‰è‰æ–¯: é‚£éº¼ï¼Œä½ æº–å‚™å¥½äº†å—?')
        time.sleep(2)
        input('æŒ‰ä¸‹Enteré–‹å§‹æŒ‘æˆ°')

    def challenge_mode_dialogue(self,win_count,computer):
        #æ¯å ´çµæŸæ™‚èªªçš„è©±
        if win_count == 5:
            print('è‰è‰æ–¯: çœ‹ä¾†æ˜¯æˆ‘è¼¸äº†å‘¢......')
        else:
            time.sleep(2)
            if win_count == 1:
                print('è‰è‰æ–¯: å¥½ä¹…æ²’å˜—åˆ°éˆé­‚çš„æ»‹å‘³äº†ï¼Œä½ å¯è¦æ´»ä¹…ä¸€é»å–”?')
            elif win_count == 3:
                print('è‰è‰æ–¯: ä¸å±ˆä¸æ’“çš„éˆé­‚ï¼Œæˆ‘å¾ˆå–œæ­¡')
            elif win_count == 4:
                computer.item.append('ç¦è—¥')
                computer.item.append('ç¦è—¥')

    def challenge_mode_reward(self,player_lobby):
        if 'æ‰­æ›²å°è¨˜' not in player_lobby.unlockable_item:
            player_lobby.unlockable_item.append('å—œè¡€å°è¨˜')
            time.sleep(3)
            print('è‰è‰æ–¯èµ·èº«å‘å‰ï¼Œçµ¦äº†ä½ ä¸€å€‹æ·±æ·±çš„å»')
            time.sleep(3)
            print('é…¥éº»æ„Ÿæµéå…¨èº«ï¼Œä½ çš„éˆé­‚æ·±è™•æ„Ÿåˆ°ä¸€è‚¡å¼·çƒˆçš„...å°é®®è¡€çš„æ¸´æœ›')
            time.sleep(3)
            print('è‰è‰æ–¯: ä½ çš„éˆé­‚éå¸¸ç”œç¾ï¼Œå¤šè¬æ¬¾å¾…')
            time.sleep(3)
            print('ä½ ç²å¾—äº†å—œè¡€å°è¨˜')
            time.sleep(3)
            player_lobby.extra_hp += 2
            print('ä½ çš„é¡å¤–ç”Ÿå‘½å¢åŠ äº†2é»')
            time.sleep(3)
            lobby_NPC[0].unlock_achievement('èª˜æƒ‘çš„å»')
    
    def devil_transform(self):
        print('è‰è‰æ–¯: ......å¶')
        time.sleep(2)
        print('è‰è‰æ–¯å«ä½äº†ä½ ï¼Œä¸€éš»æ‰‹è¼•è¼•åœ°æ‹‰è‘—ä½ çš„è¡£è§’ï¼Œé¢è‰²æ½®ç´…')
        time.sleep(4)
        print('è‰è‰æ–¯: ä½ æ‡‰è©²çŸ¥é“äº†å§? æˆ‘å–œæ­¡çš„é¡å‹......')
        time.sleep(4)
        print('è‰è‰æ–¯: ...ä½ æƒ³æˆç‚ºæˆ‘çš„çœ·å±¬å—?')
        time.sleep(4)
        print('è‰è‰æ–¯: æˆ‘å¯ä»¥æ•™ä½ æ›´å¤š...æŠ€å·§ï¼Œå¦‚æœä½ æ‡‚æˆ‘çš„æ„æ€çš„è©±')
        time.sleep(4)
        print('èªç•¢ï¼Œè‰è‰æ–¯çš„æ‰‹æŒ‡è¼•è¼•åœ°æ»‘éä½ çš„è‡‰é °')
        time.sleep(4)
        print('è‰è‰æ–¯: é‚£éº¼ï¼Œä½ çš„å›ç­”æ˜¯?')
        time.sleep(3)
        action = input('1.æ¥å— 2.æ‹’çµ• :')
        if action == '1':
            print('è‰è‰æ–¯: ......è‰²é¬¼')
            time.sleep(2)
            print('......')
            time.sleep(2)
            print('......')
            time.sleep(2)
            print('......ä¸€æ®µæ™‚é–“å¾Œ')
            time.sleep(2)
            print('è‰è‰æ–¯: å‘¼...ä¸æ„§æ˜¯å¹´è¼•äººï¼ŒçœŸæ˜¯æœ‰æ´»åŠ›')
            time.sleep(4)
            print('ç¶“æ­·æ¼«é•·çš„å„€å¼ä¹‹å¾Œï¼Œä½ æˆç‚ºäº†è‰è‰æ–¯çš„çœ·å±¬')
            time.sleep(3)
            if main_player.devil == '':
                main_player.devil = 'è‰è‰æ–¯'
            else:
                time.sleep(2)
                print('ä½ å°‡ä¸å†æ˜¯',main_player.devil,'çš„çœ·å±¬')
                main_player.devil = 'è‰è‰æ–¯'
                time.sleep(2)
            print('å—œè¡€å°è¨˜æ˜‡è¯æˆç‚ºäº†â˜…æ…¾ä¹‹è¡€å°è¨˜â˜…')
            main_player.unlockable_item.append('â˜…æ…¾ä¹‹è¡€å°è¨˜â˜…')
            main_player.unlockable_item.remove('å—œè¡€å°è¨˜')
            time.sleep(3)
            print('è‰è‰æ–¯: ä½ çš„éˆé­‚å°‡æ°¸é å±¬æ–¼æˆ‘ï¼Œä¸è¦å¿˜è¨˜æˆ‘å€‘çš„ç´„å®šå–”')
            time.sleep(3)
            lobby_NPC[0].unlock_achievement('æ…¾æœ›çš„å¥´éš¸')
            time.sleep(2)
        else:
            print('è‰è‰æ–¯: é€™æ¨£å•Š......')
            time.sleep(4)
            print('ä½ æ„Ÿå—åˆ°è‰è‰æ–¯çš„å¤±è½ï¼Œä½†å¥¹å¾ˆå¿«åˆæ›èµ·äº†å¾®ç¬‘')
            time.sleep(4)
            print('è‰è‰æ–¯: æˆç‚ºæƒ¡é­”çœ·å±¬çš„æ©Ÿæœƒåªæœ‰ä¸€æ¬¡ï¼Œåœ¨åšæ±ºå®šå‰è¦æƒ³æ¸…æ¥šå–”')
            time.sleep(4)
            print('è‰è‰æ–¯: ä½ ä»ç„¶å¯ä»¥éš¨æ™‚å›ä¾†æ‰¾æˆ‘ï¼Œæˆ‘æœƒç­‰ä½ çš„')
            time.sleep(3)

class player_in_lobby(NPC):
    def __init__(self,name,money):
        NPC.__init__(self,name)
        self.die_state = False
        self.money = money
        #ä¿å­˜ä¸‹ä¾†çš„ç‰©å“æ¬„(å•†åº—å‡ç´š)
        self.item = []
        self.max_item = 0
        self.extra_hp = 10
        self.devil = ''
        #å•†åº—ç‰©å“
        self.unlockable_item = []
    def earn_money(self,amount):
        self.money += amount
    def show_money(self):
        print('ä½ çš„é‡‘éŒ¢:',self.money)
    def buy_item(self,item,price):
        self.money -= price
        self.unlockable_item.append(item)
    def save_item(self,input_item):
        self.item = []
        for i in range(self.max_item):
            if len(input_item) == 0:
                break 
            self.item.append(input_item.pop(0))
        self.item.sort(key = ['ç‰ç’ƒçš‡å','æ¼†é»‘çš‡å','ç¥è–çš‡å','è”šè—çš‡å','è…¥ç´…çš‡å','æœªçŸ¥è—åœ–','ç¦è—¥','å¤§å£å¾‘å­å½ˆ','æ¦´å½ˆç ²','å½ˆè—¥åŒ…','æ”¾å¤§é¡','é¦™è¸','æ‰‹é‹¸','å•¤é…’','æ‰‹éŠ¬','æ‰‹æ©Ÿ','è½‰æ›å™¨','éæœŸè—¥ç‰©','è…ä¸Šè…ºç´ '].index)
    def show_item(self):
        print('ä½ çš„ç‰©å“æ¬„:',self.item)
    def show_unlockable_item(self):
        print('å·²è§£é–çš„å•†åº—ç‰©å“:',self.unlockable_item)
    def revive(self):
        self.money -= int(self.money*0.5)
        self.item = []
    def die(self):
        self.die_state = True

#éŠæˆ²å…§éƒ¨ç‰©ä»¶
class participant:
    def __init__(self, controlable, hp, item):
        self.controlable = controlable
        self.hp = hp
        self.item = item
        self.item_queen = 0
        self.blood_queen = 0

class computer(participant):
    def __init__(self, hp, item):
        participant.__init__(self, False, hp, item)
        self.regen = False
        self.handcuff = False
        self.bullet_pattern = []
        self.known_live = 0
        self.known_blank = 0
        self.max_item = 8
        self.rage_king = 0
        self.fog_king = 0
        self.fog = 0
        self.trick_king = 0
    def dohandcuff(self):
        self.handcuff = True
    def unhandcuff(self):
        self.handcuff = False
    def reset_bullet_pattern(self,number):
        self.bullet_pattern = []
        for i in range(number):
            self.bullet_pattern.append('unknown')
        self.known_live = 0
        self.known_blank = 0
    def set_bullet_pattern(self,poition,value):
        self.bullet_pattern[poition] = value
        if value == 'live':
            self.known_live = self.bullet_pattern.count('live')
        else:
            self.known_blank = self.bullet_pattern.count('blank')
    def pop_bullet_pattern(self):
        if self.bullet_pattern.pop(0) == 'live':
            self.known_live = self.bullet_pattern.count('live')
        else:
            self.known_blank = self.bullet_pattern.count('blank')

class player(participant):
    def __init__(self, hp, item, money = 0):
        participant.__init__(self, True, hp, item)
        self.handcuff = False
        self.money = money
        self.max_item = 8
        self.queen_used = []
        self.blood_queen = 0
        self.blessing = 0
        self.snake_mark_activate = False
        self.death_mark_activate = False
        self.have_snake_mark = False
        self.have_blood_mark = False
        self.have_death_mark = False
        self.have_angel_mark = False
        self.have_lust_mark = False
    def dohandcuff(self):
        self.handcuff = True
    def unhandcuff(self):
        self.handcuff = False
    def enable_mark(self,blood,snake,death,lust,warp,angel):
        self.have_blood_mark = blood or lust
        self.have_lust_mark = lust
        self.have_snake_mark = snake
        self.have_death_mark = death or angel
    def use_snake_mark(self):
        self.have_snake_mark = False
        self.snake_mark_activate = True
        print('ä½ ä½¿ç”¨äº†æ‰­æ›²å°è¨˜ï¼Œæœ¬å±€é“å…·çš„ç”¨é€”è¢«æ”¹è®Šäº†')
        time.sleep(1)
    def end_snake_mark(self):
        if self.snake_mark_activate:
            print('æ‰­æ›²å°è¨˜æ•ˆæœçµæŸ')
            self.snake_mark_activate = False
            self.have_snake_mark = True
        

class game:
    def __init__(self, player, computer, hp, risk):
        self.player = player
        self.computer = computer
        self.player.hp = hp
        self.computer.hp = hp
        self.round = 1
        self.first_move = 'ç©å®¶'
        self.item_list = ['æ”¾å¤§é¡','é¦™è¸','æ‰‹é‹¸','å•¤é…’','æ‰‹éŠ¬','æ‰‹æ©Ÿ','è½‰æ›å™¨','éæœŸè—¥ç‰©','è…ä¸Šè…ºç´ ']
        self.special_item = ['æœªçŸ¥è—åœ–','ç¦è—¥','å¤§å£å¾‘å­å½ˆ','æ¦´å½ˆç ²','å½ˆè—¥åŒ…']
        self.queen = ['æ¼†é»‘çš‡å','ç¥è–çš‡å','è”šè—çš‡å','è…¥ç´…çš‡å','ç‰ç’ƒçš‡å'] 
        self.king = ['æœ¦æœ§åœ‹ç‹','ç‹‚æš´åœ‹ç‹','ç‹¡è©åœ‹ç‹','è²ªå©ªåœ‹ç‹']
        if risk % 2 == 0:
            self.item_list = ['æ”¾å¤§é¡','é¦™è¸','æ‰‹é‹¸','å•¤é…’','æ‰‹éŠ¬','æ‰‹æ©Ÿ','è½‰æ›å™¨','éæœŸè—¥ç‰©','è…ä¸Šè…ºç´ ','ç¦è—¥','å¤§å£å¾‘å­å½ˆ','æ¦´å½ˆç ²','å½ˆè—¥åŒ…']
            if random.randint(0,1):
                print('é«˜é¢¨éšªæ¨¡å¼ï¼Œè¡€é‡å¤§å¹…æå‡')
                health = random.randint(3,10)
                self.player.hp += health
                self.computer.hp += health
        print('éŠæˆ²é–‹å§‹,æ¯äººæœ‰',self.player.hp,'é»è¡€é‡')

    def set_first_move(self,first_move):
        self.first_move = first_move

    def give_participant_item(self,number,participant):
        #ç¥è–çš‡åå’Œè”šè—çš‡åçš„çµ¦é“å…·æ•ˆæœ
        for i in range(number):
            if len(participant.item) < participant.max_item:
                time.sleep(1)
                self.item_list.append('æœªçŸ¥è—åœ–')
                item=self.item_list[random.randint(0,len(self.item_list)-1)]
                self.item_list.remove('æœªçŸ¥è—åœ–')
                print('ä½ ' if participant.controlable else 'èŠå®¶','ç²å¾—äº†',item)
                participant.item.append(item)
                
            else:
                print('ç‰©å“æ¬„å·²æ»¿')
        #ç…§è‘—['ç‰ç’ƒçš‡å','æ¼†é»‘çš‡å','ç¥è–çš‡å','è”šè—çš‡å','è…¥ç´…çš‡å','æœªçŸ¥è—åœ–','ç¦è—¥','å¤§å£å¾‘å­å½ˆ','æ¦´å½ˆç ²','å½ˆè—¥åŒ…','æ”¾å¤§é¡','é¦™è¸','æ‰‹é‹¸','å•¤é…’','æ‰‹éŠ¬','æ‰‹æ©Ÿ','è½‰æ›å™¨','éæœŸè—¥ç‰©','è…ä¸Šè…ºç´ ']çš„é †åºæ’åºç©å®¶å’Œé›»è…¦çš„ç‰©å“æ¬„
        participant.item.sort(key = ['æœ¦æœ§åœ‹ç‹','ç‹‚æš´åœ‹ç‹','ç‹¡è©åœ‹ç‹','è²ªå©ªåœ‹ç‹','ç‰ç’ƒçš‡å','æ¼†é»‘çš‡å','ç¥è–çš‡å','è”šè—çš‡å','è…¥ç´…çš‡å','æœªçŸ¥è—åœ–','ç¦è—¥','å¤§å£å¾‘å­å½ˆ','æ¦´å½ˆç ²','å½ˆè—¥åŒ…','æ”¾å¤§é¡','é¦™è¸','æ‰‹é‹¸','å•¤é…’','æ‰‹éŠ¬','æ‰‹æ©Ÿ','è½‰æ›å™¨','éæœŸè—¥ç‰©','è…ä¸Šè…ºç´ '].index)
    def give_item(self,number):
        for i in range(number):
            if len(self.player.item) < self.player.max_item:
                chance = random.randint(1,100)
                if (chance <= 20) and (self.player.item.count('æœªçŸ¥è—åœ–') == 0):
                    item='æœªçŸ¥è—åœ–'
                    if (random.randint(1,4) == 4) and (risk % 2 == 0) and (risk % 5 != 0):  
                        item=self.queen[random.randint(0,len(self.queen)-1)]
                        print('***ä½ ç²å¾—äº† ',item,' ***')
                    else:
                        print('ä½ ç²å¾—äº†',item)
                    self.player.item.append(item)
                elif (chance > 95) and (risk % 5 != 0):   
                    if main_player.unlockable_item.count('ç‰ç’ƒçš‡å') == 0:
                        chance = random.randint(1,100)
                        if chance <= 20:
                            item='ç¥è–çš‡å'
                            print('***ä½ ç²å¾—äº† ç¥è–çš‡å ***')
                            self.player.item.append(item)    
                        elif chance <= 40:
                            item='è”šè—çš‡å'
                            print('***ä½ ç²å¾—äº† è”šè—çš‡å ***')
                            self.player.item.append(item)
                        elif chance <= 70:
                            item='è…¥ç´…çš‡å'
                            print('***ä½ ç²å¾—äº† è…¥ç´…çš‡å ***')
                            self.player.item.append(item)
                        else:
                            item='æ¼†é»‘çš‡å'
                            print('***ä½ ç²å¾—äº† æ¼†é»‘çš‡å ***')
                            self.player.item.append(item)
                    else:
                        chance = random.randint(1,110)
                        if chance <= 10:
                            item='ç‰ç’ƒçš‡å'
                            print('â˜…â˜…â˜…ä½ ç²å¾—äº† ç‰ç’ƒçš‡å â˜…â˜…â˜…')
                            self.player.item.append(item)
                        if chance <= 30:
                            item='ç¥è–çš‡å'
                            print('***ä½ ç²å¾—äº† ç¥è–çš‡å ***')
                            self.player.item.append(item)    
                        elif chance <= 50:
                            item='è”šè—çš‡å'
                            print('***ä½ ç²å¾—äº† è”šè—çš‡å ***')
                            self.player.item.append(item)
                        elif chance <= 80:
                            item='è…¥ç´…çš‡å'
                            print('***ä½ ç²å¾—äº† è…¥ç´…çš‡å ***')
                            self.player.item.append(item)
                        else:
                            item='æ¼†é»‘çš‡å'
                            print('***ä½ ç²å¾—äº† æ¼†é»‘çš‡å ***')
                            self.player.item.append(item)

                else:
                    item=self.item_list[random.randint(0,len(self.item_list)-1)]
                    print('ä½ ç²å¾—äº†',item)
                    self.player.item.append(item)
            else:
                print('ä½ çš„ç‰©å“æ¬„å·²æ»¿')
            if len(self.computer.item) < self.computer.max_item:
                chance = random.randint(1,20)
                if chance == 20:
                    item='æœªçŸ¥è—åœ–'
                    self.computer.item.append(item)
                elif (chance == 19) and (risk % 2 == 0):
                    item='æœªçŸ¥è—åœ–'
                    self.computer.item.append(item)
                elif (chance == 18) and (risk % 3 == 0):
                    while True:
                        chance = random.randint(1,4)
                        if chance == 1:
                            self.computer.item.append('æœ¦æœ§åœ‹ç‹')
                        elif chance == 2:
                            self.computer.item.append('ç‹‚æš´åœ‹ç‹')
                        elif chance == 3:
                            self.computer.item.append('ç‹¡è©åœ‹ç‹')
                        elif chance == 4:
                            self.computer.item.append('è²ªå©ªåœ‹ç‹')
                        break
                else:
                    self.computer.item.append(self.item_list[random.randint(0,len(self.item_list)-1)])
        self.player.item.sort(key = ['ç‰ç’ƒçš‡å','æ¼†é»‘çš‡å','ç¥è–çš‡å','è”šè—çš‡å','è…¥ç´…çš‡å','æœªçŸ¥è—åœ–','ç¦è—¥','å¤§å£å¾‘å­å½ˆ','æ¦´å½ˆç ²','å½ˆè—¥åŒ…','æ”¾å¤§é¡','é¦™è¸','æ‰‹é‹¸','å•¤é…’','æ‰‹éŠ¬','æ‰‹æ©Ÿ','è½‰æ›å™¨','éæœŸè—¥ç‰©','è…ä¸Šè…ºç´ '].index)
        self.computer.item.sort(key = ['æœ¦æœ§åœ‹ç‹','ç‹‚æš´åœ‹ç‹','ç‹¡è©åœ‹ç‹','è²ªå©ªåœ‹ç‹','æœªçŸ¥è—åœ–','ç¦è—¥','å¤§å£å¾‘å­å½ˆ','æ¦´å½ˆç ²','å½ˆè—¥åŒ…','æ”¾å¤§é¡','é¦™è¸','æ‰‹é‹¸','å•¤é…’','æ‰‹éŠ¬','æ‰‹æ©Ÿ','è½‰æ›å™¨','éæœŸè—¥ç‰©','è…ä¸Šè…ºç´ '].index)
    
    def computer_bonus(self,bonus_number):
        self.computer.item.append(self.item_list[random.randint(0,len(self.item_list)-1)])
        if (bonus_number+1) % 2 == 0:
            self.computer.hp += 1
            print('èŠå®¶çš„è¡€é‡å¢åŠ äº†ä¸€é»')
        if (bonus_number+1) % 10 == 0:
            self.computer.item.pop(0)
            self.computer.item.append('æœªçŸ¥è—åœ–')

    def player_bonus(self,win_count):
        if win_count ==0:
            for i in main_player.unlockable_item:
                if i =='æ°¸ä¹…è—åœ–':
                    self.player.item.append('æœªçŸ¥è—åœ–')
                elif i == 'éš¨æ©Ÿçš‡å':
                    if 'ç‰ç’ƒçš‡å' in main_player.unlockable_item:
                        self.player.item.append(self.queen[random.randint(0,4)])
                    else:
                        self.player.item.append(self.queen[random.randint(0,3)])
        for i in range(main_player.extra_hp):
            self.player.hp += 1
            
    def blessing(self,remain_bullet,turn,handsaw):
        print('â˜…â˜…â˜…â˜…â˜…â˜…â˜…â˜…â˜…â˜…â˜…â˜…â˜…â˜…â˜…â˜…â˜…â˜…â˜…â˜…â˜…â˜…â˜…â˜…â˜…â˜…â˜…â˜…â˜…â˜…â˜…â˜…â˜…â˜…â˜…â˜…â˜…â˜…')
        print('ç‰ç’ƒç¥ç¦æ²»ç™’äº†ä½ çš„å‚·å£')
        self.player.hp += self.player.blessing
        if remain_bullet[0] & (turn == 'ç©å®¶'):
            print('ä½ æ„Ÿè¦ºåˆ°ç¬¬ä¸€ç™¼å­å½ˆæ˜¯å¯¦å½ˆï¼Œé€™ç™¼å­å½ˆå°‡é€ æˆå…©å€å‚·å®³')
            print('â˜…â˜…â˜…â˜…â˜…â˜…â˜…â˜…â˜…â˜…â˜…â˜…â˜…â˜…â˜…â˜…â˜…â˜…â˜…â˜…â˜…â˜…â˜…â˜…â˜…â˜…â˜…â˜…â˜…â˜…â˜…â˜…â˜…â˜…â˜…â˜…â˜…â˜…')
            time.sleep(2)
            return True
        elif remain_bullet[0] & (turn == 'èŠå®¶'):   
            print('ä½ æ„Ÿè¦ºåˆ°ç¬¬ä¸€ç™¼å­å½ˆæ˜¯å¯¦å½ˆï¼Œä½ å°‡é¡å¤–å›å¾©2é»è¡€é‡')
            self.player.hp += 2
        elif random.randint(0,1) and len(self.computer.item) > 0:
            print('ä½ æ„Ÿè¦ºåˆ°ç¬¬ä¸€ç™¼å­å½ˆæ˜¯ç©ºåŒ…å½ˆï¼ŒèŠå®¶çš„',self.computer.item[0],'å°‡è¢«æ‘§æ¯€')
            self.computer.item.pop(0)
        else:
            print('ä½ æ„Ÿè¦ºåˆ°ç¬¬ä¸€ç™¼å­å½ˆæ˜¯ç©ºåŒ…å½ˆï¼Œä½ å°‡é¡å¤–ç²å¾—ä¸€å€‹ç‰©å“')
            self.give_participant_item(1,self.player)
        print('â˜…â˜…â˜…â˜…â˜…â˜…â˜…â˜…â˜…â˜…â˜…â˜…â˜…â˜…â˜…â˜…â˜…â˜…â˜…â˜…â˜…â˜…â˜…â˜…â˜…â˜…â˜…â˜…â˜…â˜…â˜…â˜…â˜…â˜…â˜…â˜…â˜…â˜…')
        time.sleep(2)
        return handsaw

    def one_round(self,live_bullet,blank,item_number):
        time.sleep(3)
        print('ç¬¬',self.round,'å±€é–‹å§‹')
        #æœ¦æœ§åœ‹ç‹æ•ˆæœ
        self.computer.fog = self.computer.fog_king

        if self.player.handcuff:
            self.player.unhandcuff()
            print('ä½ çš„æ‰‹éŠ¬è§£é™¤,å¯ä»¥è‡ªç”±è¡Œå‹•äº†')
        if self.computer.handcuff:
            self.computer.unhandcuff()
            print('èŠå®¶çš„æ‰‹éŠ¬è§£é™¤,å¯ä»¥è‡ªç”±è¡Œå‹•äº†')
        handsaw = False
        skip = False    
        killer_queen = False
        self.give_item(item_number)
        remain_bullet = []
        self.computer.reset_bullet_pattern(live_bullet+blank)
        print('é€™å±€æœ‰',live_bullet,'ç™¼å¯¦å½ˆ',blank,'ç™¼ç©ºåŒ…å½ˆ')
        for i in range(live_bullet):
            remain_bullet.append(True)
        for i in range(blank):
            remain_bullet.append(False)
        random.shuffle(remain_bullet)
        #ç‹¡è©åœ‹ç‹æ•ˆæœ
        for i in range(self.computer.trick_king):
            if i > len(remain_bullet)-1:
                break
            elif remain_bullet[i]:
                self.computer.set_bullet_pattern(i,'live')
            else:
                self.computer.set_bullet_pattern(i,'blank')
        #ç‰ç’ƒç¥ç¦æ•ˆæœ
        if self.player.blessing > 0:
            handsaw = self.blessing(remain_bullet,self.first_move,handsaw)

        time.sleep(2)        

        while len(remain_bullet) > 0:
            skip = False
            try_count = 0
            not_blue_print = True
            gun_lock = False
            temp_break = False

            if self.player.hp <= 0:
                time.sleep(2)
                print('**************************************')
                print('ä½ æ­»äº†')
                time.sleep(2)
                return
            
            time.sleep(1)
            if self.first_move == 'ç©å®¶':
                print('==========================================')
                print('ä½ çš„å›åˆ')
                print('ä½ çš„ç‰©å“æ¬„:',self.player.item)
                print('ç©å®¶è¡€é‡:',self.player.hp,'èŠå®¶è¡€é‡:',self.computer.hp)  
                print('å‰©é¤˜',live_bullet,'ç™¼å¯¦å½ˆ',blank,'ç™¼ç©ºåŒ…å½ˆ')
                print('è«‹é¸æ“‡è¦åšçš„äº‹')
                if self.player.have_snake_mark:
                    print('1.å°„å‘èŠå®¶, 2.å°„å‘è‡ªå·±, 3.ä½¿ç”¨ç‰©å“, 4.é¡¯ç¤ºèŠå®¶ç‰©å“æ¬„, 5.ä½¿ç”¨æ‰­æ›²å°è¨˜')
                else:
                    print('1.å°„å‘èŠå®¶, 2.å°„å‘è‡ªå·±, 3.ä½¿ç”¨ç‰©å“, 4.é¡¯ç¤ºèŠå®¶ç‰©å“æ¬„')
                if len(self.computer.bullet_pattern) != len(remain_bullet):
                    raise Exception('å­å½ˆæ•¸é‡ä¸ç¬¦')
                if self.player.blood_queen > 0 and (handsaw==False):
                    print('è…¥ç´…çš‡åä½¿ä½ ç²å¾—æ‰‹é‹¸æ•ˆæœ')
                    time.sleep(1)
                    handsaw = True
                    self.player.blood_queen -= 1
                if self.player.max_item >= 20:
                    lobby_NPC[0].unlock_achievement('é“ç†æˆ‘éƒ½æ‡‚ï¼Œä½†æ˜¯é€™å€‹èƒŒåŒ…æ€éº¼é€™éº¼å¤§')
                    time.sleep(1)
                while True:
                    try:
                        action = int(input())
                    except ValueError:
                        print('è«‹è¼¸å…¥æ­£ç¢ºçš„æ•¸å­—')
                        continue
                    if type(action) != int:
                        print('è«‹è¼¸å…¥æ­£ç¢ºçš„æ•¸å­—')
                        continue
                    if action == 5 and self.player.have_snake_mark:
                        self.player.use_snake_mark()
                        temp_break == True
                    elif action < 1 or action > 4:
                        print('è«‹è¼¸å…¥æ­£ç¢ºçš„æ•¸å­—')
                        continue
                    break
                if temp_break:
                    temp_break = False
                    continue
            else:
                action = 0
                self.first_move = 'ç©å®¶'
            
            if action==1:
                if remain_bullet[0] and (self.computer.fog > 0):
                    print('æœ¦æœ§åœ‹ç‹ä½¿ä½ å°„åäº†')
                    self.computer.pop_bullet_pattern()
                    self.computer.fog -= 1
                    handsaw = False
                    killer_queen = False
                    live_bullet -= 1
                elif remain_bullet[0] and handsaw and killer_queen:
                    self.computer.hp -= 10
                    print('ä½ ä½¿ç”¨æ¼†é»‘çš‡åå°„ä¸­äº†èŠå®¶,é€ æˆåé»å‚·å®³')
                    if self.computer.blood_queen > 0:
                        print('è…¥ç´…çš‡åä½¿èŠå®¶å…ç–«é¡å¤–å‚·å®³')
                        self.computer.hp += 5
                        self.computer.blood_queen -= 1
                    handsaw = False
                    killer_queen = False
                    self.computer.pop_bullet_pattern()
                    live_bullet -= 1
                    if (self.player.hp <= 5) and (self.computer.hp <= 0):
                        time.sleep(2)
                        lobby_NPC[0].unlock_achievement('æ¼†é»‘å­å½ˆ')
                elif remain_bullet[0]&killer_queen:
                    self.computer.hp -= 5
                    print('ä½ ä½¿ç”¨æ¼†é»‘çš‡åå°„ä¸­äº†èŠå®¶,é€ æˆäº”é»å‚·å®³')
                    self.computer.pop_bullet_pattern()
                    live_bullet -= 1
                    killer_queen = False
                    if (self.player.hp <= 5) and (self.computer.hp <= 0):
                        time.sleep(2)
                        lobby_NPC[0].unlock_achievement('æ¼†é»‘å­å½ˆ')
                elif remain_bullet[0]&handsaw:
                    self.computer.hp -= 2
                    print('ä½ å°„ä¸­äº†èŠå®¶,é€ æˆå…©é»å‚·å®³')
                    if self.computer.blood_queen > 0:
                        print('è…¥ç´…çš‡åä½¿èŠå®¶å…ç–«é¡å¤–å‚·å®³')
                        self.computer.hp += 1
                        self.computer.blood_queen -= 1
                    handsaw = False
                    self.computer.pop_bullet_pattern()
                    live_bullet -= 1
                elif remain_bullet[0]:
                    self.computer.hp -= 1
                    print('ä½ å°„ä¸­äº†èŠå®¶,é€ æˆä¸€é»å‚·å®³')
                    if self.player.have_blood_mark:
                        time.sleep(1)
                        print('å—œè¡€å°è¨˜ä½¿ä½ å¸æ”¶ä¸€é»è¡€é‡')
                        self.player.hp += 1
                        self.computer.hp -= 1
                        time.sleep(1)
                    self.computer.pop_bullet_pattern()
                    live_bullet -= 1
                else:
                    print('ä½ çš„å­å½ˆæ‰“ç©ºäº†')
                    self.computer.pop_bullet_pattern()
                    blank -= 1
                    handsaw = False
                remain_bullet.pop(0)
                handsaw = False
            elif action==2 and gun_lock :
                print('æ§ç¶“éæ”¹é€ ï¼Œé€™å±€ç„¡æ³•å†å°„å‘è‡ªå·±äº†')
                time.sleep(1)
                continue
            elif action==2:
                if remain_bullet[0]&handsaw&killer_queen:
                    self.player.hp -= 10
                    print('ä½ ç”¨æ¼†é»‘çš‡åå°„ä¸­äº†è‡ªå·±,é€ æˆåé»å‚·å®³')
                    if self.player.blood_queen > 0:
                        print('è…¥ç´…çš‡åä½¿ä½ å…ç–«é¡å¤–å‚·å®³')
                        self.player.hp += 5
                        self.player.blood_queen -= 1
                    else:
                        print('ç¯€å“€é †è®Š')
                    handsaw = False
                    killer_queen = False
                    self.computer.pop_bullet_pattern()
                    live_bullet -= 1
                elif remain_bullet[0]&killer_queen:
                    self.player.hp -= 5
                    print('ä½ ç”¨æ¼†é»‘çš‡åå°„ä¸­äº†è‡ªå·±,é€ æˆäº”é»å‚·å®³')
                    print('ç¯€å“€é †è®Š')
                    killer_queen = False
                    self.computer.pop_bullet_pattern()
                    live_bullet -= 1
                elif remain_bullet[0]&handsaw:
                    self.player.hp -= 2
                    print('ä½ å°„ä¸­äº†è‡ªå·±,é€ æˆå…©é»å‚·å®³')
                    if self.player.blood_queen > 0:
                        print('è…¥ç´…çš‡åä½¿ä½ å…ç–«é¡å¤–å‚·å®³')
                        self.player.hp += 1
                        self.player.blood_queen -= 1
                    else:
                        print('ä½ æ˜¯ç¬¨è›‹å—?')
                        lobby_NPC[0].unlock_achievement('ä½ æ˜¯ç¬¨è›‹å—')
                    handsaw = False
                    self.computer.pop_bullet_pattern()
                    live_bullet -= 1
                elif remain_bullet[0]:
                    self.player.hp -= 1
                    print('ä½ å°„ä¸­äº†è‡ªå·±,é€ æˆä¸€é»å‚·å®³')
                    self.computer.pop_bullet_pattern()
                    live_bullet -= 1
                    handsaw = False
                else:
                    print('ä½ çš„å­å½ˆæ‰“ç©ºäº†,é¡å¤–ç²å¾—ä¸€å›åˆ')
                    remain_bullet.pop(0)
                    self.computer.pop_bullet_pattern()
                    blank -= 1
                    handsaw = False
                    continue
                remain_bullet.pop(0)
                handsaw = False

            elif action==3 and self.player.snake_mark_activate: 
                print('è«‹é¸æ“‡è¦ä½¿ç”¨çš„ç‰©å“')
                for i in range(len(self.player.item)):
                    print(i+1,'.',self.player.item[i])
                try:
                    item = int(input())
                except ValueError:
                    print('è«‹è¼¸å…¥æ­£ç¢ºçš„æ•¸å­—')
                    continue
                if item > len(self.player.item):    
                    print('è«‹è¼¸å…¥æ­£ç¢ºçš„æ•¸å­—')
                    continue

                if self.player.item[item-1] == 'æ‰‹é‹¸':
                    print('ä½ æ‹¿æ‰‹é‹¸ç å‘èŠå®¶,é€ æˆäº†ä¸€é»å‚·å®³')
                    time.sleep(1)
                    self.computer.hp -= 1
                elif self.player.item[item-1] == 'å•¤é…’':
                    self.player.hp += 1
                    print('ä½ ä½¿ç”¨äº†å•¤é…’,å›å¾©äº†ä¸€é»è¡€é‡')
                elif self.player.item[item-1] == 'æ‰‹æ©Ÿ':
                    print('ä½ ä½¿ç”¨äº†æ‰‹æ©Ÿï¼Œæ”¹è®Šäº†æœªä¾†')
                    random.shuffle(remain_bullet)
                    self.computer.reset_bullet_pattern(live_bullet+blank)
                    print('ç¬¬ä¸€ç™¼æ˜¯', 'å¯¦å½ˆ' if remain_bullet[0] else 'ç©ºåŒ…å½ˆ')
                    print('ç¬¬äºŒç™¼æ˜¯', 'å¯¦å½ˆ' if remain_bullet[1] else 'ç©ºåŒ…å½ˆ')
                elif self.player.item[item-1] == 'è½‰æ›å™¨':
                    print('ä½ ä½¿ç”¨äº†è½‰æ›å™¨,åè½‰äº†æ‰€æœ‰å­å½ˆ')
                    for i in range(len(remain_bullet)):
                        remain_bullet[i] = not remain_bullet[i] 
                        if remain_bullet[i]:
                            live_bullet += 1
                            blank -= 1
                        else:
                            live_bullet -= 1
                            blank += 1
                elif self.player.item[item-1] == 'éæœŸè—¥ç‰©':
                    print('ä½ å¸äº†ä¸€äº›éæœŸè—¥ç‰©ï¼Œhighäº†èµ·ä¾†')
                    self.computer.fog == 0
                    print('ä½ çœ‹ç ´äº†èŠå®¶çš„æœ¦æœ§åœ‹ç‹æ•ˆæœ')
                elif self.player.item[item-1] == 'æ”¾å¤§é¡':
                    print('ä½ ä½¿ç”¨äº†æ”¾å¤§é¡,èº«å‰çš„ç©ºé–“è¢«æ‰­æ›²äº†')
                    self.player.max_item += 1
                    for i in range(3):
                        if random.randint(0,1):
                            remain_bullet.append(True)
                            live_bullet += 1
                        else:
                            remain_bullet.append(False)
                            blank += 1
                    self.computer.bullet_pattern.append('unknown')
                    self.computer.bullet_pattern.append('unknown')
                    self.computer.bullet_pattern.append('unknown')
                elif self.player.item[item-1] == 'é¦™è¸':
                    if remain_bullet[0]:
                        print('ä½ æŠ½äº†æ ¹è¸,é€€æ‰ä¸€ç™¼å¯¦å½ˆ')
                        live_bullet -= 1
                        remain_bullet.pop(0)
                        self.computer.pop_bullet_pattern()
                    else:
                        print('ä½ æŠŠé¦™è¸å¡é€²æ§è£¡,ç©ºåŒ…å½ˆè¢«æ›æˆäº†å¯¦å½ˆ')
                        remain_bullet[0] = True
                        live_bullet += 1
                        blank -= 1
                    if len(remain_bullet) == 0:
                        print('å­å½ˆæ‰“å®Œäº†')
                        print('é€²å…¥ä¸‹ä¸€å±€')
                        return
                elif self.player.item[item-1] == 'æ‰‹éŠ¬':
                    if gun_lock:
                        print('æ§å·²ç¶“è¢«æ”¹é€ éäº†')
                        continue
                    print('ä½ ç”¨æ‰‹éŠ¬æ”¹é€ äº†æ§,é€™å±€ç„¡æ³•å†å°„å‘è‡ªå·±')
                    gun_lock = True
                elif self.player.item[item-1] == 'æœªçŸ¥è—åœ–':
                    print('ä½ æ’•ç¢æœªçŸ¥è—åœ–ï¼Œæ†‘ç©ºè®Šå‡ºäº†ä¸‰æ¨£ç‰©å“')
                    self.give_participant_item(3,self.player)
                    
                elif self.player.item[item-1] == 'ç¦è—¥':
                    print('ä½ å—‘äº†ç¦è—¥ï¼Œèº«æ‰‹è®Šçš„å¿«é€Ÿï¼Œæ‘¸é ­é‚„è¦å“­!')
                    self.computer.dohandcuff()
                    handsaw = True
                    
                elif self.player.item[item-1] == 'å¤§å£å¾‘å­å½ˆ':
                    print('ä½ ä½¿ç”¨äº†å¤§å£å¾‘å­å½ˆ,æ‰€æœ‰ç©ºåŒ…å½ˆè¢«æ›æˆäº†å¯¦å½ˆ')
                    for i in range(len(remain_bullet)):
                        if remain_bullet[i] == False:
                            remain_bullet[i] = True
                            live_bullet += 1
                            blank -= 1
                elif self.player.item[item-1] == 'æ¦´å½ˆç ²':
                    print('ä½ ä½¿ç”¨æ¦´å½ˆç ²å¼·åˆ¶å°„å‡ºæ‰€æœ‰å­å½ˆ,é€ æˆäº†',live_bullet+blank,'é»å‚·å®³')
                    self.computer.hp -= live_bullet+blank
                    time.sleep(1)
                    print('å­å½ˆæ‰“å®Œäº†')
                    print('é€²å…¥ä¸‹ä¸€å±€')
                    return
                elif self.player.item[item-1] == 'å½ˆè—¥åŒ…':
                    damage = 0
                    for i in range(len(remain_bullet)-1):
                        if remain_bullet.pop(0):
                            live_bullet -= 1
                            self.player.hp += 1
                            self.computer.pop_bullet_pattern()
                        else:
                            damage += 1
                            self.computer.pop_bullet_pattern()
                            blank -= 1
                    if handsaw:
                        damage *= 2
                        handsaw = False 
                    self.computer.hp -= damage
                    print('ä½ ç”¨å½ˆè—¥åŒ…æ¸…ç©ºå¤§éƒ¨åˆ†å­å½ˆï¼Œå›å¾©',live_bullet,'é»è¡€é‡ï¼Œä¸¦å°ä½ é€ æˆ',damage,'é»å‚·å®³')
                    
                elif self.player.item[item-1] == 'è…ä¸Šè…ºç´ ':    
                    print('ä½ ä½¿ç”¨äº†è…ä¸Šè…ºç´ ï¼Œçœ¼ç¥è®Šå¾—ç‹‚æš´')
                    handsaw = True
                self.player.item.pop(item-1)
                continue
            elif action==3:
                print('è«‹é¸æ“‡è¦ä½¿ç”¨çš„ç‰©å“')
                for i in range(len(self.player.item)):
                    print(i+1,'.',self.player.item[i])
                try:
                    item = int(input())
                except ValueError:
                    print('è«‹è¼¸å…¥æ­£ç¢ºçš„æ•¸å­—')
                    continue

                if item > len(self.player.item):    
                    print('è«‹è¼¸å…¥æ­£ç¢ºçš„æ•¸å­—')
                    continue
                if self.player.item[item-1] == 'æ‰‹é‹¸':
                    if handsaw:
                        print('æ‰‹é‰…æ•ˆæœå·²ç¶“å­˜åœ¨äº†')
                        continue
                    handsaw = True
                    print('ä½ ä½¿ç”¨äº†æ‰‹é‹¸,ä¸‹ä¸€ç™¼å­å½ˆé€ æˆå…©å€å‚·å®³')
                elif self.player.item[item-1] == 'å•¤é…’':
                    if remain_bullet.pop(0):
                        print('ä½ ä½¿ç”¨äº†å•¤é…’,é€€æ‰ä¸€ç™¼å¯¦å½ˆ')
                        live_bullet -= 1
                    else:
                        print('ä½ ä½¿ç”¨äº†å•¤é…’,é€€æ‰ä¸€ç™¼ç©ºåŒ…å½ˆ')
                        blank -= 1
                    self.computer.pop_bullet_pattern()
                    if len(remain_bullet) == 0:
                            print('å­å½ˆæ‰“å®Œäº†')
                            print('é€²å…¥ä¸‹ä¸€å±€')
                            return
                elif self.player.item[item-1] == 'æ‰‹æ©Ÿ':
                    print('ä½ ä½¿ç”¨äº†æ‰‹æ©Ÿ')
                    if self.player.have_angel_mark:
                        for i in range(len(remain_bullet)):
                            if remain_bullet[i]:
                                print('ç¬¬',i+1,'ç™¼æ˜¯å¯¦å½ˆ')
                            else:
                                print('ç¬¬',i+1,'ç™¼æ˜¯ç©ºåŒ…å½ˆ')
                    else:
                        if len(remain_bullet) == 1:
                            n = 0
                        else:
                            n=random.randint(1,len(remain_bullet)-1)
                        if remain_bullet[n]:
                            print('ç¬¬',n+1,'ç™¼æ˜¯å¯¦å½ˆ')
                        else:
                            print('ç¬¬',n+1,'ç™¼æ˜¯ç©ºåŒ…å½ˆ')
                elif self.player.item[item-1] == 'è½‰æ›å™¨':
                    print('ä½ ä½¿ç”¨äº†è½‰æ›å™¨,ç¾åœ¨é€™ç™¼å­å½ˆå°‡åè½‰')
                    remain_bullet[0] = not remain_bullet[0]
                    if remain_bullet[0]:
                        live_bullet += 1
                        blank -= 1
                    else:
                        live_bullet -= 1
                        blank += 1
                elif self.player.item[item-1] == 'éæœŸè—¥ç‰©':
                    print('ä½ ä½¿ç”¨äº†éæœŸè—¥ç‰©')
                    if random.randint(0,1) or self.player.have_lust_mark:
                        self.player.hp += 2
                        print('ä½ å›å¾©äº†å…©é»è¡€é‡')
                    else:
                        self.player.hp -= 1
                        print('ä½ å¤±å»äº†ä¸€é»è¡€é‡')
                        if self.player.hp <= 0:
                            time.sleep(2)
                            print('**************************************')
                            print('ä½ æ­»äº†')
                            time.sleep(2)
                            return
                elif self.player.item[item-1] == 'æ”¾å¤§é¡':
                    print('ä½ ä½¿ç”¨äº†æ”¾å¤§é¡çœ‹åˆ° ','å¯¦å½ˆ' if remain_bullet[0] else 'ç©ºåŒ…å½ˆ')
                elif self.player.item[item-1] == 'é¦™è¸':
                    print('ä½ ä½¿ç”¨äº†é¦™è¸,å›å¾©ä¸€é»è¡€é‡')
                    self.player.hp += 1
                elif self.player.item[item-1] == 'æ‰‹éŠ¬':
                    if self.computer.handcuff:
                        print('èŠå®¶å·²ç¶“è¢«éŠ¬ä½äº†')
                        continue
                    print('ä½ ä½¿ç”¨äº†æ‰‹éŠ¬,èŠå®¶ä¸‹å›åˆç„¡æ³•è¡Œå‹•')
                    self.computer.dohandcuff()
                elif self.player.item[item-1] == 'æœªçŸ¥è—åœ–':
                    if self.player.item.count('éæœŸè—¥ç‰©') >= 3:
                        print('ä½ ç²å¾—äº†ç¦è—¥')
                        self.player.item.append('ç¦è—¥')
                        for i in range(3):
                            self.player.item.remove('éæœŸè—¥ç‰©')
                        self.player.item.remove('æœªçŸ¥è—åœ–')
                    elif (self.player.item.count('æ‰‹é‹¸') >= 2) and  (self.player.item.count('æ”¾å¤§é¡') >= 1):
                        print('ä½ ç²å¾—äº†å¤§å£å¾‘å­å½ˆ')
                        self.player.item.append('å¤§å£å¾‘å­å½ˆ')
                        for i in range(2):
                            self.player.item.remove('æ‰‹é‹¸')
                        self.player.item.remove('æ”¾å¤§é¡')
                        self.player.item.remove('æœªçŸ¥è—åœ–')
                    elif (self.player.item.count('å¤§å£å¾‘å­å½ˆ') >= 1) and (self.player.item.count('è…ä¸Šè…ºç´ ') >= 1) and (self.player.item.count('è½‰æ›å™¨') >= 1):
                        print('ä½ ç²å¾—äº†æ¦´å½ˆç ²')
                        self.player.item.append('æ¦´å½ˆç ²')
                        self.player.item.remove('è…ä¸Šè…ºç´ ')
                        self.player.item.remove('å¤§å£å¾‘å­å½ˆ')
                        self.player.item.remove('è½‰æ›å™¨')
                        self.player.item.remove('æœªçŸ¥è—åœ–')
                    elif (self.player.item.count('å•¤é…’') >= 2) and (self.player.item.count('é¦™è¸') >= 1) and ((live_bullet+blank) >= 3):
                        print('ä½ ç²å¾—äº†å½ˆè—¥åŒ…')
                        self.player.item.remove('å•¤é…’')
                        self.player.item.remove('å•¤é…’')
                        self.player.item.remove('é¦™è¸')
                        self.player.item.append('å½ˆè—¥åŒ…')
                        self.player.item.remove('æœªçŸ¥è—åœ–')
                    elif len(self.player.item) == self.player.max_item:
                        print('ä½ ç²å¾—äº†æ“´å¢èƒŒåŒ…,ç‰©å“æ¬„å¢åŠ 2æ ¼')
                        self.player.item = []
                        self.player.max_item += 2
                    else:
                        print('ä½ çš„ç‰©å“ä¸è¶³ä»¥åˆæˆ')
                        continue
                    not_blue_print = False
                elif self.player.item[item-1] == 'ç¦è—¥':
                    #70%æ©Ÿç‡è¡€é‡ç¿»å€ä¸¦+3ï¼Œ30%è¡€é‡é™ä½åˆ°1é»ï¼Œè‹¥è¡€é‡ç‚º1å‰‡æ­»äº¡
                    print('ä½ ä½¿ç”¨äº†ç¦è—¥')
                    if random.randint(1,10) <= 7 or self.player.have_lust_mark:
                        self.player.hp *= 2
                        self.player.hp += 3
                        print('ä½ çš„è¡€é‡å¤§å¹…æå‡,ç¾åœ¨è¡€é‡ç‚º',self.player.hp)
                    else:
                        if self.player.hp == 1:
                            print('ä½ æ­»äº†')
                            self.player.hp = 0  
                            time.sleep(2)
                            lobby_NPC[0].unlock_achievement('å¸æ¯’æœ‰ç¤™èº«å¿ƒå¥åº·ï¼Œè«‹å‹¿éš¨æ„å˜—è©¦')
                            time.sleep(2)      
                            return
                        self.player.hp = 1
                        print('ä½ ä¸­æ¯’äº†ï¼Œè¡€é‡é™ç‚º1')
                elif self.player.item[item-1] == 'å¤§å£å¾‘å­å½ˆ':
                    #å°‡ç›®å‰é€™ç™¼ç›´æ¥å­å½ˆæ›¿æ›æˆå¤§å£å¾‘å­å½ˆä¸¦ç›´æ¥ç™¼å°„ï¼Œé€ æˆ3é»å‚·å®³ï¼Œå¦‚æœæœ‰ä½¿ç”¨æ‰‹é‹¸å‰‡é€ æˆ6é»å‚·å®³
                    if self.computer.fog > 0:
                        print('æœ¦æœ§åœ‹ç‹ä½¿ä½ å°„åäº†')
                        self.computer.fog -= 1
                        handsaw = False
                    elif handsaw:
                        self.computer.hp -= 6
                        print('ä½ ç™¼å°„äº†å¤§å£å¾‘å­å½ˆ,é€ æˆ6é»å‚·å®³')
                    else:
                        self.computer.hp -= 3
                        print('ä½ ç™¼å°„äº†å¤§å£å¾‘å­å½ˆ,é€ æˆ3é»å‚·å®³')
                    if remain_bullet.pop(0):
                        live_bullet -= 1
                    else:
                        blank -= 1
                    self.computer.pop_bullet_pattern()
                    self.player.item.pop(item-1)
                    skip = True
                    handsaw = False
                elif self.player.item[item-1] == 'æ¦´å½ˆç ²':
                    #å°‡è‡ªèº«è¡€é‡é™ä½è‡³1é»ï¼Œä¸¦ç™¼å°„ç¾åœ¨é€™ç™¼å­å½ˆï¼Œè‹¥ç‚ºå¯¦å½ˆå‰‡é€ æˆ(é™ä½çš„è¡€é‡+1)é»å‚·å®³ï¼Œä½¿ç”¨æ‰‹é‹¸å‰‡é€ æˆå…©å€å‚·å®³ï¼Œè‹¥ç‚ºç©ºåŒ…å½ˆå‰‡ä¸é€ æˆå‚·å®³ï¼Œä½¿ç”¨å¾Œè¼ªåˆ°èŠå®¶çš„å›åˆ
                    damage = self.player.hp
                    self.player.hp = 1
                    if remain_bullet.pop(0):
                        if self.computer.fog > 0:
                            print('æœ¦æœ§åœ‹ç‹ä½¿ä½ å°„åäº†')
                            self.computer.fog -= 1
                            handsaw = False
                        elif handsaw:
                            self.computer.hp -= 2*damage
                            print('ä½ ç™¼å°„äº†æ¦´å½ˆç ²,é€ æˆ',2*damage,'é»å‚·å®³')
                            handsaw = False
                        else:
                            self.computer.hp -= damage
                            print('ä½ ç™¼å°„äº†æ¦´å½ˆç ²,é€ æˆ',damage,'é»å‚·å®³')
                        live_bullet -= 1
                    else:
                        print('ä½ ç™¼å°„äº†æ¦´å½ˆç ²,ä½†æ˜¯å­å½ˆæ‰“ç©ºäº†')
                        blank -= 1
                    self.computer.pop_bullet_pattern()
                    self.player.item.pop(item-1)
                    skip = True
                elif self.player.item[item-1] == 'å½ˆè—¥åŒ…':
                    #å°èŠå®¶é€ æˆå‰©é¤˜å¯¦å½ˆæ•¸é‡çš„å‚·å®³ï¼Œä¹‹å¾Œç”¨å¯¦å½ˆå’Œç©ºåŒ…å½ˆéš¨æ©Ÿå°‡å½ˆè—¥å¡«æ»¿è‡³8ç™¼
                    damage = live_bullet
                    if self.computer.fog > 0:
                        if damage > self.computer.fog:
                            damage -= self.computer.fog
                            self.computer.fog = 0
                            if handsaw:
                                damage *= 2
                            self.computer.hp -= damage
                            print('ä½ ä½¿ç”¨äº†å½ˆè—¥åŒ…')
                            print('æœ¦æœ§åœ‹ç‹ä½¿ä½ å°„åäº†éƒ¨åˆ†å­å½ˆ,å°èŠå®¶é€ æˆ',damage,'é»å‚·å®³')
                        else:
                            print('ä½ ä½¿ç”¨äº†å½ˆè—¥åŒ…ï¼Œä½†æ˜¯æœ¦æœ§åœ‹ç‹ä½¿ä½ å°„åäº†æ‰€æœ‰å­å½ˆ') 
                            self.computer.fog -= damage
                    else:
                        if handsaw:
                            damage *= 2
                        print('ä½ ä½¿ç”¨äº†å½ˆè—¥åŒ…,å°èŠå®¶é€ æˆ',damage,'é»å‚·å®³')
                        self.computer.hp -= damage
                    handsaw = False
                    remain_bullet = []
                    live_bullet = 0
                    blank = 0
                    for i in range(8-len(remain_bullet)):
                        if random.randint(0,1):
                            remain_bullet.append(True)
                            live_bullet += 1
                        else:
                            remain_bullet.append(False)
                            blank += 1
                    random.shuffle(remain_bullet)
                    print('å½ˆè—¥å·²é‡æ–°è£å¡«')
                    self.computer.reset_bullet_pattern(live_bullet+blank)
                    if self.player.blessing > 0:
                        handsaw = self.blessing(remain_bullet,'ç©å®¶',handsaw)
                elif self.player.item[item-1] == 'æ¼†é»‘çš‡å':
                    #ç§»é™¤é›™æ–¹æ‰€æœ‰é“å…·ï¼Œå°‡å½ˆå¤¾è£å¡«ç‚ºä¸€ç™¼ç©ºåŒ…å½ˆä¸€ç™¼å¯¦å½ˆï¼Œé€™ç™¼å¯¦å½ˆå°‡é€ æˆ5é»å‚·å®³
                    print('ä½ ä½¿ç”¨äº†æ¼†é»‘çš‡åï¼Œå½ˆè—¥è£å¡«ç‚ºä¸€ç™¼ç©ºåŒ…å½ˆä¸€ç™¼5é»å‚·å®³å¯¦å½ˆï¼Œç¥ˆç¦±å§!')
                    self.player.item = []
                    self.computer.item = []
                    remain_bullet = [True,False]
                    live_bullet = 1
                    blank = 1
                    self.computer.reset_bullet_pattern(live_bullet+blank)
                    random.shuffle(remain_bullet)
                    killer_queen = True
                    not_blue_print = False
                    self.player.queen_used.append('æ¼†é»‘çš‡å')
                    if self.player.blessing > 0:
                        handsaw = self.blessing(remain_bullet,'ç©å®¶',handsaw)
                elif self.player.item[item-1] == 'ç¥è–çš‡å':
                    #å›3é»è¡€é‡ï¼ŒèƒŒåŒ…ä¸Šé™+2ï¼Œç²å¾—3å€‹éš¨æ©Ÿç‰©å“
                    print('ä½ ä½¿ç”¨äº†ç¥è–çš‡åï¼Œå›å¾©3é»è¡€é‡ï¼ŒèƒŒåŒ…ä¸Šé™+2ï¼Œç²å¾—3å€‹éš¨æ©Ÿç‰©å“')
                    self.player.hp += 3
                    self.player.max_item += 3
                    self.give_participant_item(3,self.player)
                    self.player.max_item -= 1
                    self.player.queen_used.append('ç¥è–çš‡å')
                elif self.player.item[item-1] == 'è”šè—çš‡å':
                    #ç©å®¶çš„å›åˆçµæŸæ™‚ï¼Œç²å¾—ä¸€å€‹éš¨æ©Ÿç‰©å“
                    print('ä½ ä½¿ç”¨äº†è”šè—çš‡åï¼Œè¼ªåˆ°èŠå®¶çš„å›åˆæ™‚ä½ å°‡ç²å¾—ä¸€å€‹éš¨æ©Ÿç‰©å“')
                    self.player.item_queen += 1   
                    self.player.queen_used.append('è”šè—çš‡å')
                    if self.player.item_queen >= 5 :
                        time.sleep(1)
                        lobby_NPC[0].unlock_achievement('é“å…·æ°¸å‹•æ©Ÿ')
                        time.sleep(1)
                elif self.player.item[item-1] == 'è…¥ç´…çš‡å':
                    #ç©å®¶çš„å›åˆé–‹å§‹æ™‚ï¼Œé™„åŠ æ‰‹é‰…æ•ˆæœ
                    print('ä½ ä½¿ç”¨äº†è…¥ç´…çš‡åï¼Œæ¯å›åˆç²å¾—æ‰‹é‹¸æ•ˆæœä¸¦å…ç–«æ‰‹é‰…çš„é¡å¤–å‚·å®³ï¼Œå¯ä»¥è§¸ç™¼äº”æ¬¡')
                    self.player.blood_queen += 5       
                    self.player.queen_used.append('è…¥ç´…çš‡å') 
                elif self.player.item[item-1] == 'ç‰ç’ƒçš‡å':
                    #æ¯æ¬¡é‡æ–°è£å½ˆ(å›åˆé–‹å§‹ã€å½ˆè—¥åŒ…ã€æ¼†é»‘çš‡å)æ™‚é€šéˆç¬¬ä¸€é¡†å­å½ˆï¼Œè‹¥ç‚ºå¯¦å½ˆå‰‡é™„åŠ æ‰‹é‰…æ•ˆæœ
                    #è‹¥ç‚ºç©ºåŒ…å½ˆå‰‡å›å¾©ä¸€é»è¡€é‡ä¸¦æ¶ˆé™¤èŠå®¶ä¸€å€‹é“å…·æˆ–ç²å¾—ä¸€å€‹éš¨æ©Ÿé“å…·
                    #ä½¿ç”¨ç•¶ä¸‹æ¸…ç©ºèŠå®¶çš„é“å…·ã€æ¸…ç©ºå½ˆå¤¾ä¸¦è£ä¸Šä¸€é¡†å¯¦å½ˆ
                    print('ä½ ç²å¾—äº†ç‰ç’ƒçš„ç¥ç¦ï¼ŒèŠå®¶çš„é“å…·è¢«æ¸…ç©ºï¼Œå½ˆå¤¾é‡æ–°è£å¡«äº†')
                    time.sleep(2)
                    lobby_NPC[0].unlock_achievement('ç‰ç’ƒçš„ç¥ç¦')
                    self.computer.item = [] 
                    self.computer.reset_bullet_pattern(1)
                    remain_bullet = [True]
                    if not handsaw:
                        handsaw = True
                        print('ä½ ç²å¾—äº†æ‰‹é‹¸æ•ˆæœ')
                    time.sleep(1)
                    live_bullet = 1
                    blank = 0
                    self.player.blessing += 1
                    self.player.queen_used.append('ç‰ç’ƒçš‡å')                          
                elif self.player.item[item-1] == 'è…ä¸Šè…ºç´ ':
                    print('ä½ ä½¿ç”¨äº†è…ä¸Šè…ºç´ ,å¯ä»¥å·å–èŠå®¶çš„ç‰©å“')
                    if len(self.computer.item) == 0:
                        print('èŠå®¶æ²’æœ‰ç‰©å“å¯ä»¥å·å–')
                        continue
                    print('è«‹é¸æ“‡è¦å·å–çš„ç‰©å“:')
                    for i in range(len(self.computer.item)):
                        print(i+1,'.',self.computer.item[i])
                    try:
                        steal = int(input())
                    except ValueError:
                        print('è«‹è¼¸å…¥æ­£ç¢ºçš„æ•¸å­—')
                        time.sleep(1)
                        continue  
                    if steal > len(self.computer.item):
                        print('è«‹è¼¸å…¥æ­£ç¢ºçš„æ•¸å­—')
                        continue
                    elif steal <= 0:
                        print('è«‹è¼¸å…¥æ­£ç¢ºçš„æ•¸å­—')
                        continue
                    #é¦¬ä¸Šä½¿ç”¨é¸æ“‡çš„ç‰©å“ 
                    if self.computer.item[steal-1] == 'æ‰‹é‹¸':
                        if handsaw:
                            print('æ‰‹é‰…æ•ˆæœå·²ç¶“å­˜åœ¨äº†')
                            continue
                        handsaw = True
                        print('ä½ ä½¿ç”¨äº†æ‰‹é‹¸,ä¸‹ä¸€ç™¼å­å½ˆé€ æˆå…©å€å‚·å®³')
                    elif self.computer.item[steal-1] == 'å•¤é…’':
                        if remain_bullet.pop(0):
                            print('ä½ ä½¿ç”¨äº†å•¤é…’,é€€æ‰ä¸€ç™¼å¯¦å½ˆ')
                            live_bullet -= 1
                        else:
                            print('ä½ ä½¿ç”¨äº†å•¤é…’,é€€æ‰ä¸€ç™¼ç©ºåŒ…å½ˆ')
                            blank -= 1
                        self.computer.pop_bullet_pattern()
                        if len(remain_bullet) == 0:
                            print('å­å½ˆæ‰“å®Œäº†')
                            print('é€²å…¥ä¸‹ä¸€å±€')
                            return
                    elif self.computer.item[steal-1] == 'æ‰‹æ©Ÿ':
                        print('ä½ ä½¿ç”¨äº†æ‰‹æ©Ÿ')
                        if self.player.have_angel_mark:
                            for i in range(len(remain_bullet)):
                                if remain_bullet[i]:
                                    print('ç¬¬',i+1,'ç™¼æ˜¯å¯¦å½ˆ')
                                else:
                                    print('ç¬¬',i+1,'ç™¼æ˜¯ç©ºåŒ…å½ˆ')
                        else:
                            if len(remain_bullet) == 1:
                                n = 0
                            else:
                                n=random.randint(1,len(remain_bullet)-1)
                            if remain_bullet[n]:
                                print('ç¬¬',n+1,'ç™¼æ˜¯å¯¦å½ˆ')
                            else:
                                print('ç¬¬',n+1,'ç™¼æ˜¯ç©ºåŒ…å½ˆ')
                    elif self.computer.item[steal-1] == 'è½‰æ›å™¨':
                        print('ä½ ä½¿ç”¨äº†è½‰æ›å™¨,ç¾åœ¨é€™ç™¼å­å½ˆå°‡åè½‰')
                        remain_bullet[0] = not remain_bullet[0]
                        if remain_bullet[0]:
                            live_bullet += 1
                            blank -= 1
                        else:
                            live_bullet -= 1
                            blank += 1
                    elif self.computer.item[steal-1] == 'éæœŸè—¥ç‰©':
                        print('ä½ ä½¿ç”¨äº†éæœŸè—¥ç‰©')
                        if random.randint(0,1) or self.player.have_lust_mark:
                            self.player.hp += 2
                            print('ä½ å›å¾©äº†å…©é»è¡€é‡')
                        else:
                            self.player.hp -= 1
                            print('ä½ å¤±å»äº†ä¸€é»è¡€é‡')
                            if self.player.hp <= 0:
                                time.sleep(2)
                                print('**************************************')
                                print('ä½ æ­»äº†')
                                time.sleep(2)
                                return
                    elif self.computer.item[steal-1] == 'æ”¾å¤§é¡':
                        print('ä½ ä½¿ç”¨äº†æ”¾å¤§é¡çœ‹åˆ° ','å¯¦å½ˆ' if remain_bullet[0] else 'ç©ºåŒ…å½ˆ')
                    elif self.computer.item[steal-1] == 'é¦™è¸':
                        print('ä½ ä½¿ç”¨äº†é¦™è¸,å›å¾©ä¸€é»è¡€é‡')
                        self.player.hp += 1
                    elif self.computer.item[steal-1] == 'æ‰‹éŠ¬':
                        if self.computer.handcuff:
                            print('èŠå®¶å·²ç¶“è¢«éŠ¬ä½äº†')
                            continue
                        print('ä½ ä½¿ç”¨äº†æ‰‹éŠ¬,èŠå®¶ä¸‹å›åˆç„¡æ³•è¡Œå‹•')
                        self.computer.dohandcuff()
                    elif self.computer.item[steal-1] == 'æœªçŸ¥è—åœ–':
                        self.player.item.append('æœªçŸ¥è—åœ–')
                        print('ä½ ç²å¾—äº†æœªçŸ¥è—åœ–')
                    elif self.computer.item[steal-1] == 'ç¦è—¥':
                        print('ä½ ä½¿ç”¨äº†ç¦è—¥')
                        if random.randint(1,10) <= 7 or self.player.have_lust_mark:
                            self.player.hp *= 2
                            self.player.hp += 3
                            print('ä½ çš„è¡€é‡å¤§å¹…æå‡,ç¾åœ¨è¡€é‡ç‚º',self.player.hp)
                        else:
                            if self.player.hp == 1:
                                print('ä½ æ­»äº†')
                                self.player.hp = 0  
                                time.sleep(2)
                                lobby_NPC[0].unlock_achievement('å¸æ¯’æœ‰ç¤™èº«å¿ƒå¥åº·ï¼Œè«‹å‹¿éš¨æ„å˜—è©¦')
                                time.sleep(2)    
                                return
                            self.player.hp = 1
                            print('ä½ ä¸­æ¯’äº†ï¼Œè¡€é‡é™ç‚º1')
                    elif self.computer.item[steal-1] == 'å¤§å£å¾‘å­å½ˆ':
                        if self.computer.fog > 0:
                            print('æœ¦æœ§åœ‹ç‹ä½¿ä½ å°„åäº†')
                            self.computer.fog -= 1
                            handsaw = False
                        elif handsaw:
                            self.computer.hp -= 6
                            print('ä½ ä½¿ç”¨äº†å¤§å£å¾‘å­å½ˆ,é€ æˆ6é»å‚·å®³')
                        else:
                            self.computer.hp -= 3
                            print('ä½ ä½¿ç”¨äº†å¤§å£å¾‘å­å½ˆ,é€ æˆ3é»å‚·å®³')
                        if remain_bullet.pop(0):
                            live_bullet -= 1
                        else:
                            blank -= 1
                        self.computer.pop_bullet_pattern()
                        handsaw = False
                    elif self.computer.item[steal-1] == 'æ¦´å½ˆç ²':
                        damage = self.player.hp 
                        self.player.hp = 1
                        if remain_bullet.pop(0):
                            if self.computer.fog > 0:
                                print('æœ¦æœ§åœ‹ç‹ä½¿ä½ å°„åäº†')
                                self.computer.fog -= 1
                                handsaw = False
                            elif handsaw:
                                self.computer.hp -= 2*damage
                                print('ä½ ä½¿ç”¨äº†æ¦´å½ˆç ²,é€ æˆ',2*damage,'é»å‚·å®³')
                                handsaw = False
                                if damage >= 15:
                                    lobby_NPC[0].unlock_achievement('å·¨ç ²')
                            else:
                                self.computer.hp -= damage
                                print('ä½ ä½¿ç”¨äº†æ¦´å½ˆç ²,é€ æˆ',damage,'é»å‚·å®³')
                                if damage >= 30:
                                    lobby_NPC[0].unlock_achievement('å·¨ç ²')
                            live_bullet -= 1
                        else:
                            print('ä½ ä½¿ç”¨äº†æ¦´å½ˆç ²,ä½†æ˜¯å­å½ˆæ‰“ç©ºäº†')
                            blank -= 1
                            handsaw = False
                        self.computer.pop_bullet_pattern()
                    elif self.computer.item[steal-1] == 'å½ˆè—¥åŒ…':
                        damage = live_bullet
                        if self.computer.fog > 0:
                            if damage > self.computer.fog:
                                damage -= self.computer.fog
                                self.computer.fog = 0
                                if handsaw:
                                    damage *= 2
                                self.computer.hp -= damage
                                print('ä½ ä½¿ç”¨äº†å½ˆè—¥åŒ…')
                                print('æœ¦æœ§åœ‹ç‹ä½¿ä½ å°„åäº†éƒ¨åˆ†å­å½ˆ,å°èŠå®¶é€ æˆ',damage,'é»å‚·å®³')
                            else:
                                print('ä½ ä½¿ç”¨äº†å½ˆè—¥åŒ…ï¼Œä½†æ˜¯æœ¦æœ§åœ‹ç‹ä½¿ä½ å°„åäº†æ‰€æœ‰å­å½ˆ') 
                                self.computer.fog -= damage
                        else:
                            if handsaw:
                                damage *= 2
                            print('ä½ ä½¿ç”¨äº†å½ˆè—¥åŒ…,å°èŠå®¶é€ æˆ',damage,'é»å‚·å®³')
                            self.computer.hp -= damage
                        handsaw = False
                        remain_bullet = []
                        live_bullet = 0
                        blank = 0
                        for i in range(8-len(remain_bullet)):
                            if random.randint(0,1):
                                remain_bullet.append(True)
                                live_bullet += 1
                            else:
                                remain_bullet.append(False)
                                blank += 1
                        random.shuffle(remain_bullet)
                        print('å½ˆè—¥å·²é‡æ–°è£å¡«')
                        self.computer.reset_bullet_pattern(live_bullet+blank)
                        if self.player.blessing > 0:
                            handsaw = self.blessing(remain_bullet,'ç©å®¶',handsaw)
                        
                    elif self.computer.item[steal-1] == 'è…ä¸Šè…ºç´ ':
                        print('ä½ ä¸èƒ½å·å–è…ä¸Šè…ºç´ ')
                        time.sleep(2)
                        lobby_NPC[0].unlock_achievement('å°±èªªäº†ä¸è¡Œ')
                        continue
                    else:
                        print('ä½ ä¸èƒ½å·å–åœ‹ç‹é“å…·')
                        continue
                    self.computer.item.pop(steal-1)

                if not_blue_print and not skip: 
                    self.player.item.pop(item-1)
                time.sleep(2)
                if self.computer.hp <= 0:
                    time.sleep(2)
                    print('**************************************')
                    print('ä½ è´äº†')
                    time.sleep(2)
                    return
                if not skip:
                    continue
            elif action==4:
                print('èŠå®¶çš„ç‰©å“æ¬„:',self.computer.item)
                time.sleep(4)
                continue
            if self.computer.hp <= 0:
                time.sleep(2)
                print('**************************************')
                print('ä½ è´äº†')
                time.sleep(2)
                return
            if self.player.hp <= 0:
                time.sleep(2)
                print('**************************************')
                print('ä½ æ­»äº†')
                time.sleep(2)
                return
            if len(remain_bullet) == 0:
                print('å­å½ˆæ‰“å®Œäº†')
                print('é€²å…¥ä¸‹ä¸€å±€')
                return
            if self.player.item_queen > 0:
                print('è”šè—çš‡åä½¿ä½ ç²å¾—éš¨æ©Ÿç‰©å“')
                time.sleep(1)
            for i in range(self.player.item_queen):
                self.give_participant_item(1,self.player)
            print('==========================================')
            print('èŠå®¶çš„å›åˆ')
            print('==========================================')

            if self.player.hp == 1 and self.player.death_mark_activate:
                print('å¢®å¤©ä½¿çš„åŠ›é‡ä½¿ä½ æ¢å¾©äº†3é»è¡€é‡')
                time.sleep(2)
                self.player.death_mark_activate = False
                self.player.hp +=3

            time.sleep(1)
            try_count = 0
            not_blue_print = True

            if self.computer.handcuff:
                print('èŠå®¶è¢«æ‰‹éŠ¬éŠ¬ä½äº†,ç„¡æ³•è¡Œå‹•')
                self.computer.unhandcuff()
                continue

            skip = False
            not_blue_print = True
            if action == 0:
                achievement_first_dead = True
            else:
                achievement_first_dead = False

            while True:
                #èŠå®¶é€²è¡Œå‰©é¤˜å­å½ˆåˆ†æ
                if (live_bullet-self.computer.known_live) <= 0:
                    for i in range(len(self.computer.bullet_pattern)):
                        if self.computer.bullet_pattern[i] == 'unknown':
                            self.computer.set_bullet_pattern(i,'blank')
                elif (blank-self.computer.known_blank) <= 0:
                    for i in range(len(self.computer.bullet_pattern)):
                        if self.computer.bullet_pattern[i] == 'unknown':
                            self.computer.set_bullet_pattern(i,'live')
                if self.player.hp <= 0:
                    time.sleep(2)
                    print('**************************************')
                    print('ä½ æ­»äº†')
                    time.sleep(2)
                    if achievement_first_dead:
                        lobby_NPC[0].unlock_achievement('å“ˆå“ˆå±çœ¼')
                    return
                time.sleep(2)
                if len(remain_bullet) == 0:
                    print('å­å½ˆæ‰“å®Œäº†')
                    print('é€²å…¥ä¸‹ä¸€å±€')
                    return
                if (self.computer.rage_king > 0) and (handsaw == False):
                    print('ç‹‚æš´åœ‹ç‹çµ¦äºˆèŠå®¶æ‰‹é‰…æ•ˆæœ')
                    time.sleep(1)
                    handsaw = True
                    self.computer.rage_king -= 1
                if self.computer.item.count('è…¥ç´…çš‡å') > 0 & (not handsaw):
                    print('è…¥ç´…çš‡åä½¿èŠå®¶ç²å¾—æ‰‹é‹¸æ•ˆæœ')
                    time.sleep(1)
                    handsaw = True
                    self.computer.blood_queen -= 1
                #èŠå®¶çš„è¡Œå‹•åˆ¤æ–·
                if len(self.computer.bullet_pattern) != len(remain_bullet):
                    raise Exception('å­å½ˆæ•¸é‡ä¸ç¬¦')
                if len(self.computer.item) > 2 :
                    if try_count >= 3:
                        action = random.randint(1,2)
                        if self.computer.bullet_pattern[0] == 'live':
                            action = 1
                        elif self.computer.bullet_pattern[0] == 'blank':
                            action = 2
                    elif random.randint(1,4) == 4:
                        action = random.randint(1,2)
                    else:
                        action = 3
                elif ('æœ¦æœ§åœ‹ç‹' in self.computer.item or 'ç‹‚æš´åœ‹ç‹' in self.computer.item or 'ç‹¡è©åœ‹ç‹' in self.computer.item or 'è²ªå©ªåœ‹ç‹' in self.computer.item):
                    action = 3
                elif self.computer.bullet_pattern[0] == 'live':
                    action = 1
                elif self.computer.bullet_pattern[0] == 'blank':
                    action = 2
                elif len(self.computer.item) == 0:
                    action = random.randint(1,2)
                else:
                    action = random.randint(1,3)
                if (live_bullet > blank) & (action == 2):
                    action = 1
                if (self.computer.bullet_pattern[0] == 'live') and (action == 2):
                    action = 1
                elif (self.computer.bullet_pattern[0] == 'blank') and (action == 1):
                    action = 2
                
                if (self.computer.bullet_pattern[0] == 'blank') & ('è½‰æ›å™¨' in self.computer.item):
                    print('èŠå®¶ä½¿ç”¨äº†è½‰æ›å™¨,ç¾åœ¨é€™ç™¼å­å½ˆå°‡åè½‰')
                    remain_bullet[0] = True
                    live_bullet += 1
                    blank -= 1
                    self.computer.bullet_pattern[0] = 'live'
                    self.computer.item.remove('è½‰æ›å™¨')
                    time.sleep(2)
                    continue
                if (self.computer.bullet_pattern[0] == 'live') & ('æ‰‹é‹¸' in self.computer.item) and not handsaw:  
                    handsaw = True
                    print('èŠå®¶ä½¿ç”¨äº†æ‰‹é‹¸,ä¸‹ä¸€ç™¼å­å½ˆé€ æˆå…©å€å‚·å®³')
                    time.sleep(2)
                    self.computer.item.remove('æ‰‹é‹¸')
                    action = 1
                if 'æœªçŸ¥è—åœ–' in self.computer.item:
                    #é¦¬ä¸Šä½¿ç”¨æœªçŸ¥è—åœ–
                    print('èŠå®¶ä½¿ç”¨äº†æœªçŸ¥è—åœ–')
                    time.sleep(2)
                    temp = random.randint(1,5)
                    if temp == 1:
                        print('èŠå®¶ç²å¾—äº†ç¦è—¥')
                        
                        self.computer.item.append('ç¦è—¥')
                    elif temp == 2:
                        print('èŠå®¶ç²å¾—äº†å¤§å£å¾‘å­å½ˆ')
                        
                        self.computer.item.append('å¤§å£å¾‘å­å½ˆ')
                    elif temp == 3:
                        print('èŠå®¶ç²å¾—äº†æ¦´å½ˆç ²')
                        
                        self.computer.item.append('æ¦´å½ˆç ²')
                    elif temp == 4:
                        print('èŠå®¶ç²å¾—äº†å½ˆè—¥åŒ…')
                        
                        self.computer.item.append('å½ˆè—¥åŒ…')
                    elif temp == 5:
                        print('èŠå®¶ç²å¾—äº†æ“´å¢èƒŒåŒ…')
                        
                        self.computer.max_item += 1
                    self.computer.item.remove('æœªçŸ¥è—åœ–')
                    time.sleep(2)
                    continue
                if gun_lock and action == 2:
                    action = 1
                #èŠå®¶çš„è¡Œå‹•é¸é …å’Œç©å®¶ç›¸åŒ
                if action==1:
                    try_count = 0
                    if remain_bullet[0]&handsaw&killer_queen:
                        self.player.hp -= 10
                        print('èŠå®¶ä½¿ç”¨æ¼†é»‘çš‡åå°„ä¸­äº†ä½ ,é€ æˆåé»å‚·å®³')
                        if self.player.blood_queen > 0:
                            print('è…¥ç´…çš‡åä½¿ä½ å…ç–«é¡å¤–å‚·å®³')
                            self.player.hp += 5
                            self.player.blood_queen -= 1
                        handsaw = False
                        killer_queen = False
                        live_bullet -= 1
                        self.computer.pop_bullet_pattern()
                    elif remain_bullet[0]&killer_queen:
                        self.player.hp -= 5
                        print('èŠå®¶ä½¿ç”¨æ¼†é»‘çš‡åå°„ä¸­äº†ä½ ,é€ æˆäº”é»å‚·å®³')
                        live_bullet -= 1
                        self.computer.pop_bullet_pattern()
                        killer_queen = False
                    elif remain_bullet[0]&handsaw:
                        self.player.hp -= 2
                        print('èŠå®¶å°„ä¸­äº†ä½ ,é€ æˆå…©é»å‚·å®³')
                        if self.player.blood_queen > 0:
                            print('è…¥ç´…çš‡åä½¿ä½ å…ç–«é¡å¤–å‚·å®³')
                            self.player.hp += 1
                            self.player.blood_queen -= 1
                        handsaw = False
                        live_bullet -= 1
                        self.computer.pop_bullet_pattern()
                    elif remain_bullet[0]:
                        self.player.hp -= 1
                        print('èŠå®¶å°„ä¸­äº†ä½ ,é€ æˆä¸€é»å‚·å®³')
                        live_bullet -= 1
                        self.computer.pop_bullet_pattern()
                    else:
                        print('èŠå®¶çš„å­å½ˆæ‰“ç©ºäº†')
                        blank -= 1
                        self.computer.pop_bullet_pattern()
                        handsaw = False
                    remain_bullet.pop(0)
                    handsaw = False
                elif action==2:
                    try_count = 0
                    if remain_bullet[0] and (self.computer.fog > 0):
                        print('æœ¦æœ§åœ‹ç‹ä½¿èŠå®¶å°„åäº†')
                        self.computer.fog -= 1
                        handsaw = False
                        killer_queen = False
                        live_bullet -= 1
                        self.computer.pop_bullet_pattern()
                    elif remain_bullet[0]&handsaw&killer_queen:
                        self.computer.hp -= 10
                        print('èŠå®¶ä½¿ç”¨æ¼†é»‘çš‡åå°„ä¸­äº†è‡ªå·±,é€ æˆåé»å‚·å®³')
                        if self.computer.blood_queen > 0:
                            print('è…¥ç´…çš‡åä½¿ä½ å…ç–«é¡å¤–å‚·å®³')
                            self.computer.hp += 5
                            self.computer.blood_queen -= 1
                        else:
                            print('ä½ é€ƒéäº†ä¸€æˆª')
                        handsaw = False
                        killer_queen = False
                        live_bullet -= 1
                        self.computer.pop_bullet_pattern()
                    elif remain_bullet[0]&killer_queen:
                        self.computer.hp -= 5
                        print('èŠå®¶ä½¿ç”¨æ¼†é»‘çš‡åå°„ä¸­äº†è‡ªå·±,é€ æˆäº”é»å‚·å®³')
                        print('ä½ é€ƒéäº†ä¸€æˆª')
                        live_bullet -= 1
                        self.computer.pop_bullet_pattern()
                        killer_queen = False
                    elif remain_bullet[0]&handsaw:
                        self.computer.hp -= 2
                        print('èŠå®¶å°„ä¸­äº†è‡ªå·±,é€ æˆå…©é»å‚·å®³')
                        if self.computer.blood_queen > 0:
                            print('è…¥ç´…çš‡åä½¿èŠå®¶å…ç–«é¡å¤–å‚·å®³')
                            self.computer.hp += 1
                            self.computer.blood_queen -= 1
                        handsaw = False
                        live_bullet -= 1
                        self.computer.pop_bullet_pattern()
                    elif remain_bullet[0]:
                        self.computer.hp -= 1
                        print('èŠå®¶å°„ä¸­äº†è‡ªå·±,é€ æˆä¸€é»å‚·å®³')
                        live_bullet -= 1
                        self.computer.pop_bullet_pattern()
                        handsaw = False
                    else:
                        print('èŠå®¶å°„å‘è‡ªå·±ï¼Œå­å½ˆæ‰“ç©ºäº†,é¡å¤–ç²å¾—ä¸€å›åˆ')
                        remain_bullet.pop(0)
                        self.computer.pop_bullet_pattern()
                        blank -= 1
                        handsaw = False
                        continue
                    remain_bullet.pop(0)
                    handsaw = False
                elif action==3:
                    item = random.randint(0,len(self.computer.item)-1)
                    if (self.computer.item[item] == 'å•¤é…’') & (self.computer.bullet_pattern[0]=='live'):
                        try_count +=1
                        continue
                    if (self.computer.item[item] == 'æ‰‹éŠ¬') & self.player.handcuff:
                        try_count +=1
                        continue
                    if (self.computer.item[item] == 'éæœŸè—¥ç‰©') & (self.computer.hp == 1):
                        try_count +=1
                        continue
                    if (self.computer.item[item] == 'æ‰‹æ©Ÿ') & (len(remain_bullet) <= 2):
                        try_count +=1
                        continue
                    if (self.computer.item[item] == 'æ‰‹é‹¸') & handsaw:
                        try_count +=1
                        continue
                    if (self.computer.item[item] == 'æ‰‹é‹¸') & (self.computer.bullet_pattern[0] == 'blank'):
                        try_count +=1
                        continue
                    if (self.computer.item[item] == 'æ¦´å½ˆç ²') & (self.computer.bullet_pattern[0] == 'blank'):
                        try_count +=1
                        continue
                    if (self.computer.item[item] == 'æ”¾å¤§é¡') & (self.computer.bullet_pattern[0] == 'blank'):
                        try_count +=1
                        continue
                    if (self.computer.item[item] == 'æ”¾å¤§é¡') & (self.computer.bullet_pattern[0] == 'live'):
                        try_count +=1
                        continue
                    if (self.computer.item[item] == 'æ‰‹æ©Ÿ') & ('unknown' not in self.computer.bullet_pattern):
                        try_count +=1
                        continue
                    if (self.computer.item[item] == 'è…ä¸Šè…ºç´ ') & (len(self.player.item) == 0):
                        try_count +=1
                        continue     
                    try_count = 0
                    if self.computer.item[item] == 'æ‰‹é‹¸':
                        handsaw = True
                        print('èŠå®¶ä½¿ç”¨äº†æ‰‹é‹¸,ä¸‹ä¸€ç™¼å­å½ˆé€ æˆå…©å€å‚·å®³')
                    elif self.computer.item[item] == 'å•¤é…’':
                        if remain_bullet.pop(0):
                            print('èŠå®¶ä½¿ç”¨äº†å•¤é…’,é€€æ‰ä¸€ç™¼å¯¦å½ˆ')
                            live_bullet -= 1
                            self.computer.pop_bullet_pattern()
                        else:
                            print('èŠå®¶ä½¿ç”¨äº†å•¤é…’,é€€æ‰ä¸€ç™¼ç©ºåŒ…å½ˆ')
                            blank -= 1
                            self.computer.pop_bullet_pattern()
                        if len(remain_bullet) == 0:
                            print('å­å½ˆæ‰“å®Œäº†')
                            print('é€²å…¥ä¸‹ä¸€å±€')
                            return
                    elif self.computer.item[item] == 'æ‰‹æ©Ÿ':
                        print('èŠå®¶ä½¿ç”¨äº†æ‰‹æ©Ÿ')
                        if len(remain_bullet) == 1:
                            n = 0
                        else:
                            n=random.randint(1,len(remain_bullet)-1)
                        if remain_bullet[n]:
                            self.computer.set_bullet_pattern(n,'live')
                        else:
                            self.computer.set_bullet_pattern(n,'blank')
                    elif self.computer.item[item] == 'è½‰æ›å™¨':
                        print('èŠå®¶ä½¿ç”¨äº†è½‰æ›å™¨,ç¾åœ¨é€™ç™¼å­å½ˆå°‡åè½‰')
                        remain_bullet[0] = not remain_bullet[0]
                        if remain_bullet[0]:
                            live_bullet += 1
                            blank -= 1
                        else:
                            live_bullet -= 1
                            blank += 1
                        if self.computer.bullet_pattern[0] == 'live':
                            self.computer.set_bullet_pattern(0,'blank')
                        elif self.computer.bullet_pattern[0] == 'blank':
                            self.computer.set_bullet_pattern(0,'live')
                    elif self.computer.item[item] == 'éæœŸè—¥ç‰©':
                        print('èŠå®¶ä½¿ç”¨äº†éæœŸè—¥ç‰©')
                        if random.randint(0,1):
                            self.computer.hp += 2
                            print('èŠå®¶å›å¾©äº†å…©é»è¡€é‡')
                        else:
                            self.computer.hp -= 1
                            print('èŠå®¶å¤±å»äº†ä¸€é»è¡€é‡')
                            if self.computer.hp <= 0:
                                time.sleep(2)
                                print('**************************************')
                                print('ä½ è´äº†')
                                time.sleep(2)
                                return
                    elif self.computer.item[item] == 'æ”¾å¤§é¡':
                        print('èŠå®¶ä½¿ç”¨äº†æ”¾å¤§é¡')
                        self.computer.set_bullet_pattern(0,'live' if remain_bullet[0] else 'blank')
                    elif self.computer.item[item] == 'é¦™è¸':
                        print('èŠå®¶ä½¿ç”¨äº†é¦™è¸,å›å¾©ä¸€é»è¡€é‡')
                        self.computer.hp += 1
                    elif self.computer.item[item] == 'æ‰‹éŠ¬':
                        print('èŠå®¶ä½¿ç”¨äº†æ‰‹éŠ¬,ä½ ä¸‹å›åˆç„¡æ³•è¡Œå‹•')
                        self.player.dohandcuff()
                    elif self.computer.item[item] == 'æœ¦æœ§åœ‹ç‹':
                        self.player.queen_used.append('æœ¦æœ§åœ‹ç‹')
                        print('èŠå®¶ä½¿ç”¨äº†***æœ¦æœ§åœ‹ç‹***ï¼Œæ¯å›åˆé¡å¤–å…ç–«ä¸€æ¬¡å‚·å®³')
                        #fog_kingç‚ºä¸Šé™ï¼Œfogç‚ºç•¶å‰å…ç–«æ¬¡æ•¸
                        self.computer.fog_king += 1
                        self.computer.fog += 1
                    elif self.computer.item[item] == 'ç‹‚æš´åœ‹ç‹':
                        self.player.queen_used.append('ç‹‚æš´åœ‹ç‹')   
                        print('èŠå®¶ä½¿ç”¨äº†***ç‹‚æš´åœ‹ç‹***ï¼Œä¸‹5ç™¼å­å½ˆé€ æˆå…©å€å‚·å®³')
                        self.computer.rage_king += 5
                    elif self.computer.item[item] == 'ç‹¡è©åœ‹ç‹':
                        self.player.queen_used.append('ç‹¡è©åœ‹ç‹')
                        print('èŠå®¶ä½¿ç”¨äº†***ç‹¡è©åœ‹ç‹***ï¼Œèƒ½å¤ é çŸ¥éƒ¨åˆ†æœªä¾†')
                        self.computer.trick_king += 3
                    elif self.computer.item[item] == 'è²ªå©ªåœ‹ç‹':
                        print('èŠå®¶ä½¿ç”¨äº†***è²ªå©ªåœ‹ç‹***ï¼Œå·èµ°ä½ çš„é“å…·')
                        self.player.queen_used.append('è²ªå©ªåœ‹ç‹')
                        #å·èµ°ç©å®¶æ‰€æœ‰éçš‡åé“å…·ï¼Œç•™ä¸‹çš‡åé“å…·
                        temp_item = []
                        for i in range(len(self.player.item)):
                            if self.player.item[i] != 'æ¼†é»‘çš‡å' and self.player.item[i] != 'ç¥è–çš‡å' and self.player.item[i] != 'è”šè—çš‡å' and self.player.item[i] != 'è…¥ç´…çš‡å':
                                self.computer.item.append(self.player.item[i])
                            else:
                                temp_item.append(self.player.item[i])
                        self.player.item = temp_item                         
                        self.computer.item.remove('è²ªå©ªåœ‹ç‹')
                        skip = True
                    elif self.computer.item[item] == 'æœªçŸ¥è—åœ–':
                        print('èŠå®¶ä½¿ç”¨äº†æœªçŸ¥è—åœ–')
                        time.sleep(2)
                        temp = random.randint(1,5)
                        if temp == 1:
                            print('èŠå®¶ç²å¾—äº†ç¦è—¥')
                            self.computer.item.pop(item)
                            self.computer.item.append('ç¦è—¥')
                        elif temp == 2:
                            print('èŠå®¶ç²å¾—äº†å¤§å£å¾‘å­å½ˆ')
                            self.computer.item.pop(item)
                            self.computer.item.append('å¤§å£å¾‘å­å½ˆ')
                        elif temp == 3:
                            print('èŠå®¶ç²å¾—äº†æ¦´å½ˆç ²')
                            self.computer.item.pop(item)
                            self.computer.item.append('æ¦´å½ˆç ²')
                        elif temp == 4:
                            print('èŠå®¶ç²å¾—äº†å½ˆè—¥åŒ…')
                            self.computer.item.pop(item)
                            self.computer.item.append('å½ˆè—¥åŒ…')
                        elif temp == 5:
                            print('èŠå®¶ç²å¾—äº†æ“´å¢èƒŒåŒ…')
                            self.computer.item.pop(item)
                            self.computer.max_item += 1
                    elif self.computer.item[item] == 'ç¦è—¥':
                        print('èŠå®¶ä½¿ç”¨äº†ç¦è—¥')
                        if random.randint(1,10) <= 7:
                            self.computer.hp *= 2
                            self.computer.hp += 3
                            print('èŠå®¶çš„è¡€é‡å¤§å¹…æå‡,ç¾åœ¨è¡€é‡ç‚º',self.computer.hp)
                        else:
                            if self.computer.hp == 1:
                                print('èŠå®¶ä¸­æ¯’èº«äº¡ï¼Œä½ è´äº†')
                                self.computer.hp = 0
                                time.sleep(2)
                                return
                            self.computer.hp = 1
                            print('èŠå®¶ä¸­æ¯’äº†ï¼Œè¡€é‡é™ç‚º1')    
                    elif self.computer.item[item] == 'å¤§å£å¾‘å­å½ˆ':
                        self.computer.item.pop(item)
                        if handsaw:
                            self.player.hp -= 6
                            print('èŠå®¶ä½¿ç”¨äº†å¤§å£å¾‘å­å½ˆ,é€ æˆ6é»å‚·å®³')
                        else:
                            self.player.hp -= 3
                            print('èŠå®¶ä½¿ç”¨äº†å¤§å£å¾‘å­å½ˆ,é€ æˆ3é»å‚·å®³')
                        if remain_bullet.pop(0):
                            live_bullet -= 1
                        else:
                            blank -= 1
                        self.computer.pop_bullet_pattern()
                        skip = True
                        handsaw = False
                    elif self.computer.item[item] == 'æ¦´å½ˆç ²':
                        self.computer.item.pop(item)
                        damage = self.computer.hp 
                        self.computer.hp = 1
                        if remain_bullet.pop(0):
                            if handsaw:
                                self.player.hp -= 2*damage
                                print('èŠå®¶ä½¿ç”¨äº†æ¦´å½ˆç ²,é€ æˆ',2*damage,'é»å‚·å®³')
                                handsaw = False
                            else:
                                self.player.hp -= damage
                                print('èŠå®¶ä½¿ç”¨äº†æ¦´å½ˆç ²,é€ æˆ',damage,'é»å‚·å®³')
                            live_bullet -= 1
                        else:
                            print('èŠå®¶ä½¿ç”¨äº†æ¦´å½ˆç ²,ä½†æ˜¯å­å½ˆæ‰“ç©ºäº†')
                            blank -= 1
                            handsaw = False

                        self.computer.pop_bullet_pattern()
                        skip = True
                    elif self.computer.item[item] == 'å½ˆè—¥åŒ…':
                        damage = live_bullet
                        if handsaw:
                            damage *= 2
                            handsaw = False 
                        self.player.hp -= damage
                        print('èŠå®¶ä½¿ç”¨äº†å½ˆè—¥åŒ…,å°ä½ é€ æˆ',damage,'é»å‚·å®³')
                        remain_bullet = []
                        live_bullet = 0
                        blank = 0
                        for i in range(8-len(remain_bullet)):
                            if random.randint(0,1):
                                remain_bullet.append(True)
                                live_bullet += 1
                            else:
                                remain_bullet.append(False)
                                blank += 1
                        random.shuffle(remain_bullet)
                        print('å½ˆè—¥å·²é‡æ–°è£å¡«')
                        if self.player.blessing > 0:
                            handsaw = self.blessing(remain_bullet,'èŠå®¶',handsaw)
                        self.computer.reset_bullet_pattern(live_bullet+blank)

                    elif self.computer.item[item] == 'è…ä¸Šè…ºç´ ':    
                        print('èŠå®¶ä½¿ç”¨äº†è…ä¸Šè…ºç´ ,å¯ä»¥å·å–ä½ çš„ç‰©å“')
                        if len(self.player.item) == 0:
                            print('ä½ æ²’æœ‰ç‰©å“å¯ä»¥å·å–')
                            continue
                        #éš¨æ©Ÿå·å–ç©å®¶çš„ä¸€ä»¶ç‰©å“ï¼Œé¦¬ä¸Šä½¿ç”¨å·å–çš„ç‰©å“
                        target = random.randint(0,len(self.player.item)-1)
                        steal = self.player.item.pop(target)
                        if steal == 'æ‰‹é‹¸':
                            handsaw = True
                            print('èŠå®¶å·èµ°äº†æ‰‹é‹¸,ä¸‹ä¸€ç™¼å­å½ˆé€ æˆå…©å€å‚·å®³')
                        elif steal == 'å•¤é…’':
                            if remain_bullet.pop(0):
                                print('èŠå®¶å·èµ°äº†å•¤é…’,é€€æ‰ä¸€ç™¼å¯¦å½ˆ')
                                live_bullet -= 1
                                self.computer.pop_bullet_pattern()
                            else:
                                print('èŠå®¶å·èµ°äº†å•¤é…’,é€€æ‰ä¸€ç™¼ç©ºåŒ…å½ˆ')
                                blank -= 1
                                self.computer.pop_bullet_pattern()
                            if len(remain_bullet) == 0:
                                print('å­å½ˆæ‰“å®Œäº†')
                                print('é€²å…¥ä¸‹ä¸€å±€')
                                return
                        elif steal == 'æ‰‹æ©Ÿ':
                            print('èŠå®¶å·èµ°äº†æ‰‹æ©Ÿ')
                            if len(remain_bullet) == 1:
                                n = 0
                            else:
                                n=random.randint(1,len(remain_bullet)-1)
                            if remain_bullet[n]:
                                self.computer.set_bullet_pattern(n,'live')
                            else:
                                self.computer.set_bullet_pattern(n,'blank')
                        elif steal == 'è½‰æ›å™¨':
                            print('èŠå®¶å·èµ°äº†è½‰æ›å™¨,ç¾åœ¨é€™ç™¼å­å½ˆå°‡åè½‰')
                            remain_bullet[0] = not remain_bullet[0]
                            if remain_bullet[0]:
                                live_bullet += 1
                                blank -= 1
                            else:
                                live_bullet -= 1
                                blank += 1
                            if self.computer.bullet_pattern[0] == 'live':
                                self.computer.set_bullet_pattern(0,'blank')
                            elif self.computer.bullet_pattern[0] == 'blank':
                                self.computer.set_bullet_pattern(0,'live')
                        elif steal == 'éæœŸè—¥ç‰©':
                            print('èŠå®¶å·èµ°äº†éæœŸè—¥ç‰©')
                            if random.randint(0,1):
                                self.computer.hp += 2
                                print('èŠå®¶å›å¾©äº†å…©é»è¡€é‡')
                            else:
                                self.computer.hp -= 1
                                print('èŠå®¶å¤±å»äº†ä¸€é»è¡€é‡')
                                if self.computer.hp <= 0:
                                    time.sleep(2)
                                    print('**************************************')
                                    print('ä½ è´äº†')
                                    time.sleep(2)
                                    return
                        elif steal == 'æ”¾å¤§é¡':
                            print('èŠå®¶å·èµ°äº†æ”¾å¤§é¡')
                            self.computer.set_bullet_pattern(0,'live' if remain_bullet[0] else 'blank')
                        elif steal == 'é¦™è¸':
                            print('èŠå®¶å·èµ°äº†é¦™è¸,å›å¾©ä¸€é»è¡€é‡')
                            self.computer.hp += 1
                        elif steal == 'æ‰‹éŠ¬':
                            print('èŠå®¶å·èµ°äº†æ‰‹éŠ¬,ä½ ä¸‹å›åˆç„¡æ³•è¡Œå‹•')
                            self.player.dohandcuff()
                        elif steal == 'æ¼†é»‘çš‡å':
                            #æ•ˆæœå’Œç©å®¶ä½¿ç”¨æ¼†é»‘çš‡åç›¸åŒ
                            print('èŠå®¶å·èµ°äº†æ¼†é»‘çš‡åï¼Œå½ˆè—¥è£å¡«ç‚ºä¸€ç™¼ç©ºåŒ…å½ˆä¸€ç™¼5é»å‚·å®³å¯¦å½ˆï¼Œç¥ˆç¦±å§!')
                            self.computer.item = []
                            self.player.item = []
                            remain_bullet = [True,False]
                            live_bullet = 1
                            blank = 1
                            self.computer.reset_bullet_pattern(live_bullet+blank)
                            random.shuffle(remain_bullet)
                            killer_queen = True
                            not_blue_print = False
                            if self.player.blessing > 0:
                                self.blessing(remain_bullet,'èŠå®¶',handsaw)
                        elif steal == 'ç¥è–çš‡å':
                            #æ•ˆæœå’Œç©å®¶ä½¿ç”¨ç¥è–çš‡åç›¸åŒ
                            print('èŠå®¶å·èµ°äº†ç¥è–çš‡åï¼Œå›å¾©3é»è¡€é‡ï¼ŒèƒŒåŒ…ä¸Šé™+2ï¼Œç²å¾—3å€‹éš¨æ©Ÿç‰©å“')
                            self.computer.hp += 3
                            self.computer.max_item += 2
                            self.give_participant_item(3,self.computer)
                        elif steal == 'è”šè—çš‡å':
                            #æ•ˆæœå’Œç©å®¶ä½¿ç”¨è”šè—çš‡åç›¸åŒ
                            print('èŠå®¶å·èµ°äº†è”šè—çš‡åï¼Œä½ ç²å¾—å›åˆæ™‚èŠå®¶å°‡ç²å¾—éš¨æ©Ÿç‰©å“')
                            self.computer.item_queen += 1
                        elif steal == 'è…¥ç´…çš‡å':
                            #æ•ˆæœå’Œç©å®¶ä½¿ç”¨è…¥ç´…çš‡åç›¸åŒ
                            print('èŠå®¶å·èµ°äº†è…¥ç´…çš‡åï¼Œä½ ç²å¾—å›åˆæ™‚èŠå®¶å°‡ç²å¾—æ‰‹é‹¸æ•ˆæœ')
                            self.computer.blood_queen += 1
                            
                        elif steal == 'æœªçŸ¥è—åœ–':
                            temp = random.randint(1,5)
                            if temp == 1:
                                print('èŠå®¶ç²å¾—äº†ç¦è—¥')
                                self.computer.item.append('ç¦è—¥')
                            elif temp == 2:
                                print('èŠå®¶ç²å¾—äº†å¤§å£å¾‘å­å½ˆ')
                                self.computer.item.append('å¤§å£å¾‘å­å½ˆ')
                            elif temp == 3:
                                print('èŠå®¶ç²å¾—äº†æ¦´å½ˆç ²')
                                self.computer.item.append('æ¦´å½ˆç ²')
                            elif temp == 4:
                                print('èŠå®¶ç²å¾—äº†å½ˆè—¥åŒ…')
                                self.computer.item.append('å½ˆè—¥åŒ…')
                            elif temp == 5:
                                print('èŠå®¶ç²å¾—äº†æ“´å¢èƒŒåŒ…')
                                self.computer.max_item += 1
                        elif steal == 'ç¦è—¥':
                            print('èŠå®¶å·èµ°äº†ç¦è—¥')
                            if random.randint(1,10) <= 7:
                                self.computer.hp *= 2
                                self.computer.hp += 3
                                print('èŠå®¶çš„è¡€é‡å¤§å¹…æå‡,ç¾åœ¨è¡€é‡ç‚º',self.computer.hp)
                            else:
                                if self.computer.hp == 1:
                                    print('èŠå®¶ä¸­æ¯’èº«äº¡ï¼Œä½ è´äº†')
                                    time.sleep(2)
                                    return
                                self.computer.hp = 1
                                print('èŠå®¶ä¸­æ¯’äº†ï¼Œè¡€é‡é™ç‚º1')
                        elif steal == 'å¤§å£å¾‘å­å½ˆ':
                            if handsaw:
                                self.player.hp -= 6
                                print('èŠå®¶å·èµ°äº†å¤§å£å¾‘å­å½ˆ,é€ æˆ6é»å‚·å®³')
                            else:
                                self.player.hp -= 3
                                print('èŠå®¶å·èµ°äº†å¤§å£å¾‘å­å½ˆ,é€ æˆ3é»å‚·å®³')
                            if remain_bullet.pop(0):
                                live_bullet -= 1
                            else:
                                blank -= 1
                            handsaw = False
                            self.computer.pop_bullet_pattern()
                            if self.player.handcuff:
                                print('ä½ è¢«æ‰‹éŠ¬éŠ¬ä½äº†,ç„¡æ³•è¡Œå‹•')
                                self.player.unhandcuff()
                                try_count = 0
                                continue
                            else:
                                break
                        elif steal == 'æ¦´å½ˆç ²':
                            damage = self.computer.hp 
                            self.computer.hp = 1
                            if remain_bullet.pop(0):
                                if handsaw:
                                    self.player.hp -= 2*damage
                                    print('èŠå®¶å·èµ°äº†æ¦´å½ˆç ²,é€ æˆ',2*damage,'é»å‚·å®³')
                                    handsaw = False
                                else:
                                    self.player.hp -= damage
                                    print('èŠå®¶å·èµ°äº†æ¦´å½ˆç ²,é€ æˆ',damage,'é»å‚·å®³')
                                live_bullet -= 1
                            else:
                                print('èŠå®¶å·èµ°äº†æ¦´å½ˆç ²,ä½†æ˜¯å­å½ˆæ‰“ç©ºäº†')
                                blank -= 1
                                handsaw = False
                            self.computer.pop_bullet_pattern()
                            if self.player.handcuff:
                                print('ä½ è¢«æ‰‹éŠ¬éŠ¬ä½äº†,ç„¡æ³•è¡Œå‹•')
                                self.player.unhandcuff()
                                try_count = 0
                                continue
                            else:
                                break
                        elif steal == 'å½ˆè—¥åŒ…':
                            damage = live_bullet
                            if handsaw:
                                self.player.hp -= 2*damage
                                handsaw = False
                            self.player.hp -= damage
                            print('èŠå®¶å·èµ°äº†å½ˆè—¥åŒ…,å°ä½ é€ æˆ',damage,'é»å‚·å®³')
                            remain_bullet = []
                            live_bullet = 0
                            blank = 0
                            for i in range(8-len(remain_bullet)):
                                if random.randint(0,1):
                                    remain_bullet.append(True)
                                    live_bullet += 1
                                else:
                                    remain_bullet.append(False)
                                    blank += 1
                            random.shuffle(remain_bullet)
                            print('å½ˆè—¥å·²é‡æ–°è£å¡«')
                            if self.player.blessing > 0:
                                handsaw = self.blessing(remain_bullet,'èŠå®¶',handsaw)
                            self.computer.reset_bullet_pattern(live_bullet+blank)
                        elif steal == 'è…ä¸Šè…ºç´ ':
                            print('èŠå®¶è©¦è‘—å·å–è…ä¸Šè…ºç´ ä½†å¤±æ•—äº†')
                            self.player.item.append('è…ä¸Šè…ºç´ ')
                        elif steal == 'ç‰ç’ƒçš‡å':
                            print('èŠå®¶è©¦è‘—å·å–ç‰ç’ƒçš‡åä½†å¤±æ•—äº†')
                            self.player.item.append('ç‰ç’ƒçš‡å')
                    if skip and not self.player.handcuff:
                        break
                    elif skip and self.player.handcuff:
                        print('ä½ è¢«æ‰‹éŠ¬éŠ¬ä½äº†,ç„¡æ³•è¡Œå‹•')
                        self.player.unhandcuff()
                        try_count = 0
                        continue
                    if not_blue_print:
                        self.computer.item.pop(item)
                    continue
                if self.player.hp <= 0:
                    time.sleep(2)
                    print('**************************************')
                    print('ä½ æ­»äº†')
                    time.sleep(2)
                    if achievement_first_dead:
                        lobby_NPC[0].unlock_achievement('å“ˆå“ˆå±çœ¼')
                    return
                if self.computer.hp <= 0:
                    time.sleep(2)
                    print('**************************************')
                    print('ä½ è´äº†')
                    time.sleep(2)
                    return
                if self.player.handcuff:
                    print('ä½ è¢«æ‰‹éŠ¬éŠ¬ä½äº†,ç„¡æ³•è¡Œå‹•')
                    self.player.unhandcuff()
                    try_count = 0
                    continue
                if len(remain_bullet) == 0:
                    print('å­å½ˆæ‰“å®Œäº†')
                    print('é€²å…¥ä¸‹ä¸€å±€')
                    return
                if self.computer.item_queen > 0:
                    print('è”šè—çš‡åä½¿èŠå®¶ç²å¾—éš¨æ©Ÿç‰©å“')
                    time.sleep(1)
                for i in range(self.computer.item_queen):
                    self.give_participant_item(1,self.computer)
                break

#è©¦ç…‰æ¨¡å¼
class challenge_mode(game):
    def __init__(self, player, computer, hp, risk, challenger):
        if challenger == 'è–©é‚çˆ¾':
            hp = 6
        elif challenger == 'åˆ©ç¶­å¦':
            hp = random.randint(4,6)
        elif challenger == 'è‰è‰æ–¯':
            pass
        self.player = player
        self.computer = computer
        self.player.hp = hp
        self.computer.hp = hp
        self.round = 1
        self.first_move = 'ç©å®¶'
        self.item_list = ['æ”¾å¤§é¡','é¦™è¸','æ‰‹é‹¸','å•¤é…’','æ‰‹éŠ¬','æ‰‹æ©Ÿ','è½‰æ›å™¨','éæœŸè—¥ç‰©','è…ä¸Šè…ºç´ ']
        self.special_item = ['æœªçŸ¥è—åœ–','ç¦è—¥','å¤§å£å¾‘å­å½ˆ','æ¦´å½ˆç ²','å½ˆè—¥åŒ…']
        self.queen = ['æ¼†é»‘çš‡å','ç¥è–çš‡å','è”šè—çš‡å','è…¥ç´…çš‡å','ç‰ç’ƒçš‡å'] 
        self.king = ['æœ¦æœ§åœ‹ç‹','ç‹‚æš´åœ‹ç‹','ç‹¡è©åœ‹ç‹','è²ªå©ªåœ‹ç‹']
        if risk % 2 == 0:
            self.item_list = ['æ”¾å¤§é¡','é¦™è¸','æ‰‹é‹¸','å•¤é…’','æ‰‹éŠ¬','æ‰‹æ©Ÿ','è½‰æ›å™¨','éæœŸè—¥ç‰©','è…ä¸Šè…ºç´ ','ç¦è—¥','å¤§å£å¾‘å­å½ˆ','æ¦´å½ˆç ²','å½ˆè—¥åŒ…']
            print('é«˜é¢¨éšªæ¨¡å¼ï¼Œè¡€é‡å¤§å¹…æå‡')
            health = random.randint(3,10)
            self.player.hp += health
            self.computer.hp += health
        print('éŠæˆ²é–‹å§‹,æ¯äººæœ‰',self.player.hp,'é»è¡€é‡')
        self.challenger = challenger
        self.devil_princess_item_list = ['æœ¦æœ§åœ‹ç‹','ç‹‚æš´åœ‹ç‹','ç‹¡è©åœ‹ç‹','è²ªå©ªåœ‹ç‹','ç‰ç’ƒçš‡å','æ¼†é»‘çš‡å','ç¥è–çš‡å','è”šè—çš‡å','è…¥ç´…çš‡å','æœªçŸ¥è—åœ–','ç¦è—¥','å¤§å£å¾‘å­å½ˆ','æ¦´å½ˆç ²','å½ˆè—¥åŒ…','æ”¾å¤§é¡','é¦™è¸','æ‰‹é‹¸','å•¤é…’','æ‰‹éŠ¬','æ‰‹æ©Ÿ','è½‰æ›å™¨','éæœŸè—¥ç‰©','è…ä¸Šè…ºç´ ']

    def give_item(self,number):
        if self.challenger != 'æƒ¡é­”å…¬ä¸»':
            super().give_item(number)
        else:
            for i in range(number):
                if len(self.player.item) < self.player.max_item:
                    item=self.item_list[random.randint(0,len(self.item_list)-1)]
                    print('ä½ ç²å¾—äº†',item)
                    self.player.item.append(item)
                else:
                    print('ä½ çš„ç‰©å“æ¬„å·²æ»¿')
                if len(self.computer.item) < self.computer.max_item:
                    self.computer.item.append(self.devil_princess_item_list[random.randint(0,len(self.devil_princess_item_list)-1)])
        
            self.player.item.sort(key = ['ç‰ç’ƒçš‡å','æ¼†é»‘çš‡å','ç¥è–çš‡å','è”šè—çš‡å','è…¥ç´…çš‡å','æœªçŸ¥è—åœ–','ç¦è—¥','å¤§å£å¾‘å­å½ˆ','æ¦´å½ˆç ²','å½ˆè—¥åŒ…','æ”¾å¤§é¡','é¦™è¸','æ‰‹é‹¸','å•¤é…’','æ‰‹éŠ¬','æ‰‹æ©Ÿ','è½‰æ›å™¨','éæœŸè—¥ç‰©','è…ä¸Šè…ºç´ '].index)
            self.computer.item.sort(key = ['æœ¦æœ§åœ‹ç‹','ç‹‚æš´åœ‹ç‹','ç‹¡è©åœ‹ç‹','è²ªå©ªåœ‹ç‹','ç‰ç’ƒçš‡å','æ¼†é»‘çš‡å','ç¥è–çš‡å','è”šè—çš‡å','è…¥ç´…çš‡å','æœªçŸ¥è—åœ–','ç¦è—¥','å¤§å£å¾‘å­å½ˆ','æ¦´å½ˆç ²','å½ˆè—¥åŒ…','æ”¾å¤§é¡','é¦™è¸','æ‰‹é‹¸','å•¤é…’','æ‰‹éŠ¬','æ‰‹æ©Ÿ','è½‰æ›å™¨','éæœŸè—¥ç‰©','è…ä¸Šè…ºç´ '].index)

    def give_Leviathan_item(self,number,participant):
        for i in range(number):
            if len(participant.item) < participant.max_item:
                time.sleep(1)
                self.item_list.extend(['ç¦è—¥','å¤§å£å¾‘å­å½ˆ','æ¦´å½ˆç ²','å½ˆè—¥åŒ…'])
                item=self.item_list[random.randint(0,len(self.item_list)-1)]
                for i in ['ç¦è—¥','å¤§å£å¾‘å­å½ˆ','æ¦´å½ˆç ²','å½ˆè—¥åŒ…']:
                    self.item_list.remove(i)
                print(' åˆ©ç¶­å¦ç²å¾—äº†',item)
                participant.item.append(item)
                
            else:
                print('ç‰©å“æ¬„å·²æ»¿')
    
    def Lilit_life_steal(self):
        time.sleep(1.5)
        drain = ((self.round-1)//2) + 1
        print('è‰è‰æ–¯ä½¿ç”¨äº†å¸è¡€é¬¼ä¹‹å»')
        self.player.hp -= drain
        self.computer.hp += drain
        print('ä½ çš„ç”Ÿå‘½è¢«è‰è‰æ–¯å¸å–äº†',drain,'é»')
        time.sleep(2)
            

    def player_bonus(self,win_count):
        if win_count == 0:
            for i in main_player.unlockable_item:
                if i =='æ°¸ä¹…è—åœ–':
                    self.player.item.append('æœªçŸ¥è—åœ–')
                elif i == 'éš¨æ©Ÿçš‡å':
                    if ('ç‰ç’ƒçš‡å' in main_player.unlockable_item) and (main_player.unlockable_item.count('éš¨æ©Ÿçš‡å') == 3) and 'ç‰ç’ƒçš‡å' not in self.player.item:
                        self.player.item.append('ç‰ç’ƒçš‡å')
                    elif ('ç‰ç’ƒçš‡å' in main_player.unlockable_item) and 'ç‰ç’ƒçš‡å' not in self.player.item:
                        self.player.item.append(self.queen[random.randint(0,4)])
                    else:
                        self.player.item.append(self.queen[random.randint(0,3)])
        for i in range(main_player.extra_hp):
            self.player.hp += 1
            
    def blessing(self,remain_bullet,turn,handsaw):
        print('â˜…â˜…â˜…â˜…â˜…â˜…â˜…â˜…â˜…â˜…â˜…â˜…â˜…â˜…â˜…â˜…â˜…â˜…â˜…â˜…â˜…â˜…â˜…â˜…â˜…â˜…â˜…â˜…â˜…â˜…â˜…â˜…â˜…â˜…â˜…â˜…â˜…â˜…')
        print('ç‰ç’ƒç¥ç¦æ²»ç™’äº†ä½ çš„å‚·å£')
        self.player.hp += self.player.blessing
        if remain_bullet[0] & (turn == 'ç©å®¶'):
            print('ä½ æ„Ÿè¦ºåˆ°ç¬¬ä¸€ç™¼å­å½ˆæ˜¯å¯¦å½ˆï¼Œé€™ç™¼å­å½ˆå°‡é€ æˆå…©å€å‚·å®³')
            print('â˜…â˜…â˜…â˜…â˜…â˜…â˜…â˜…â˜…â˜…â˜…â˜…â˜…â˜…â˜…â˜…â˜…â˜…â˜…â˜…â˜…â˜…â˜…â˜…â˜…â˜…â˜…â˜…â˜…â˜…â˜…â˜…â˜…â˜…â˜…â˜…â˜…â˜…')
            time.sleep(2)
            return True
        elif remain_bullet[0] & (turn == 'èŠå®¶'):   
            print('ä½ æ„Ÿè¦ºåˆ°ç¬¬ä¸€ç™¼å­å½ˆæ˜¯å¯¦å½ˆï¼Œä½ å°‡é¡å¤–å›å¾©2é»è¡€é‡')
            self.player.hp += 2
        elif random.randint(0,1) and len(self.computer.item) > 0:
            print('ä½ æ„Ÿè¦ºåˆ°ç¬¬ä¸€ç™¼å­å½ˆæ˜¯ç©ºåŒ…å½ˆï¼ŒèŠå®¶çš„',self.computer.item[0],'å°‡è¢«æ‘§æ¯€')
            self.computer.item.pop(0)
        else:
            print('ä½ æ„Ÿè¦ºåˆ°ç¬¬ä¸€ç™¼å­å½ˆæ˜¯ç©ºåŒ…å½ˆï¼Œä½ å°‡é¡å¤–ç²å¾—ä¸€å€‹ç‰©å“')
            self.give_participant_item(1,self.player)
        print('â˜…â˜…â˜…â˜…â˜…â˜…â˜…â˜…â˜…â˜…â˜…â˜…â˜…â˜…â˜…â˜…â˜…â˜…â˜…â˜…â˜…â˜…â˜…â˜…â˜…â˜…â˜…â˜…â˜…â˜…â˜…â˜…â˜…â˜…â˜…â˜…â˜…â˜…')
        time.sleep(2)
        return handsaw

    def one_round_Leviathan(self,live_bullet,blank,item_number):
        time.sleep(3)
        print('ç¬¬',self.round,'å±€é–‹å§‹')
        #æœ¦æœ§åœ‹ç‹æ•ˆæœ
        self.computer.fog = self.computer.fog_king

        if self.player.handcuff:
            self.player.unhandcuff()
            print('ä½ çš„æ‰‹éŠ¬è§£é™¤,å¯ä»¥è‡ªç”±è¡Œå‹•äº†')
        if self.computer.handcuff:
            self.computer.unhandcuff()
            print('åˆ©ç¶­å¦çš„æ‰‹éŠ¬è§£é™¤,å¯ä»¥è‡ªç”±è¡Œå‹•äº†')
        handsaw = False
        skip = False
        killer_queen = False
        gun_lock = False
        self.give_item(item_number)
        remain_bullet = []
        self.computer.reset_bullet_pattern(live_bullet+blank)
        print('é€™å±€æœ‰',live_bullet,'ç™¼å¯¦å½ˆ',blank,'ç™¼ç©ºåŒ…å½ˆ')
        for i in range(live_bullet):
            remain_bullet.append(True)
        for i in range(blank):
            remain_bullet.append(False)
        random.shuffle(remain_bullet)
        #ç‹¡è©åœ‹ç‹æ•ˆæœ
        for i in range(self.computer.trick_king):
            if i > len(remain_bullet)-1:
                break
            elif remain_bullet[i]:
                self.computer.set_bullet_pattern(i,'live')
            else:
                self.computer.set_bullet_pattern(i,'blank')
        #ç‰ç’ƒç¥ç¦æ•ˆæœ
        if self.player.blessing > 0:
            handsaw = self.blessing(remain_bullet,self.first_move,handsaw)

        time.sleep(2)        

        while len(remain_bullet) > 0:
            skip = False
            try_count = 0
            not_blue_print = True

            if self.player.hp <= 0:
                time.sleep(2)
                print('**************************************')
                print('ä½ æ­»äº†')
                time.sleep(2)
                return
            
            time.sleep(1)
            if self.first_move == 'ç©å®¶':
                print('==========================================')
                print('ä½ çš„å›åˆ')
                print('ä½ çš„ç‰©å“æ¬„:',self.player.item)
                print('ç©å®¶è¡€é‡:',self.player.hp,'åˆ©ç¶­å¦è¡€é‡:',self.computer.hp)  
                print('å‰©é¤˜',live_bullet,'ç™¼å¯¦å½ˆ',blank,'ç™¼ç©ºåŒ…å½ˆ')
                print('è«‹é¸æ“‡è¦åšçš„äº‹')
                print('1.å°„å‘åˆ©ç¶­å¦, 2.å°„å‘è‡ªå·±, 3.ä½¿ç”¨ç‰©å“, 4.é¡¯ç¤ºåˆ©ç¶­å¦çš„ç‰©å“æ¬„')
                if len(self.computer.bullet_pattern) != len(remain_bullet):
                    raise Exception('å­å½ˆæ•¸é‡ä¸ç¬¦')
                if self.player.blood_queen > 0 and (handsaw==False):
                    print('è…¥ç´…çš‡åä½¿ä½ ç²å¾—æ‰‹é‹¸æ•ˆæœ')
                    time.sleep(1)
                    handsaw = True
                    self.player.blood_queen -= 1
                if self.player.max_item >= 20:
                    lobby_NPC[0].unlock_achievement('é“ç†æˆ‘éƒ½æ‡‚ï¼Œä½†æ˜¯é€™å€‹èƒŒåŒ…æ€éº¼é€™éº¼å¤§')
                    time.sleep(1)
                while True:
                    try:
                        action = int(input())
                    except ValueError:
                        print('è«‹è¼¸å…¥æ­£ç¢ºçš„æ•¸å­—')
                        continue
                    if type(action) != int:
                        print('è«‹è¼¸å…¥æ­£ç¢ºçš„æ•¸å­—')
                        continue
                    if action < 1 or action > 4:
                        print('è«‹è¼¸å…¥æ­£ç¢ºçš„æ•¸å­—')
                        continue
                    break
            else:
                action = 0
                self.first_move = 'ç©å®¶'
            
            if action==1:
                if remain_bullet[0] and (self.computer.fog > 0):
                    print('æœ¦æœ§åœ‹ç‹ä½¿ä½ å°„åäº†')
                    self.computer.pop_bullet_pattern()
                    self.computer.fog -= 1
                    handsaw = False
                    killer_queen = False
                    live_bullet -= 1
                elif remain_bullet[0] and handsaw and killer_queen:
                    self.computer.hp -= 10
                    print('ä½ ä½¿ç”¨æ¼†é»‘çš‡åå°„ä¸­äº†åˆ©ç¶­å¦,é€ æˆåé»å‚·å®³')
                    if self.computer.blood_queen > 0:
                        print('è…¥ç´…çš‡åä½¿åˆ©ç¶­å¦å…ç–«é¡å¤–å‚·å®³')
                        self.computer.hp += 5
                        self.computer.blood_queen -= 1
                    handsaw = False
                    killer_queen = False
                    self.computer.pop_bullet_pattern()
                    live_bullet -= 1
                    if (self.player.hp <= 5) and (self.computer.hp <= 0):
                        time.sleep(2)
                        lobby_NPC[0].unlock_achievement('æ¼†é»‘å­å½ˆ')
                elif remain_bullet[0]&killer_queen:
                    self.computer.hp -= 5
                    print('ä½ ä½¿ç”¨æ¼†é»‘çš‡åå°„ä¸­äº†åˆ©ç¶­å¦,é€ æˆäº”é»å‚·å®³')
                    self.computer.pop_bullet_pattern()
                    live_bullet -= 1
                    killer_queen = False
                    if (self.player.hp <= 5) and (self.computer.hp <= 0):
                        time.sleep(2)
                        lobby_NPC[0].unlock_achievement('æ¼†é»‘å­å½ˆ')
                elif remain_bullet[0]&handsaw:
                    self.computer.hp -= 2
                    print('ä½ å°„ä¸­äº†åˆ©ç¶­å¦,é€ æˆå…©é»å‚·å®³')
                    if self.computer.blood_queen > 0:
                        print('è…¥ç´…çš‡åä½¿åˆ©ç¶­å¦å…ç–«é¡å¤–å‚·å®³')
                        self.computer.hp += 1
                        self.computer.blood_queen -= 1
                    handsaw = False
                    self.computer.pop_bullet_pattern()
                    live_bullet -= 1
                elif remain_bullet[0]:
                    self.computer.hp -= 1
                    print('ä½ å°„ä¸­äº†åˆ©ç¶­å¦,é€ æˆä¸€é»å‚·å®³')
                    self.computer.pop_bullet_pattern()
                    live_bullet -= 1
                else:
                    print('ä½ çš„å­å½ˆæ‰“ç©ºäº†')
                    self.computer.pop_bullet_pattern()
                    blank -= 1
                    handsaw = False
                remain_bullet.pop(0)
                handsaw = False
            elif action==2 and gun_lock :
                print('æ§ç¶“éæ”¹é€ ï¼Œé€™å±€ç„¡æ³•å†å°„å‘è‡ªå·±äº†')
                time.sleep(1)
                continue
            elif action==2:
                if remain_bullet[0]&handsaw&killer_queen:
                    self.player.hp -= 10
                    print('ä½ ç”¨æ¼†é»‘çš‡åå°„ä¸­äº†è‡ªå·±,é€ æˆåé»å‚·å®³')
                    if self.player.blood_queen > 0:
                        print('è…¥ç´…çš‡åä½¿ä½ å…ç–«é¡å¤–å‚·å®³')
                        self.player.hp += 5
                        self.player.blood_queen -= 1
                    else:
                        print('ç¯€å“€é †è®Š')
                    handsaw = False
                    killer_queen = False
                    self.computer.pop_bullet_pattern()
                    live_bullet -= 1
                elif remain_bullet[0]&killer_queen:
                    self.player.hp -= 5
                    print('ä½ ç”¨æ¼†é»‘çš‡åå°„ä¸­äº†è‡ªå·±,é€ æˆäº”é»å‚·å®³')
                    print('ç¯€å“€é †è®Š')
                    killer_queen = False
                    self.computer.pop_bullet_pattern()
                    live_bullet -= 1
                elif remain_bullet[0]&handsaw:
                    self.player.hp -= 2
                    print('ä½ å°„ä¸­äº†è‡ªå·±,é€ æˆå…©é»å‚·å®³')
                    if self.player.blood_queen > 0:
                        print('è…¥ç´…çš‡åä½¿ä½ å…ç–«é¡å¤–å‚·å®³')
                        self.player.hp += 1
                        self.player.blood_queen -= 1
                    else:
                        print('ä½ æ˜¯ç¬¨è›‹å—?')
                        lobby_NPC[0].unlock_achievement('ä½ æ˜¯ç¬¨è›‹å—')
                    handsaw = False
                    self.computer.pop_bullet_pattern()
                    live_bullet -= 1
                elif remain_bullet[0]:
                    self.player.hp -= 1
                    print('ä½ å°„ä¸­äº†è‡ªå·±,é€ æˆä¸€é»å‚·å®³')
                    self.computer.pop_bullet_pattern()
                    live_bullet -= 1
                    handsaw = False
                else:
                    print('ä½ çš„å­å½ˆæ‰“ç©ºäº†,é¡å¤–ç²å¾—ä¸€å›åˆ')
                    remain_bullet.pop(0)
                    self.computer.pop_bullet_pattern()
                    blank -= 1
                    handsaw = False
                    continue
                remain_bullet.pop(0)
                handsaw = False
            elif action==3:
                print('è«‹é¸æ“‡è¦ä½¿ç”¨çš„ç‰©å“')
                for i in range(len(self.player.item)):
                    print(i+1,'.',self.player.item[i])
                try:
                    item = int(input())
                except ValueError:
                    print('è«‹è¼¸å…¥æ­£ç¢ºçš„æ•¸å­—')
                    continue

                if item > len(self.player.item):    
                    print('è«‹è¼¸å…¥æ­£ç¢ºçš„æ•¸å­—')
                    continue
                if self.player.item[item-1] == 'æ‰‹é‹¸':
                    if handsaw:
                        print('æ‰‹é‰…æ•ˆæœå·²ç¶“å­˜åœ¨äº†')
                        continue
                    handsaw = True
                    print('ä½ ä½¿ç”¨äº†æ‰‹é‹¸,ä¸‹ä¸€ç™¼å­å½ˆé€ æˆå…©å€å‚·å®³')
                elif self.player.item[item-1] == 'å•¤é…’':
                    if remain_bullet.pop(0):
                        print('ä½ ä½¿ç”¨äº†å•¤é…’,é€€æ‰ä¸€ç™¼å¯¦å½ˆ')
                        live_bullet -= 1
                    else:
                        print('ä½ ä½¿ç”¨äº†å•¤é…’,é€€æ‰ä¸€ç™¼ç©ºåŒ…å½ˆ')
                        blank -= 1
                    self.computer.pop_bullet_pattern()
                    if len(remain_bullet) == 0:
                            print('å­å½ˆæ‰“å®Œäº†')
                            print('é€²å…¥ä¸‹ä¸€å±€')
                            return
                elif self.player.item[item-1] == 'æ‰‹æ©Ÿ':
                    print('ä½ ä½¿ç”¨äº†æ‰‹æ©Ÿ')
                    if len(remain_bullet) == 1:
                        n = 0
                    else:
                        n=random.randint(1,len(remain_bullet)-1)
                    if remain_bullet[n]:
                        print('ç¬¬',n+1,'ç™¼æ˜¯å¯¦å½ˆ')
                    else:
                        print('ç¬¬',n+1,'ç™¼æ˜¯ç©ºåŒ…å½ˆ')
                elif self.player.item[item-1] == 'è½‰æ›å™¨':
                    print('ä½ ä½¿ç”¨äº†è½‰æ›å™¨,ç¾åœ¨é€™ç™¼å­å½ˆå°‡åè½‰')
                    remain_bullet[0] = not remain_bullet[0]
                    if remain_bullet[0]:
                        live_bullet += 1
                        blank -= 1
                    else:
                        live_bullet -= 1
                        blank += 1
                elif self.player.item[item-1] == 'éæœŸè—¥ç‰©':
                    print('ä½ ä½¿ç”¨äº†éæœŸè—¥ç‰©')
                    if random.randint(0,1) or self.player.have_lust_mark:
                        self.player.hp += 2
                        print('ä½ å›å¾©äº†å…©é»è¡€é‡')
                    else:
                        self.player.hp -= 1
                        print('ä½ å¤±å»äº†ä¸€é»è¡€é‡')
                        if self.player.hp <= 0:
                            time.sleep(2)
                            print('**************************************')
                            print('ä½ æ­»äº†')
                            time.sleep(2)
                            return
                elif self.player.item[item-1] == 'æ”¾å¤§é¡':
                    print('ä½ ä½¿ç”¨äº†æ”¾å¤§é¡çœ‹åˆ° ','å¯¦å½ˆ' if remain_bullet[0] else 'ç©ºåŒ…å½ˆ')
                elif self.player.item[item-1] == 'é¦™è¸':
                    print('ä½ ä½¿ç”¨äº†é¦™è¸,å›å¾©ä¸€é»è¡€é‡')
                    self.player.hp += 1
                elif self.player.item[item-1] == 'æ‰‹éŠ¬':
                    if self.computer.handcuff:
                        print('åˆ©ç¶­å¦å·²ç¶“è¢«éŠ¬ä½äº†')
                        continue
                    print('ä½ ä½¿ç”¨äº†æ‰‹éŠ¬,åˆ©ç¶­å¦ä¸‹å›åˆç„¡æ³•è¡Œå‹•')
                    self.computer.dohandcuff()
                elif self.player.item[item-1] == 'æœªçŸ¥è—åœ–':
                    if self.player.item.count('éæœŸè—¥ç‰©') >= 3:
                        print('ä½ ç²å¾—äº†ç¦è—¥')
                        self.player.item.append('ç¦è—¥')
                        for i in range(3):
                            self.player.item.remove('éæœŸè—¥ç‰©')
                        self.player.item.remove('æœªçŸ¥è—åœ–')
                    elif (self.player.item.count('æ‰‹é‹¸') >= 2) and  (self.player.item.count('æ”¾å¤§é¡') >= 1):
                        print('ä½ ç²å¾—äº†å¤§å£å¾‘å­å½ˆ')
                        self.player.item.append('å¤§å£å¾‘å­å½ˆ')
                        for i in range(2):
                            self.player.item.remove('æ‰‹é‹¸')
                        self.player.item.remove('æ”¾å¤§é¡')
                        self.player.item.remove('æœªçŸ¥è—åœ–')
                    elif (self.player.item.count('å¤§å£å¾‘å­å½ˆ') >= 1) and (self.player.item.count('è…ä¸Šè…ºç´ ') >= 1) and (self.player.item.count('è½‰æ›å™¨') >= 1):
                        print('ä½ ç²å¾—äº†æ¦´å½ˆç ²')
                        self.player.item.append('æ¦´å½ˆç ²')
                        self.player.item.remove('è…ä¸Šè…ºç´ ')
                        self.player.item.remove('å¤§å£å¾‘å­å½ˆ')
                        self.player.item.remove('è½‰æ›å™¨')
                        self.player.item.remove('æœªçŸ¥è—åœ–')
                    elif (self.player.item.count('å•¤é…’') >= 2) and (self.player.item.count('é¦™è¸') >= 1) and ((live_bullet+blank) >= 3):
                        print('ä½ ç²å¾—äº†å½ˆè—¥åŒ…')
                        self.player.item.remove('å•¤é…’')
                        self.player.item.remove('å•¤é…’')
                        self.player.item.remove('é¦™è¸')
                        self.player.item.append('å½ˆè—¥åŒ…')
                        self.player.item.remove('æœªçŸ¥è—åœ–')
                    elif len(self.player.item) == self.player.max_item:
                        print('ä½ ç²å¾—äº†æ“´å¢èƒŒåŒ…,ç‰©å“æ¬„å¢åŠ 2æ ¼')
                        self.player.item = []
                        self.player.max_item += 2
                    else:
                        print('ä½ çš„ç‰©å“ä¸è¶³ä»¥åˆæˆ')
                        continue
                    not_blue_print = False
                elif self.player.item[item-1] == 'ç¦è—¥':
                    #70%æ©Ÿç‡è¡€é‡ç¿»å€ä¸¦+3ï¼Œ30%è¡€é‡é™ä½åˆ°1é»ï¼Œè‹¥è¡€é‡ç‚º1å‰‡æ­»äº¡
                    print('ä½ ä½¿ç”¨äº†ç¦è—¥')
                    if random.randint(1,10) <= 7 or self.player.have_lust_mark:
                        self.player.hp *= 2
                        self.player.hp += 3
                        print('ä½ çš„è¡€é‡å¤§å¹…æå‡,ç¾åœ¨è¡€é‡ç‚º',self.player.hp)
                    else:
                        if self.player.hp == 1:
                            self.player.hp = 0
                            print('ä½ æ­»äº†')
                            time.sleep(2)
                            lobby_NPC[0].unlock_achievement('å¸æ¯’æœ‰ç¤™èº«å¿ƒå¥åº·ï¼Œè«‹å‹¿éš¨æ„å˜—è©¦')
                            time.sleep(2)    
                            return
                        self.player.hp = 1
                        print('ä½ ä¸­æ¯’äº†ï¼Œè¡€é‡é™ç‚º1')
                elif self.player.item[item-1] == 'å¤§å£å¾‘å­å½ˆ':
                    #å°‡ç›®å‰é€™ç™¼ç›´æ¥å­å½ˆæ›¿æ›æˆå¤§å£å¾‘å­å½ˆä¸¦ç›´æ¥ç™¼å°„ï¼Œé€ æˆ3é»å‚·å®³ï¼Œå¦‚æœæœ‰ä½¿ç”¨æ‰‹é‹¸å‰‡é€ æˆ6é»å‚·å®³
                    if self.computer.fog > 0:
                        print('æœ¦æœ§åœ‹ç‹ä½¿ä½ å°„åäº†')
                        self.computer.fog -= 1
                        handsaw = False
                    elif handsaw:
                        self.computer.hp -= 6
                        print('ä½ ç™¼å°„äº†å¤§å£å¾‘å­å½ˆ,é€ æˆ6é»å‚·å®³')
                    else:
                        self.computer.hp -= 3
                        print('ä½ ç™¼å°„äº†å¤§å£å¾‘å­å½ˆ,é€ æˆ3é»å‚·å®³')
                    if remain_bullet.pop(0):
                        live_bullet -= 1
                    else:
                        blank -= 1
                    self.computer.pop_bullet_pattern()
                    self.player.item.pop(item-1)
                    skip = True
                    handsaw = False
                elif self.player.item[item-1] == 'æ¦´å½ˆç ²':
                    #å°‡è‡ªèº«è¡€é‡é™ä½è‡³1é»ï¼Œä¸¦ç™¼å°„ç¾åœ¨é€™ç™¼å­å½ˆï¼Œè‹¥ç‚ºå¯¦å½ˆå‰‡é€ æˆ(é™ä½çš„è¡€é‡+1)é»å‚·å®³ï¼Œä½¿ç”¨æ‰‹é‹¸å‰‡é€ æˆå…©å€å‚·å®³ï¼Œè‹¥ç‚ºç©ºåŒ…å½ˆå‰‡ä¸é€ æˆå‚·å®³ï¼Œä½¿ç”¨å¾Œè¼ªåˆ°åˆ©ç¶­å¦çš„å›åˆ
                    damage = self.player.hp
                    self.player.hp = 1
                    if remain_bullet.pop(0):
                        if self.computer.fog > 0:
                            print('æœ¦æœ§åœ‹ç‹ä½¿ä½ å°„åäº†')
                            self.computer.fog -= 1
                            handsaw = False
                        elif handsaw:
                            self.computer.hp -= 2*damage
                            print('ä½ ç™¼å°„äº†æ¦´å½ˆç ²,é€ æˆ',2*damage,'é»å‚·å®³')
                            handsaw = False
                        else:
                            self.computer.hp -= damage
                            print('ä½ ç™¼å°„äº†æ¦´å½ˆç ²,é€ æˆ',damage,'é»å‚·å®³')
                        live_bullet -= 1
                    else:
                        print('ä½ ç™¼å°„äº†æ¦´å½ˆç ²,ä½†æ˜¯å­å½ˆæ‰“ç©ºäº†')
                        blank -= 1
                    self.computer.pop_bullet_pattern()
                    self.player.item.pop(item-1)
                    skip = True
                elif self.player.item[item-1] == 'å½ˆè—¥åŒ…':
                    #å°åˆ©ç¶­å¦é€ æˆå‰©é¤˜å¯¦å½ˆæ•¸é‡çš„å‚·å®³ï¼Œä¹‹å¾Œç”¨å¯¦å½ˆå’Œç©ºåŒ…å½ˆéš¨æ©Ÿå°‡å½ˆè—¥å¡«æ»¿è‡³8ç™¼
                    damage = live_bullet
                    if self.computer.fog > 0:
                        if damage > self.computer.fog:
                            damage -= self.computer.fog
                            self.computer.fog = 0
                            if handsaw:
                                damage *= 2
                            self.computer.hp -= damage
                            print('ä½ ä½¿ç”¨äº†å½ˆè—¥åŒ…')
                            print('æœ¦æœ§åœ‹ç‹ä½¿ä½ å°„åäº†éƒ¨åˆ†å­å½ˆ,å°åˆ©ç¶­å¦é€ æˆ',damage,'é»å‚·å®³')
                        else:
                            print('ä½ ä½¿ç”¨äº†å½ˆè—¥åŒ…ï¼Œä½†æ˜¯æœ¦æœ§åœ‹ç‹ä½¿ä½ å°„åäº†æ‰€æœ‰å­å½ˆ') 
                            self.computer.fog -= damage
                    else:
                        if handsaw:
                            damage *= 2
                        print('ä½ ä½¿ç”¨äº†å½ˆè—¥åŒ…,å°åˆ©ç¶­å¦é€ æˆ',damage,'é»å‚·å®³')
                        self.computer.hp -= damage
                    handsaw = False
                    remain_bullet = []
                    live_bullet = 0
                    blank = 0
                    for i in range(8-len(remain_bullet)):
                        if random.randint(0,1):
                            remain_bullet.append(True)
                            live_bullet += 1
                        else:
                            remain_bullet.append(False)
                            blank += 1
                    random.shuffle(remain_bullet)
                    print('å½ˆè—¥å·²é‡æ–°è£å¡«')
                    self.computer.reset_bullet_pattern(live_bullet+blank)
                    if self.player.blessing > 0:
                        handsaw = self.blessing(remain_bullet,'ç©å®¶',handsaw)
                elif self.player.item[item-1] == 'æ¼†é»‘çš‡å':
                    #ç§»é™¤é›™æ–¹æ‰€æœ‰é“å…·ï¼Œå°‡å½ˆå¤¾è£å¡«ç‚ºä¸€ç™¼ç©ºåŒ…å½ˆä¸€ç™¼å¯¦å½ˆï¼Œé€™ç™¼å¯¦å½ˆå°‡é€ æˆ5é»å‚·å®³
                    print('ä½ ä½¿ç”¨äº†æ¼†é»‘çš‡åï¼Œå½ˆè—¥è£å¡«ç‚ºä¸€ç™¼ç©ºåŒ…å½ˆä¸€ç™¼5é»å‚·å®³å¯¦å½ˆï¼Œç¥ˆç¦±å§!')
                    self.player.item = []
                    self.computer.item = []
                    remain_bullet = [True,False]
                    live_bullet = 1
                    blank = 1
                    self.computer.reset_bullet_pattern(live_bullet+blank)
                    random.shuffle(remain_bullet)
                    killer_queen = True
                    not_blue_print = False
                    self.player.queen_used.append('æ¼†é»‘çš‡å')
                    if self.player.blessing > 0:
                        handsaw = self.blessing(remain_bullet,'ç©å®¶',handsaw)
                elif self.player.item[item-1] == 'ç¥è–çš‡å':
                    #å›3é»è¡€é‡ï¼ŒèƒŒåŒ…ä¸Šé™+2ï¼Œç²å¾—3å€‹éš¨æ©Ÿç‰©å“
                    print('ä½ ä½¿ç”¨äº†ç¥è–çš‡åï¼Œå›å¾©3é»è¡€é‡ï¼ŒèƒŒåŒ…ä¸Šé™+2ï¼Œç²å¾—3å€‹éš¨æ©Ÿç‰©å“')
                    self.player.hp += 3
                    self.player.max_item += 3
                    self.give_participant_item(3,self.player)
                    self.player.max_item -= 1
                    self.player.queen_used.append('ç¥è–çš‡å')
                elif self.player.item[item-1] == 'è”šè—çš‡å':
                    #ç©å®¶çš„å›åˆçµæŸæ™‚ï¼Œç²å¾—ä¸€å€‹éš¨æ©Ÿç‰©å“
                    print('ä½ ä½¿ç”¨äº†è”šè—çš‡åï¼Œè¼ªåˆ°åˆ©ç¶­å¦çš„å›åˆæ™‚ä½ å°‡ç²å¾—ä¸€å€‹éš¨æ©Ÿç‰©å“')
                    self.player.item_queen += 1   
                    self.player.queen_used.append('è”šè—çš‡å')
                    if self.player.item_queen >= 5 :
                        time.sleep(1)
                        lobby_NPC[0].unlock_achievement('é“å…·æ°¸å‹•æ©Ÿ')
                        time.sleep(1)
                elif self.player.item[item-1] == 'è…¥ç´…çš‡å':
                    #ç©å®¶çš„å›åˆé–‹å§‹æ™‚ï¼Œé™„åŠ æ‰‹é‰…æ•ˆæœ
                    print('ä½ ä½¿ç”¨äº†è…¥ç´…çš‡åï¼Œæ¯å›åˆç²å¾—æ‰‹é‹¸æ•ˆæœä¸¦å…ç–«æ‰‹é‰…çš„é¡å¤–å‚·å®³ï¼Œå¯ä»¥è§¸ç™¼äº”æ¬¡')
                    self.player.blood_queen += 5       
                    self.player.queen_used.append('è…¥ç´…çš‡å') 
                elif self.player.item[item-1] == 'ç‰ç’ƒçš‡å':
                    #æ¯æ¬¡é‡æ–°è£å½ˆ(å›åˆé–‹å§‹ã€å½ˆè—¥åŒ…ã€æ¼†é»‘çš‡å)æ™‚é€šéˆç¬¬ä¸€é¡†å­å½ˆï¼Œè‹¥ç‚ºå¯¦å½ˆå‰‡é™„åŠ æ‰‹é‰…æ•ˆæœ
                    #è‹¥ç‚ºç©ºåŒ…å½ˆå‰‡å›å¾©ä¸€é»è¡€é‡ä¸¦æ¶ˆé™¤åˆ©ç¶­å¦ä¸€å€‹é“å…·æˆ–ç²å¾—ä¸€å€‹éš¨æ©Ÿé“å…·
                    #ä½¿ç”¨ç•¶ä¸‹æ¸…ç©ºåˆ©ç¶­å¦çš„é“å…·ã€æ¸…ç©ºå½ˆå¤¾ä¸¦è£ä¸Šä¸€é¡†å¯¦å½ˆ
                    print('ä½ ç²å¾—äº†ç‰ç’ƒçš„ç¥ç¦ï¼Œåˆ©ç¶­å¦çš„é“å…·è¢«æ¸…ç©ºï¼Œå½ˆå¤¾é‡æ–°è£å¡«äº†')
                    time.sleep(2)
                    lobby_NPC[0].unlock_achievement('ç‰ç’ƒçš„ç¥ç¦')
                    self.computer.item = [] 
                    self.computer.reset_bullet_pattern(1)
                    remain_bullet = [True]
                    if not handsaw:
                        handsaw = True
                        print('ä½ ç²å¾—äº†æ‰‹é‹¸æ•ˆæœ')
                    time.sleep(1)
                    live_bullet = 1
                    blank = 0
                    self.player.blessing += 1
                    self.player.queen_used.append('ç‰ç’ƒçš‡å')                          
                elif self.player.item[item-1] == 'è…ä¸Šè…ºç´ ':
                    print('ä½ ä½¿ç”¨äº†è…ä¸Šè…ºç´ ,å¯ä»¥å·å–åˆ©ç¶­å¦çš„ç‰©å“')
                    if len(self.computer.item) == 0:
                        print('åˆ©ç¶­å¦æ²’æœ‰ç‰©å“å¯ä»¥å·å–')
                        continue
                    print('è«‹é¸æ“‡è¦å·å–çš„ç‰©å“:')
                    for i in range(len(self.computer.item)):
                        print(i+1,'.',self.computer.item[i])
                    try:
                        steal = int(input())
                    except ValueError:
                        print('è«‹è¼¸å…¥æ­£ç¢ºçš„æ•¸å­—')
                        time.sleep(1)
                        continue  
                    if steal > len(self.computer.item):
                        print('è«‹è¼¸å…¥æ­£ç¢ºçš„æ•¸å­—')
                        continue
                    elif steal <= 0:
                        print('è«‹è¼¸å…¥æ­£ç¢ºçš„æ•¸å­—')
                        continue
                    #é¦¬ä¸Šä½¿ç”¨é¸æ“‡çš„ç‰©å“ 
                    if self.computer.item[steal-1] == 'æ‰‹é‹¸':
                        if handsaw:
                            print('æ‰‹é‰…æ•ˆæœå·²ç¶“å­˜åœ¨äº†')
                            continue
                        handsaw = True
                        print('ä½ ä½¿ç”¨äº†æ‰‹é‹¸,ä¸‹ä¸€ç™¼å­å½ˆé€ æˆå…©å€å‚·å®³')
                    elif self.computer.item[steal-1] == 'å•¤é…’':
                        if remain_bullet.pop(0):
                            print('ä½ ä½¿ç”¨äº†å•¤é…’,é€€æ‰ä¸€ç™¼å¯¦å½ˆ')
                            live_bullet -= 1
                        else:
                            print('ä½ ä½¿ç”¨äº†å•¤é…’,é€€æ‰ä¸€ç™¼ç©ºåŒ…å½ˆ')
                            blank -= 1
                        self.computer.pop_bullet_pattern()
                        if len(remain_bullet) == 0:
                            print('å­å½ˆæ‰“å®Œäº†')
                            print('é€²å…¥ä¸‹ä¸€å±€')
                            return
                    elif self.computer.item[steal-1] == 'æ‰‹æ©Ÿ':
                        print('ä½ ä½¿ç”¨äº†æ‰‹æ©Ÿ')
                        if len(remain_bullet) == 1:
                            n = 0
                        else:
                            n=random.randint(1,len(remain_bullet)-1)
                        if remain_bullet[n]:
                            print('ç¬¬',n+1,'ç™¼æ˜¯å¯¦å½ˆ')
                        else:
                            print('ç¬¬',n+1,'ç™¼æ˜¯ç©ºåŒ…å½ˆ')
                    elif self.computer.item[steal-1] == 'è½‰æ›å™¨':
                        print('ä½ ä½¿ç”¨äº†è½‰æ›å™¨,ç¾åœ¨é€™ç™¼å­å½ˆå°‡åè½‰')
                        remain_bullet[0] = not remain_bullet[0]
                        if remain_bullet[0]:
                            live_bullet += 1
                            blank -= 1
                        else:
                            live_bullet -= 1
                            blank += 1
                    elif self.computer.item[steal-1] == 'éæœŸè—¥ç‰©':
                        print('ä½ ä½¿ç”¨äº†éæœŸè—¥ç‰©')
                        if random.randint(0,1) or self.player.have_lust_mark:
                            self.player.hp += 2
                            print('ä½ å›å¾©äº†å…©é»è¡€é‡')
                        else:
                            self.player.hp -= 1
                            print('ä½ å¤±å»äº†ä¸€é»è¡€é‡')
                            if self.player.hp <= 0:
                                time.sleep(2)
                                print('**************************************')
                                print('ä½ æ­»äº†')
                                time.sleep(2)
                                return
                    elif self.computer.item[steal-1] == 'æ”¾å¤§é¡':
                        print('ä½ ä½¿ç”¨äº†æ”¾å¤§é¡çœ‹åˆ° ','å¯¦å½ˆ' if remain_bullet[0] else 'ç©ºåŒ…å½ˆ')
                    elif self.computer.item[steal-1] == 'é¦™è¸':
                        print('ä½ ä½¿ç”¨äº†é¦™è¸,å›å¾©ä¸€é»è¡€é‡')
                        self.player.hp += 1
                    elif self.computer.item[steal-1] == 'æ‰‹éŠ¬':
                        if self.computer.handcuff:
                            print('åˆ©ç¶­å¦å·²ç¶“è¢«éŠ¬ä½äº†')
                            continue
                        print('ä½ ä½¿ç”¨äº†æ‰‹éŠ¬,åˆ©ç¶­å¦ä¸‹å›åˆç„¡æ³•è¡Œå‹•')
                        self.computer.dohandcuff()
                    elif self.computer.item[steal-1] == 'æœªçŸ¥è—åœ–':
                        self.player.item.append('æœªçŸ¥è—åœ–')
                        print('ä½ ç²å¾—äº†æœªçŸ¥è—åœ–')
                    elif self.computer.item[steal-1] == 'ç¦è—¥':
                        print('ä½ ä½¿ç”¨äº†ç¦è—¥')
                        if random.randint(1,10) <= 7 or self.player.have_lust_mark:
                            self.player.hp *= 2
                            self.player.hp += 3
                            print('ä½ çš„è¡€é‡å¤§å¹…æå‡,ç¾åœ¨è¡€é‡ç‚º',self.player.hp)
                        else:
                            if self.player.hp == 1:
                                print('ä½ æ­»äº†')
                                self.player.hp = 0
                                time.sleep(2)
                                lobby_NPC[0].unlock_achievement('å¸æ¯’æœ‰ç¤™èº«å¿ƒå¥åº·ï¼Œè«‹å‹¿éš¨æ„å˜—è©¦')
                                time.sleep(2)    
                                return
                            self.player.hp = 1
                            print('ä½ ä¸­æ¯’äº†ï¼Œè¡€é‡é™ç‚º1')
                    elif self.computer.item[steal-1] == 'å¤§å£å¾‘å­å½ˆ':
                        if self.computer.fog > 0:
                            print('æœ¦æœ§åœ‹ç‹ä½¿ä½ å°„åäº†')
                            self.computer.fog -= 1
                            handsaw = False
                        elif handsaw:
                            self.computer.hp -= 6
                            print('ä½ ä½¿ç”¨äº†å¤§å£å¾‘å­å½ˆ,é€ æˆ6é»å‚·å®³')
                        else:
                            self.computer.hp -= 3
                            print('ä½ ä½¿ç”¨äº†å¤§å£å¾‘å­å½ˆ,é€ æˆ3é»å‚·å®³')
                        if remain_bullet.pop(0):
                            live_bullet -= 1
                        else:
                            blank -= 1
                        self.computer.pop_bullet_pattern()
                        handsaw = False
                    elif self.computer.item[steal-1] == 'æ¦´å½ˆç ²':
                        damage = self.player.hp 
                        self.player.hp = 1
                        if remain_bullet.pop(0):
                            if self.computer.fog > 0:
                                print('æœ¦æœ§åœ‹ç‹ä½¿ä½ å°„åäº†')
                                self.computer.fog -= 1
                                handsaw = False
                            elif handsaw:
                                self.computer.hp -= 2*damage
                                print('ä½ ä½¿ç”¨äº†æ¦´å½ˆç ²,é€ æˆ',2*damage,'é»å‚·å®³')
                                handsaw = False
                                if damage >= 15:
                                    lobby_NPC[0].unlock_achievement('å·¨ç ²')
                            else:
                                self.computer.hp -= damage
                                print('ä½ ä½¿ç”¨äº†æ¦´å½ˆç ²,é€ æˆ',damage,'é»å‚·å®³')
                                if damage >= 30:
                                    lobby_NPC[0].unlock_achievement('å·¨ç ²')
                            live_bullet -= 1
                        else:
                            print('ä½ ä½¿ç”¨äº†æ¦´å½ˆç ²,ä½†æ˜¯å­å½ˆæ‰“ç©ºäº†')
                            blank -= 1
                            handsaw = False
                        self.computer.pop_bullet_pattern()
                    elif self.computer.item[steal-1] == 'å½ˆè—¥åŒ…':
                        damage = live_bullet
                        if self.computer.fog > 0:
                            if damage > self.computer.fog:
                                damage -= self.computer.fog
                                self.computer.fog = 0
                                if handsaw:
                                    damage *= 2
                                self.computer.hp -= damage
                                print('ä½ ä½¿ç”¨äº†å½ˆè—¥åŒ…')
                                print('æœ¦æœ§åœ‹ç‹ä½¿ä½ å°„åäº†éƒ¨åˆ†å­å½ˆ,å°åˆ©ç¶­å¦é€ æˆ',damage,'é»å‚·å®³')
                            else:
                                print('ä½ ä½¿ç”¨äº†å½ˆè—¥åŒ…ï¼Œä½†æ˜¯æœ¦æœ§åœ‹ç‹ä½¿ä½ å°„åäº†æ‰€æœ‰å­å½ˆ') 
                                self.computer.fog -= damage
                        else:
                            if handsaw:
                                damage *= 2
                            print('ä½ ä½¿ç”¨äº†å½ˆè—¥åŒ…,å°åˆ©ç¶­å¦é€ æˆ',damage,'é»å‚·å®³')
                            self.computer.hp -= damage
                        handsaw = False
                        remain_bullet = []
                        live_bullet = 0
                        blank = 0
                        for i in range(8-len(remain_bullet)):
                            if random.randint(0,1):
                                remain_bullet.append(True)
                                live_bullet += 1
                            else:
                                remain_bullet.append(False)
                                blank += 1
                        random.shuffle(remain_bullet)
                        print('å½ˆè—¥å·²é‡æ–°è£å¡«')
                        self.computer.reset_bullet_pattern(live_bullet+blank)
                        if self.player.blessing > 0:
                            handsaw = self.blessing(remain_bullet,'ç©å®¶',handsaw)
                        
                    elif self.computer.item[steal-1] == 'è…ä¸Šè…ºç´ ':
                        print('ä½ ä¸èƒ½å·å–è…ä¸Šè…ºç´ ')
                        time.sleep(2)
                        lobby_NPC[0].unlock_achievement('å°±èªªäº†ä¸è¡Œ')
                        continue
                    else:
                        print('ä½ ä¸èƒ½å·å–åœ‹ç‹é“å…·')
                        continue
                    self.computer.item.pop(steal-1)

                if not_blue_print and not skip: 
                    self.player.item.pop(item-1)
                time.sleep(2)
                if self.computer.hp <= 0:
                    time.sleep(2)
                    print('**************************************')
                    print('ä½ è´äº†')
                    time.sleep(2)
                    return
                if not skip:
                    continue
            elif action==4:
                print('åˆ©ç¶­å¦çš„ç‰©å“æ¬„:',self.computer.item)
                time.sleep(4)
                continue
            if self.computer.hp <= 0:
                time.sleep(2)
                print('**************************************')
                print('ä½ è´äº†')
                time.sleep(2)
                return
            if self.player.hp <= 0:
                time.sleep(2)
                print('**************************************')
                print('ä½ æ­»äº†')
                time.sleep(2)
                return
            if len(remain_bullet) == 0:
                print('å­å½ˆæ‰“å®Œäº†')
                print('é€²å…¥ä¸‹ä¸€å±€')
                return
            if self.player.item_queen > 0:
                print('è”šè—çš‡åä½¿ä½ ç²å¾—éš¨æ©Ÿç‰©å“')
                time.sleep(1)
            for i in range(self.player.item_queen):
                self.give_participant_item(1,self.player)
            print('==========================================')
            print('åˆ©ç¶­å¦çš„å›åˆ')
            print('==========================================')
            time.sleep(1)
            try_count = 0
            not_blue_print = True
            if action == 0:
                achievement_first_dead = True
            else:
                achievement_first_dead = False
            '''
            åˆ©ç¶­å¦é“å…·èªªæ˜:
            åœ‹ç‹å’Œçš‡åæ•ˆæœä¸è®Š
            1.æœªçŸ¥è—åœ–
                è®“åˆ©ç¶­å¦ç²å¾—3å€‹éš¨æ©Ÿç‰©å“
            2.æ‰‹é‰…
                ç›´æ¥å°ç©å®¶é€ æˆ1é»å‚·å®³
            3.é¦™è¸
                å°‡é€™ç™¼ç©ºåŒ…å½ˆè®Šæˆå¯¦å½ˆï¼Œè‹¥æ˜¯å¯¦å½ˆå‰‡é€€å½ˆ
            4.å•¤é…’
                å›å¾©ä¸€é»è¡€é‡
            5.æ‰‹æ©Ÿ
                æ”¹è®Šå‰©é¤˜æ‰€æœ‰å­å½ˆçš„é †åºï¼Œå·çœ‹å…©ç™¼å­å½ˆ
            6.è½‰æ›å™¨
                è½‰æ›æ‰€æœ‰å­å½ˆ
            7.éæœŸè—¥ç‰©
                (ç”¨å¸çš„(X
                ç²å¾—ä¸€å±¤æœ¦æœ§åœ‹ç‹æ•ˆæœ
            8.æ”¾å¤§é¡
                å¢åŠ ä¸€æ ¼èƒŒåŒ…ç©ºé–“ï¼Œè£å¡«3ç™¼éš¨æ©Ÿå­å½ˆ
            9.è…ä¸Šè…ºç´ 
                ç²å¾—æ‰‹é‰…æ•ˆæœ
            10.æ‰‹éŠ¬
                æ‰“å®Œå‰©é¤˜å­å½ˆå‰å…©äººçš†ç„¡æ³•å†å°„å‘è‡ªå·±
            11.ç¦è—¥
                ç²å¾—é¡å¤–å›åˆ(å°±æ˜¯æ‰‹éŠ¬æ•ˆæœ)ï¼Œç²å¾—æ‰‹é‰…æ•ˆæœ
            12.å¤§å£å¾‘å­å½ˆ
                æŠŠæ‰€æœ‰ç©ºåŒ…å½ˆè®Šæˆå¯¦å½ˆ
            13.æ¦´å½ˆç ²
                é€ æˆå‰©é¤˜å­å½ˆæ•¸é‡çš„å‚·å®³
            14.å½ˆè—¥åŒ…
                é€€åˆ°å‰©ä¸‹ä¸€ç™¼å­å½ˆï¼Œæ¯é€€ä¸€ç™¼å¯¦å½ˆå›ä¸€é»è¡€ï¼Œæ¯é€€ä¸€ç™¼ç©ºåŒ…å½ˆé€ æˆä¸€é»å‚·å®³

            '''

            if self.computer.handcuff:
                print('åˆ©ç¶­å¦è¢«æ‰‹éŠ¬éŠ¬ä½äº†,ç„¡æ³•è¡Œå‹•')
                self.computer.unhandcuff()
                continue

            skip = False
            not_blue_print = True

            while True:
                #åˆ©ç¶­å¦é€²è¡Œå‰©é¤˜å­å½ˆåˆ†æ
                if (live_bullet-self.computer.known_live) <= 0:
                    for i in range(len(self.computer.bullet_pattern)):
                        if self.computer.bullet_pattern[i] == 'unknown':
                            self.computer.set_bullet_pattern(i,'blank')
                elif (blank-self.computer.known_blank) <= 0:
                    for i in range(len(self.computer.bullet_pattern)):
                        if self.computer.bullet_pattern[i] == 'unknown':
                            self.computer.set_bullet_pattern(i,'live')
                if self.player.hp <= 0:
                    time.sleep(2)
                    print('**************************************')
                    print('ä½ æ­»äº†')
                    time.sleep(2)
                    return
                time.sleep(2)
                if len(remain_bullet) == 0:
                    print('å­å½ˆæ‰“å®Œäº†')
                    print('é€²å…¥ä¸‹ä¸€å±€')
                    return
                if (self.computer.rage_king > 0) and (handsaw == False):
                    print('ç‹‚æš´åœ‹ç‹çµ¦äºˆåˆ©ç¶­å¦æ‰‹é‰…æ•ˆæœ')
                    time.sleep(1)
                    handsaw = True
                    self.computer.rage_king -= 1
                if self.computer.item.count('è…¥ç´…çš‡å') > 0 & (not handsaw):
                    print('è…¥ç´…çš‡åä½¿åˆ©ç¶­å¦ç²å¾—æ‰‹é‹¸æ•ˆæœ')
                    time.sleep(1)
                    handsaw = True
                    self.computer.blood_queen -= 1
                #åˆ©ç¶­å¦çš„è¡Œå‹•åˆ¤æ–·
                if len(self.computer.bullet_pattern) != len(remain_bullet):
                    raise Exception('å­å½ˆæ•¸é‡ä¸ç¬¦')
                if len(self.computer.item) > 3 :
                    if try_count >= 5:
                        action = random.randint(1,2)
                        if self.computer.bullet_pattern[0] == 'live':
                            action = 1
                        elif self.computer.bullet_pattern[0] == 'blank':
                            action = 2
                    else:
                        action = 3
                elif ('æœ¦æœ§åœ‹ç‹' in self.computer.item or 'ç‹‚æš´åœ‹ç‹' in self.computer.item or 'ç‹¡è©åœ‹ç‹' in self.computer.item or 'è²ªå©ªåœ‹ç‹' in self.computer.item):
                    action = 3
                elif self.computer.bullet_pattern[0] == 'live':
                    action = 1
                elif self.computer.bullet_pattern[0] == 'blank':
                    action = 2
                elif len(self.computer.item) == 0:
                    action = random.randint(1,2)
                else:
                    action = random.randint(1,3)
                if (self.computer.bullet_pattern[0] == 'live') and (action == 2):
                    action = 1
                elif (self.computer.bullet_pattern[0] == 'blank') and (action == 1):
                    action = 2
                if (live_bullet > blank) & (action == 2):
                    action = 1
                if handsaw & (action == 2):
                    action = 1
                #åˆ©ç¶­å¦æ‰‹éŠ¬æ•ˆæœ
                if gun_lock and (action == 2):
                    action = 1
                
                if (self.computer.bullet_pattern[0] == 'live') & ('è…ä¸Šè…ºç´ ' in self.computer.item) and not handsaw:  
                    print('åˆ©ç¶­å¦ä½¿ç”¨äº†è…ä¸Šè…ºç´ ï¼Œçœ¼ç¥è®Šå¾—ç‹‚æš´')
                    self.computer.item.remove('è…ä¸Šè…ºç´ ')
                    handsaw = True
                    continue
                if 'æœªçŸ¥è—åœ–' in self.computer.item:
                    #ä½¿ç”¨æœªçŸ¥è—åœ–å¾—åˆ°3å€‹ç‰©å“
                    print('åˆ©ç¶­å¦æ’•ç¢æœªçŸ¥è—åœ–ï¼Œæ¥è‘—æ†‘ç©ºè®Šå‡ºäº†ä¸‰æ¨£ç‰©å“')
                    self.give_Leviathan_item(3,self.computer)
                    self.computer.item.remove('æœªçŸ¥è—åœ–')
                    continue
                    
                #åˆ©ç¶­å¦çš„è¡Œå‹•é¸é …å’Œç©å®¶ç›¸åŒ
                if action==1:
                    try_count = 0
                    if remain_bullet[0]&handsaw&killer_queen:
                        self.player.hp -= 10
                        print('åˆ©ç¶­å¦ä½¿ç”¨æ¼†é»‘çš‡åå°„ä¸­äº†ä½ ,é€ æˆåé»å‚·å®³')
                        if self.player.blood_queen > 0:
                            print('è…¥ç´…çš‡åä½¿ä½ å…ç–«é¡å¤–å‚·å®³')
                            self.player.hp += 5
                            self.player.blood_queen -= 1
                        handsaw = False
                        killer_queen = False
                        live_bullet -= 1
                        self.computer.pop_bullet_pattern()
                    elif remain_bullet[0]&killer_queen:
                        self.player.hp -= 5
                        print('åˆ©ç¶­å¦ä½¿ç”¨æ¼†é»‘çš‡åå°„ä¸­äº†ä½ ,é€ æˆäº”é»å‚·å®³')
                        live_bullet -= 1
                        self.computer.pop_bullet_pattern()
                        killer_queen = False
                    elif remain_bullet[0]&handsaw:
                        self.player.hp -= 2
                        print('åˆ©ç¶­å¦å°„ä¸­äº†ä½ ,é€ æˆå…©é»å‚·å®³')
                        if self.player.blood_queen > 0:
                            print('è…¥ç´…çš‡åä½¿ä½ å…ç–«é¡å¤–å‚·å®³')
                            self.player.hp += 1
                            self.player.blood_queen -= 1
                        handsaw = False
                        live_bullet -= 1
                        self.computer.pop_bullet_pattern()
                    elif remain_bullet[0]:
                        self.player.hp -= 1
                        print('åˆ©ç¶­å¦å°„ä¸­äº†ä½ ,é€ æˆä¸€é»å‚·å®³')
                        live_bullet -= 1
                        self.computer.pop_bullet_pattern()
                    else:
                        print('åˆ©ç¶­å¦çš„å­å½ˆæ‰“ç©ºäº†')
                        blank -= 1
                        self.computer.pop_bullet_pattern()
                        handsaw = False
                    remain_bullet.pop(0)
                    handsaw = False
                elif action==2:
                    try_count = 0
                    if remain_bullet[0] and (self.computer.fog > 0):
                        print('æœ¦æœ§åœ‹ç‹ä½¿åˆ©ç¶­å¦å°„åäº†')
                        self.computer.fog -= 1
                        handsaw = False
                        killer_queen = False
                        live_bullet -= 1
                        self.computer.pop_bullet_pattern()
                    elif remain_bullet[0]&handsaw&killer_queen:
                        self.computer.hp -= 10
                        print('åˆ©ç¶­å¦ä½¿ç”¨æ¼†é»‘çš‡åå°„ä¸­äº†è‡ªå·±,é€ æˆåé»å‚·å®³')
                        if self.computer.blood_queen > 0:
                            print('è…¥ç´…çš‡åä½¿ä½ å…ç–«é¡å¤–å‚·å®³')
                            self.computer.hp += 5
                            self.computer.blood_queen -= 1
                        else:
                            print('ä½ é€ƒéäº†ä¸€æˆª')
                        handsaw = False
                        killer_queen = False
                        live_bullet -= 1
                        self.computer.pop_bullet_pattern()
                    elif remain_bullet[0]&killer_queen:
                        self.computer.hp -= 5
                        print('åˆ©ç¶­å¦ä½¿ç”¨æ¼†é»‘çš‡åå°„ä¸­äº†è‡ªå·±,é€ æˆäº”é»å‚·å®³')
                        print('ä½ é€ƒéäº†ä¸€æˆª')
                        live_bullet -= 1
                        self.computer.pop_bullet_pattern()
                        killer_queen = False
                    elif remain_bullet[0]&handsaw:
                        self.computer.hp -= 2
                        print('åˆ©ç¶­å¦å°„ä¸­äº†è‡ªå·±,é€ æˆå…©é»å‚·å®³')
                        if self.computer.blood_queen > 0:
                            print('è…¥ç´…çš‡åä½¿åˆ©ç¶­å¦å…ç–«é¡å¤–å‚·å®³')
                            self.computer.hp += 1
                            self.computer.blood_queen -= 1
                        handsaw = False
                        live_bullet -= 1
                        self.computer.pop_bullet_pattern()
                    elif remain_bullet[0]:
                        self.computer.hp -= 1
                        print('åˆ©ç¶­å¦å°„ä¸­äº†è‡ªå·±,é€ æˆä¸€é»å‚·å®³')
                        live_bullet -= 1
                        self.computer.pop_bullet_pattern()
                        handsaw = False
                    else:
                        print('åˆ©ç¶­å¦å°„å‘è‡ªå·±ï¼Œå­å½ˆæ‰“ç©ºäº†,é¡å¤–ç²å¾—ä¸€å›åˆ')
                        remain_bullet.pop(0)
                        self.computer.pop_bullet_pattern()
                        blank -= 1
                        handsaw = False
                        continue
                    remain_bullet.pop(0)
                    handsaw = False
                elif action==3:
                    item = random.randint(0,len(self.computer.item)-1)
                    if  ((not any(remain_bullet)) or all(remain_bullet)) and (self.computer.item[item] == 'æ‰‹æ©Ÿ'):
                        try_count +=1
                        continue 
                    if handsaw and (self.computer.item[item] == 'è…ä¸Šè…ºç´ '):
                        try_count +=1
                        continue
                    if blank == 0 and (self.computer.item[item] == 'å¤§å£å¾‘å­å½ˆ'):
                        try_count +=1
                        continue
                    if (self.player.hp >= 5) and (len(remain_bullet) <= 2) and (self.computer.item[item] == 'æ¦´å½ˆç ²'):
                        try_count +=1
                        continue
                    if (len(remain_bullet) == 1) and (self.computer.item[item] == 'å½ˆè—¥åŒ…'):
                        try_count +=1
                        continue
                    if (self.computer.bullet_pattern[0] == 'live') and (self.computer.item[item] == 'é¦™è¸'):
                        try_count +=1
                        continue
                    if gun_lock and (self.computer.item[item] == 'è½‰æ›å™¨') and (self.computer.bullet_pattern[0] == 'live'):
                        try_count +=1
                        continue
                    if (self.computer.bullet_pattern[0] == 'live') and (self.computer.item[item] == 'é¦™è¸'):
                        try_count +=1
                        continue
                    if gun_lock and (self.computer.item[item] == 'æ‰‹éŠ¬'):
                        try_count +=1
                        continue
                    try_count = 0
                    if self.computer.item[item] == 'æ‰‹é‹¸':
                        print('åˆ©ç¶­å¦æ‹¿æ‰‹é‹¸ç å‘ä½ ,é€ æˆäº†ä¸€é»å‚·å®³')
                        time.sleep(1)
                        self.player.hp -= 1
                        print('åˆ©ç¶­å¦:é‹¸å­é€™ç¨®æ±è¥¿ï¼Œæ‹¿ä¾†ç äººä¸æ˜¯æŒºå¥½å—?')
                    elif self.computer.item[item] == 'å•¤é…’':
                        self.computer.hp += 1
                        print('åˆ©ç¶­å¦ä½¿ç”¨äº†å•¤é…’,å›å¾©äº†ä¸€é»è¡€é‡')
                        time.sleep(1)
                        if random.randint(0,1):
                            print('åˆ©ç¶­å¦: å—~')
                        else:
                            print('åˆ©ç¶­å¦: å…¶å¯¦æˆ‘ä¸å¤ªå–œæ­¡å–é…’å°±æ˜¯äº†')
                    elif self.computer.item[item] == 'æ‰‹æ©Ÿ':
                        print('åˆ©ç¶­å¦ä½¿ç”¨äº†æ‰‹æ©Ÿï¼Œæ”¹è®Šäº†æœªä¾†')
                        random.shuffle(remain_bullet)
                        self.computer.reset_bullet_pattern(live_bullet+blank)
                        self.computer.set_bullet_pattern(0,'live' if remain_bullet[0] else 'blank')
                        self.computer.set_bullet_pattern(1,'live' if remain_bullet[1] else 'blank')
                    elif self.computer.item[item] == 'è½‰æ›å™¨':
                        print('åˆ©ç¶­å¦ä½¿ç”¨äº†è½‰æ›å™¨,åè½‰äº†æ‰€æœ‰å­å½ˆ')
                        for i in range(len(remain_bullet)):
                            remain_bullet[i] = not remain_bullet[i] 
                            if remain_bullet[i]:
                                live_bullet += 1
                                blank -= 1
                            else:
                                live_bullet -= 1
                                blank += 1
                            if self.computer.bullet_pattern[i] == 'live':
                                self.computer.set_bullet_pattern(i,'blank')
                            elif self.computer.bullet_pattern[i] == 'blank':
                                self.computer.set_bullet_pattern(i,'live')
                    elif self.computer.item[item] == 'éæœŸè—¥ç‰©':
                        print('åˆ©ç¶­å¦å¸äº†ä¸€äº›éæœŸè—¥ç‰©ï¼Œhighäº†èµ·ä¾†')
                        self.computer.fog += 1
                        time.sleep(1)
                        print('åˆ©ç¶­å¦:é€™æ‰æ˜¯é€™è²¨çœŸæ­£çš„ç”¨æ³•')
                    elif self.computer.item[item] == 'æ”¾å¤§é¡':
                        print('åˆ©ç¶­å¦ä½¿ç”¨äº†æ”¾å¤§é¡,èº«å‰çš„ç©ºé–“è¢«æ‰­æ›²äº†')
                        self.computer.max_item += 1
                        for i in range(3):
                            if random.randint(0,1):
                                remain_bullet.append(True)
                                live_bullet += 1
                            else:
                                remain_bullet.append(False)
                                blank += 1
                        self.computer.bullet_pattern.append('unknown')
                        self.computer.bullet_pattern.append('unknown')
                        self.computer.bullet_pattern.append('unknown')
                    elif self.computer.item[item] == 'é¦™è¸':
                        if remain_bullet[0]:
                            print('åˆ©ç¶­å¦æŠ½äº†æ ¹è¸,é€€æ‰ä¸€ç™¼å¯¦å½ˆ')
                            live_bullet -= 1
                            remain_bullet.pop(0)
                            self.computer.pop_bullet_pattern()
                        else:
                            print('åˆ©ç¶­å¦æŠŠé¦™è¸å¡é€²æ§è£¡,ç©ºåŒ…å½ˆè¢«æ›æˆäº†å¯¦å½ˆ')
                            remain_bullet[0] = True
                            live_bullet += 1
                            blank -= 1
                        if len(remain_bullet) == 0:
                            print('å­å½ˆæ‰“å®Œäº†')
                            print('é€²å…¥ä¸‹ä¸€å±€')
                            return
                    elif self.computer.item[item] == 'æ‰‹éŠ¬':
                        print('åˆ©ç¶­å¦ç”¨æ‰‹éŠ¬æ”¹é€ äº†æ§,é€™å±€ç„¡æ³•å†å°„å‘è‡ªå·±')
                        gun_lock = True
                    elif self.computer.item[item] == 'æœ¦æœ§åœ‹ç‹':
                        print('åˆ©ç¶­å¦ä½¿ç”¨äº†***æœ¦æœ§åœ‹ç‹***ï¼Œæ¯å›åˆé¡å¤–å…ç–«ä¸€æ¬¡å‚·å®³')
                        self.player.queen_used.append('æœ¦æœ§åœ‹ç‹')
                        #fog_kingç‚ºä¸Šé™ï¼Œfogç‚ºç•¶å‰å…ç–«æ¬¡æ•¸
                        self.computer.fog_king += 1
                        self.computer.fog += 1
                    elif self.computer.item[item] == 'ç‹‚æš´åœ‹ç‹':
                        print('åˆ©ç¶­å¦ä½¿ç”¨äº†***ç‹‚æš´åœ‹ç‹***ï¼Œä¸‹5ç™¼å­å½ˆé€ æˆå…©å€å‚·å®³')
                        self.player.queen_used.append('ç‹‚æš´åœ‹ç‹')   
                        self.computer.rage_king += 5
                    elif self.computer.item[item] == 'ç‹¡è©åœ‹ç‹':
                        print('åˆ©ç¶­å¦ä½¿ç”¨äº†***ç‹¡è©åœ‹ç‹***ï¼Œèƒ½å¤ é çŸ¥éƒ¨åˆ†æœªä¾†')
                        self.player.queen_used.append('ç‹¡è©åœ‹ç‹')
                        self.computer.trick_king += 3
                    elif self.computer.item[item] == 'è²ªå©ªåœ‹ç‹':
                        print('åˆ©ç¶­å¦ä½¿ç”¨äº†***è²ªå©ªåœ‹ç‹***ï¼Œå·èµ°ä½ çš„é“å…·')
                        self.player.queen_used.append('è²ªå©ªåœ‹ç‹')
                        #å·èµ°ç©å®¶æ‰€æœ‰éçš‡åé“å…·ï¼Œç•™ä¸‹çš‡åé“å…·
                        temp_item = []
                        for i in range(len(self.player.item)):
                            if self.player.item[i] != 'æ¼†é»‘çš‡å' and self.player.item[i] != 'ç¥è–çš‡å' and self.player.item[i] != 'è”šè—çš‡å' and self.player.item[i] != 'è…¥ç´…çš‡å':
                                self.computer.item.append(self.player.item[i])
                            else:
                                temp_item.append(self.player.item[i])
                        self.player.item = temp_item                         
                        self.computer.item.remove('è²ªå©ªåœ‹ç‹')
                        continue
                    elif self.computer.item[item] == 'æœªçŸ¥è—åœ–':
                        print('åˆ©ç¶­å¦æ’•ç¢æœªçŸ¥è—åœ–ï¼Œæ¥è‘—æ†‘ç©ºè®Šå‡ºäº†ä¸‰æ¨£ç‰©å“')
                        self.give_Leviathan_item(3,self.computer)
                        
                    elif self.computer.item[item] == 'ç¦è—¥':
                        print('åˆ©ç¶­å¦å—‘äº†ç¦è—¥ï¼Œèº«å½±è®Šå¾—æ¨¡ç³Š')
                        self.player.dohandcuff()
                        handsaw = True
                        
                    elif self.computer.item[item] == 'å¤§å£å¾‘å­å½ˆ':
                        print('åˆ©ç¶­å¦ä½¿ç”¨äº†å¤§å£å¾‘å­å½ˆ,æ‰€æœ‰ç©ºåŒ…å½ˆè¢«æ›æˆäº†å¯¦å½ˆ')
                        for i in range(len(remain_bullet)):
                            if remain_bullet[i] == False:
                                remain_bullet[i] = True
                                live_bullet += 1
                                blank -= 1
                    elif self.computer.item[item] == 'æ¦´å½ˆç ²':
                        print('åˆ©ç¶­å¦ä½¿ç”¨æ¦´å½ˆç ²å¼·åˆ¶å°„å‡ºæ‰€æœ‰å­å½ˆ,é€ æˆäº†',live_bullet+blank,'é»å‚·å®³')
                        self.player.hp -= live_bullet+blank
                        time.sleep(1)
                        print('åˆ©ç¶­å¦:å‘¼å‘¼å‘¼ï¼Œç®¡ä½ å¯¦å½ˆç©ºåŒ…å½ˆï¼Œå°„å‡ºå»ä¹‹å¾Œéƒ½æ˜¯å¥½å­å½ˆ')
                        time.sleep(1)
                        print('å­å½ˆæ‰“å®Œäº†')
                        print('é€²å…¥ä¸‹ä¸€å±€')
                        return
                    elif self.computer.item[item] == 'å½ˆè—¥åŒ…':
                        damage = 0
                        for i in range(len(remain_bullet)-1):
                            if remain_bullet.pop(0):
                                live_bullet -= 1
                                self.computer.hp += 1
                                self.computer.pop_bullet_pattern()
                            else:
                                damage += 1
                                self.computer.pop_bullet_pattern()
                                blank -= 1
                        if handsaw:
                            damage *= 2
                            handsaw = False 
                        self.player.hp -= damage
                        print('åˆ©ç¶­å¦ç”¨å½ˆè—¥åŒ…æ¸…ç©ºå¤§éƒ¨åˆ†å­å½ˆï¼Œå›å¾©',live_bullet,'é»è¡€é‡ï¼Œä¸¦å°ä½ é€ æˆ',damage,'é»å‚·å®³')
                        
                    elif self.computer.item[item] == 'è…ä¸Šè…ºç´ ':    
                        print('åˆ©ç¶­å¦ä½¿ç”¨äº†è…ä¸Šè…ºç´ ï¼Œçœ¼ç¥è®Šå¾—ç‹‚æš´')
                        handsaw = True
                    self.computer.item.pop(item)
                    continue
                if self.player.hp <= 0:
                    time.sleep(2)
                    print('**************************************')
                    print('ä½ æ­»äº†')
                    time.sleep(2)
                    if achievement_first_dead:
                        lobby_NPC[0].unlock_achievement('å“ˆå“ˆå±çœ¼')
                    return
                if self.computer.hp <= 0:
                    time.sleep(2)
                    print('**************************************')
                    print('ä½ è´äº†')
                    time.sleep(2)
                    return
                if self.player.handcuff:
                    print('åˆ©ç¶­å¦çš„é€Ÿåº¦å¤ªå¿«äº†ï¼Œä½ ç„¡æ³•è¡Œå‹•')
                    self.player.unhandcuff()
                    try_count = 0
                    continue
                if len(remain_bullet) == 0:
                    print('å­å½ˆæ‰“å®Œäº†')
                    print('é€²å…¥ä¸‹ä¸€å±€')
                    return
                if self.computer.item_queen > 0:
                    print('è”šè—çš‡åä½¿åˆ©ç¶­å¦ç²å¾—éš¨æ©Ÿç‰©å“')
                    time.sleep(1)
                for i in range(self.computer.item_queen):
                    self.give_participant_item(1,self.computer)
                break
            
    def one_round_Samael(self,live_bullet,blank,foresee):
        self.player.blessing = 0
        self.player.item = []
        self.computer.item = []
        time.sleep(3)
        print('ç¬¬',self.round,'å±€é–‹å§‹')
        remain_bullet = []
        self.computer.reset_bullet_pattern(live_bullet+blank)
        print('é€™å±€æœ‰',live_bullet,'ç™¼å¯¦å½ˆ',blank,'ç™¼ç©ºåŒ…å½ˆ')
        for i in range(live_bullet):
            remain_bullet.append(True)
        for i in range(blank):
            remain_bullet.append(False)
        random.shuffle(remain_bullet)
        time.sleep(2)        
        #è–©é‚çˆ¾é çŸ¥æ•ˆæœ
        if foresee == 2:
            self.computer.set_bullet_pattern(0,'live' if remain_bullet[0] else 'blank')
            self.computer.set_bullet_pattern(1,'live' if remain_bullet[1] else 'blank')
        elif foresee == 4:
            while True:
                rand = random.randint(0,7)
                if self.computer.bullet_pattern[rand] == 'unknown':
                    self.computer.set_bullet_pattern(rand,'live' if remain_bullet[rand] else 'blank')
                    foresee -= 1
                if foresee == 0:
                    break
        
        while len(remain_bullet) > 0:
            if self.player.hp <= 0:
                time.sleep(2)
                print('**************************************')
                print('ä½ æ­»äº†')
                time.sleep(2)
                return
            
            time.sleep(1)
            if self.first_move == 'ç©å®¶':
                print('==========================================')
                print('ä½ çš„å›åˆ')
                print('ç©å®¶è¡€é‡:',self.player.hp,'è–©é‚çˆ¾è¡€é‡:',self.computer.hp)  
                print('å‰©é¤˜',live_bullet,'ç™¼å¯¦å½ˆ',blank,'ç™¼ç©ºåŒ…å½ˆ')
                print('è«‹é¸æ“‡è¦åšçš„äº‹')
                print('1.å°„å‘è–©é‚çˆ¾, 2.å°„å‘è‡ªå·±')
                if len(self.computer.bullet_pattern) != len(remain_bullet):
                    raise Exception('å­å½ˆæ•¸é‡ä¸ç¬¦')
                while True:
                    try:
                        action = int(input())
                    except ValueError:
                        print('è«‹è¼¸å…¥æ­£ç¢ºçš„æ•¸å­—')
                        continue
                    if type(action) != int:
                        print('è«‹è¼¸å…¥æ­£ç¢ºçš„æ•¸å­—')
                        continue
                    if action < 1 or action > 2:
                        print('è«‹è¼¸å…¥æ­£ç¢ºçš„æ•¸å­—')
                        continue
                    break
            else:
                action = 0
                self.first_move = 'ç©å®¶'
            
            if action==1:
                if remain_bullet[0]:
                    self.computer.hp -= 1
                    print('ä½ å°„ä¸­äº†è–©é‚çˆ¾,é€ æˆä¸€é»å‚·å®³')
                    self.computer.pop_bullet_pattern()
                    live_bullet -= 1
                else:
                    print('ä½ çš„å­å½ˆæ‰“ç©ºäº†')
                    self.computer.pop_bullet_pattern()
                    blank -= 1
                remain_bullet.pop(0)
            elif action==2:
                lobby_NPC[2].devil_dependency = False
                if remain_bullet[0]:
                    self.player.hp -= 1
                    print('ä½ å°„ä¸­äº†è‡ªå·±,é€ æˆä¸€é»å‚·å®³')
                    self.computer.pop_bullet_pattern()
                    live_bullet -= 1
                else:
                    print('ä½ çš„å­å½ˆæ‰“ç©ºäº†,é¡å¤–ç²å¾—ä¸€å›åˆ')
                    remain_bullet.pop(0)
                    self.computer.pop_bullet_pattern()
                    blank -= 1
                    continue
                remain_bullet.pop(0)
                if self.computer.hp <= 0:
                    time.sleep(2)
                    print('**************************************')
                    print('ä½ è´äº†')
                    time.sleep(2)
                    return
            if self.computer.hp <= 0:
                time.sleep(2)
                print('**************************************')
                print('ä½ è´äº†')
                time.sleep(2)
                return
            if self.player.hp <= 0:
                time.sleep(2)
                print('**************************************')
                print('ä½ æ­»äº†')
                time.sleep(2)
                return
            
            if self.computer.regen and self.computer.hp == 1:
                print('è–©é‚çˆ¾çš„ç¿…è†€æ•£ç™¼ç¥è–çš„æ°£æ¯ï¼Œè¡€é‡æ¢å¾©äº†3')
                self.computer.hp += 3
                time.sleep(1)
                self.computer.regen = False
            if len(remain_bullet) == 0:
                print('å­å½ˆæ‰“å®Œäº†')
                print('é€²å…¥ä¸‹ä¸€å±€')
                return
            print('==========================================')
            print('è–©é‚çˆ¾çš„å›åˆ')
            print('==========================================')
            time.sleep(1)
            while True:
                #è–©é‚çˆ¾é€²è¡Œå‰©é¤˜å­å½ˆåˆ†æ
                if (live_bullet-self.computer.known_live) <= 0:
                    for i in range(len(self.computer.bullet_pattern)):
                        if self.computer.bullet_pattern[i] == 'unknown':
                            self.computer.set_bullet_pattern(i,'blank')
                elif (blank-self.computer.known_blank) <= 0:
                    for i in range(len(self.computer.bullet_pattern)):
                        if self.computer.bullet_pattern[i] == 'unknown':
                            self.computer.set_bullet_pattern(i,'live')
                if self.player.hp <= 0:
                    time.sleep(2)
                    print('**************************************')
                    print('ä½ æ­»äº†')
                    time.sleep(2)
                    return
                time.sleep(2)
                if len(remain_bullet) == 0:
                    print('å­å½ˆæ‰“å®Œäº†')
                    print('é€²å…¥ä¸‹ä¸€å±€')
                    return
                #è–©é‚çˆ¾çš„è¡Œå‹•åˆ¤æ–·
                if self.computer.bullet_pattern[0] == 'live':
                    action = 1
                elif self.computer.bullet_pattern[0] == 'blank':
                    action = 2
                else:
                    remain_live = live_bullet - self.computer.known_live
                    remain_blank = blank - self.computer.known_blank
                    rand = random.randint(1,remain_live+remain_blank)
                    if rand <= remain_live:
                        action = 2
                    else:
                        action = 1
                    
                #è–©é‚çˆ¾çš„è¡Œå‹•é¸é …å’Œç©å®¶ç›¸åŒ
                if action==1:
                    if remain_bullet[0]:
                        self.player.hp -= 1
                        print('è–©é‚çˆ¾å°„ä¸­äº†ä½ ,é€ æˆä¸€é»å‚·å®³')
                        live_bullet -= 1
                        self.computer.pop_bullet_pattern()
                    else:
                        print('è–©é‚çˆ¾çš„å­å½ˆæ‰“ç©ºäº†')
                        blank -= 1
                        self.computer.pop_bullet_pattern()
                    remain_bullet.pop(0)
                elif action==2:
                    if remain_bullet[0]:
                        self.computer.hp -= 1
                        print('è–©é‚çˆ¾å°„ä¸­äº†è‡ªå·±,é€ æˆä¸€é»å‚·å®³')
                        live_bullet -= 1
                        self.computer.pop_bullet_pattern()
                    else:
                        print('è–©é‚çˆ¾å°„å‘è‡ªå·±ï¼Œå­å½ˆæ‰“ç©ºäº†,é¡å¤–ç²å¾—ä¸€å›åˆ')
                        remain_bullet.pop(0)
                        self.computer.pop_bullet_pattern()
                        blank -= 1
                        continue
                    remain_bullet.pop(0)
                
                if self.player.hp <= 0:
                    time.sleep(2)
                    print('**************************************')
                    print('ä½ æ­»äº†')
                    time.sleep(2)
                    return
                if self.computer.hp <= 0:
                    time.sleep(2)
                    print('**************************************')
                    print('ä½ è´äº†')
                    time.sleep(2)
                    return
                if len(remain_bullet) == 0:
                    print('å­å½ˆæ‰“å®Œäº†')
                    print('é€²å…¥ä¸‹ä¸€å±€')
                    return
                break
            
    def one_round_Lilit(self,live_bullet,blank,item_number):
        time.sleep(3)
        print('ç¬¬',self.round,'å±€é–‹å§‹')
        #æœ¦æœ§åœ‹ç‹æ•ˆæœ
        self.computer.fog = self.computer.fog_king

        if self.player.handcuff:
            self.player.unhandcuff()
            print('ä½ çš„æ‰‹éŠ¬è§£é™¤,å¯ä»¥è‡ªç”±è¡Œå‹•äº†')
        if self.computer.handcuff:
            self.computer.unhandcuff()
            print('è‰è‰æ–¯çš„æ‰‹éŠ¬è§£é™¤,å¯ä»¥è‡ªç”±è¡Œå‹•äº†')
        handsaw = False
        skip = False    
        killer_queen = False
        self.give_item(item_number)
        remain_bullet = []
        self.computer.reset_bullet_pattern(live_bullet+blank)
        print('é€™å±€æœ‰',live_bullet,'ç™¼å¯¦å½ˆ',blank,'ç™¼ç©ºåŒ…å½ˆ')
        for i in range(live_bullet):
            remain_bullet.append(True)
        for i in range(blank):
            remain_bullet.append(False)
        random.shuffle(remain_bullet)
        #ç‹¡è©åœ‹ç‹æ•ˆæœ
        for i in range(self.computer.trick_king):
            if i > len(remain_bullet)-1:
                break
            elif remain_bullet[i]:
                self.computer.set_bullet_pattern(i,'live')
            else:
                self.computer.set_bullet_pattern(i,'blank')
        #ç‰ç’ƒç¥ç¦æ•ˆæœ
        if self.player.blessing > 0:
            handsaw = self.blessing(remain_bullet,self.first_move,handsaw)

        time.sleep(2)        

        while len(remain_bullet) > 0:
            skip = False
            try_count = 0
            not_blue_print = True
            gun_lock = False
            temp_break = False

            if self.player.hp <= 0:
                time.sleep(2)
                print('**************************************')
                print('ä½ æ­»äº†')
                time.sleep(2)
                return
            
            time.sleep(1)
            if self.first_move == 'ç©å®¶':
                print('==========================================')
                print('ä½ çš„å›åˆ')
                print('ä½ çš„ç‰©å“æ¬„:',self.player.item)
                print('ç©å®¶è¡€é‡:',self.player.hp,'è‰è‰æ–¯è¡€é‡:',self.computer.hp)  
                print('å‰©é¤˜',live_bullet,'ç™¼å¯¦å½ˆ',blank,'ç™¼ç©ºåŒ…å½ˆ')
                print('è«‹é¸æ“‡è¦åšçš„äº‹')
                print('1.å°„å‘è‰è‰æ–¯, 2.å°„å‘è‡ªå·±, 3.ä½¿ç”¨ç‰©å“, 4.é¡¯ç¤ºè‰è‰æ–¯çš„ç‰©å“æ¬„')
                if self.player.blood_queen > 0 and (handsaw==False):
                    print('è…¥ç´…çš‡åä½¿ä½ ç²å¾—æ‰‹é‹¸æ•ˆæœ')
                    time.sleep(1)
                    handsaw = True
                    self.player.blood_queen -= 1
                if self.player.max_item >= 20:
                    lobby_NPC[0].unlock_achievement('é“ç†æˆ‘éƒ½æ‡‚ï¼Œä½†æ˜¯é€™å€‹èƒŒåŒ…æ€éº¼é€™éº¼å¤§')
                    time.sleep(1)
                while True:
                    try:
                        action = int(input())
                    except ValueError:
                        print('è«‹è¼¸å…¥æ­£ç¢ºçš„æ•¸å­—')
                        continue
                    if type(action) != int:
                        print('è«‹è¼¸å…¥æ­£ç¢ºçš„æ•¸å­—')
                        continue
                    if action < 1 or action > 4:
                        print('è«‹è¼¸å…¥æ­£ç¢ºçš„æ•¸å­—')
                        continue
                    break
            else:
                action = 0
                self.first_move = 'ç©å®¶'
            
            if action==1:
                if remain_bullet[0] and (self.computer.fog > 0):
                    print('æœ¦æœ§åœ‹ç‹ä½¿ä½ å°„åäº†')
                    self.computer.pop_bullet_pattern()
                    self.computer.fog -= 1
                    handsaw = False
                    killer_queen = False
                    live_bullet -= 1
                elif remain_bullet[0] and handsaw and killer_queen:
                    self.computer.hp -= 10
                    print('ä½ ä½¿ç”¨æ¼†é»‘çš‡åå°„ä¸­äº†è‰è‰æ–¯,é€ æˆåé»å‚·å®³')
                    if self.computer.blood_queen > 0:
                        print('è…¥ç´…çš‡åä½¿è‰è‰æ–¯å…ç–«é¡å¤–å‚·å®³')
                        self.computer.hp += 5
                        self.computer.blood_queen -= 1
                    handsaw = False
                    killer_queen = False
                    self.computer.pop_bullet_pattern()
                    live_bullet -= 1
                    if (self.player.hp <= 5) and (self.computer.hp <= 0):
                        time.sleep(2)
                        lobby_NPC[0].unlock_achievement('æ¼†é»‘å­å½ˆ')
                elif remain_bullet[0]&killer_queen:
                    self.computer.hp -= 5
                    print('ä½ ä½¿ç”¨æ¼†é»‘çš‡åå°„ä¸­äº†è‰è‰æ–¯,é€ æˆäº”é»å‚·å®³')
                    self.computer.pop_bullet_pattern()
                    live_bullet -= 1
                    killer_queen = False
                    if (self.player.hp <= 5) and (self.computer.hp <= 0):
                        time.sleep(2)
                        lobby_NPC[0].unlock_achievement('æ¼†é»‘å­å½ˆ')
                elif remain_bullet[0]&handsaw:
                    self.computer.hp -= 2
                    print('ä½ å°„ä¸­äº†è‰è‰æ–¯,é€ æˆå…©é»å‚·å®³')
                    if self.computer.blood_queen > 0:
                        print('è…¥ç´…çš‡åä½¿è‰è‰æ–¯å…ç–«é¡å¤–å‚·å®³')
                        self.computer.hp += 1
                        self.computer.blood_queen -= 1
                    handsaw = False
                    self.computer.pop_bullet_pattern()
                    live_bullet -= 1
                elif remain_bullet[0]:
                    self.computer.hp -= 1
                    print('ä½ å°„ä¸­äº†è‰è‰æ–¯,é€ æˆä¸€é»å‚·å®³')
                    self.computer.pop_bullet_pattern()
                    live_bullet -= 1
                else:
                    print('ä½ çš„å­å½ˆæ‰“ç©ºäº†')
                    self.computer.pop_bullet_pattern()
                    blank -= 1
                    handsaw = False
                remain_bullet.pop(0)
                handsaw = False
            elif action==2:
                if remain_bullet[0]&handsaw&killer_queen:
                    self.player.hp -= 10
                    print('ä½ ç”¨æ¼†é»‘çš‡åå°„ä¸­äº†è‡ªå·±,é€ æˆåé»å‚·å®³')
                    if self.player.blood_queen > 0:
                        print('è…¥ç´…çš‡åä½¿ä½ å…ç–«é¡å¤–å‚·å®³')
                        self.player.hp += 5
                        self.player.blood_queen -= 1
                    else:
                        print('ç¯€å“€é †è®Š')
                    handsaw = False
                    killer_queen = False
                    self.computer.pop_bullet_pattern()
                    live_bullet -= 1
                elif remain_bullet[0]&killer_queen:
                    self.player.hp -= 5
                    print('ä½ ç”¨æ¼†é»‘çš‡åå°„ä¸­äº†è‡ªå·±,é€ æˆäº”é»å‚·å®³')
                    print('ç¯€å“€é †è®Š')
                    killer_queen = False
                    self.computer.pop_bullet_pattern()
                    live_bullet -= 1
                elif remain_bullet[0]&handsaw:
                    self.player.hp -= 2
                    print('ä½ å°„ä¸­äº†è‡ªå·±,é€ æˆå…©é»å‚·å®³')
                    if self.player.blood_queen > 0:
                        print('è…¥ç´…çš‡åä½¿ä½ å…ç–«é¡å¤–å‚·å®³')
                        self.player.hp += 1
                        self.player.blood_queen -= 1
                    else:
                        print('ä½ æ˜¯ç¬¨è›‹å—?')
                        lobby_NPC[0].unlock_achievement('ä½ æ˜¯ç¬¨è›‹å—')
                    handsaw = False
                    self.computer.pop_bullet_pattern()
                    live_bullet -= 1
                elif remain_bullet[0]:
                    self.player.hp -= 1
                    print('ä½ å°„ä¸­äº†è‡ªå·±,é€ æˆä¸€é»å‚·å®³')
                    self.computer.pop_bullet_pattern()
                    live_bullet -= 1
                    handsaw = False
                else:
                    print('ä½ çš„å­å½ˆæ‰“ç©ºäº†,é¡å¤–ç²å¾—ä¸€å›åˆ')
                    remain_bullet.pop(0)
                    self.computer.pop_bullet_pattern()
                    blank -= 1
                    handsaw = False
                    continue
                remain_bullet.pop(0)
                handsaw = False
            elif action==3:
                print('è«‹é¸æ“‡è¦ä½¿ç”¨çš„ç‰©å“')
                for i in range(len(self.player.item)):
                    print(i+1,'.',self.player.item[i])
                try:
                    item = int(input())
                except ValueError:
                    print('è«‹è¼¸å…¥æ­£ç¢ºçš„æ•¸å­—')
                    continue

                if item > len(self.player.item):    
                    print('è«‹è¼¸å…¥æ­£ç¢ºçš„æ•¸å­—')
                    continue
                if self.player.item[item-1] == 'æ‰‹é‹¸':
                    if handsaw:
                        print('æ‰‹é‰…æ•ˆæœå·²ç¶“å­˜åœ¨äº†')
                        continue
                    handsaw = True
                    print('ä½ ä½¿ç”¨äº†æ‰‹é‹¸,ä¸‹ä¸€ç™¼å­å½ˆé€ æˆå…©å€å‚·å®³')
                elif self.player.item[item-1] == 'å•¤é…’':
                    if remain_bullet.pop(0):
                        print('ä½ ä½¿ç”¨äº†å•¤é…’,é€€æ‰ä¸€ç™¼å¯¦å½ˆ')
                        live_bullet -= 1
                    else:
                        print('ä½ ä½¿ç”¨äº†å•¤é…’,é€€æ‰ä¸€ç™¼ç©ºåŒ…å½ˆ')
                        blank -= 1
                    self.computer.pop_bullet_pattern()
                    if len(remain_bullet) == 0:
                            print('å­å½ˆæ‰“å®Œäº†')
                            print('é€²å…¥ä¸‹ä¸€å±€')
                            return
                elif self.player.item[item-1] == 'æ‰‹æ©Ÿ':
                    print('ä½ ä½¿ç”¨äº†æ‰‹æ©Ÿ')
                    if len(remain_bullet) == 1:
                        n = 0
                    else:
                        n=random.randint(1,len(remain_bullet)-1)
                    if remain_bullet[n]:
                        print('ç¬¬',n+1,'ç™¼æ˜¯å¯¦å½ˆ')
                    else:
                        print('ç¬¬',n+1,'ç™¼æ˜¯ç©ºåŒ…å½ˆ')
                elif self.player.item[item-1] == 'è½‰æ›å™¨':
                    print('ä½ ä½¿ç”¨äº†è½‰æ›å™¨,ç¾åœ¨é€™ç™¼å­å½ˆå°‡åè½‰')
                    remain_bullet[0] = not remain_bullet[0]
                    if remain_bullet[0]:
                        live_bullet += 1
                        blank -= 1
                    else:
                        live_bullet -= 1
                        blank += 1
                elif self.player.item[item-1] == 'éæœŸè—¥ç‰©':
                    print('ä½ ä½¿ç”¨äº†éæœŸè—¥ç‰©')
                    if random.randint(0,1) or self.player.have_lust_mark:
                        self.player.hp += 2
                        print('ä½ å›å¾©äº†å…©é»è¡€é‡')
                    else:
                        self.player.hp -= 1
                        print('ä½ å¤±å»äº†ä¸€é»è¡€é‡')
                        if self.player.hp <= 0:
                            time.sleep(2)
                            print('**************************************')
                            print('ä½ æ­»äº†')
                            time.sleep(2)
                            return
                elif self.player.item[item-1] == 'æ”¾å¤§é¡':
                    print('ä½ ä½¿ç”¨äº†æ”¾å¤§é¡çœ‹åˆ° ','å¯¦å½ˆ' if remain_bullet[0] else 'ç©ºåŒ…å½ˆ')
                elif self.player.item[item-1] == 'é¦™è¸':
                    print('ä½ ä½¿ç”¨äº†é¦™è¸,å›å¾©ä¸€é»è¡€é‡')
                    self.player.hp += 1
                elif self.player.item[item-1] == 'æ‰‹éŠ¬':
                    if self.computer.handcuff:
                        print('è‰è‰æ–¯å·²ç¶“è¢«éŠ¬ä½äº†')
                        continue
                    print('ä½ ä½¿ç”¨äº†æ‰‹éŠ¬,è‰è‰æ–¯ä¸‹å›åˆç„¡æ³•è¡Œå‹•')
                    self.computer.dohandcuff()
                elif self.player.item[item-1] == 'æœªçŸ¥è—åœ–':
                    if self.player.item.count('éæœŸè—¥ç‰©') >= 3:
                        print('ä½ ç²å¾—äº†ç¦è—¥')
                        self.player.item.append('ç¦è—¥')
                        for i in range(3):
                            self.player.item.remove('éæœŸè—¥ç‰©')
                        self.player.item.remove('æœªçŸ¥è—åœ–')
                    elif (self.player.item.count('æ‰‹é‹¸') >= 2) and  (self.player.item.count('æ”¾å¤§é¡') >= 1):
                        print('ä½ ç²å¾—äº†å¤§å£å¾‘å­å½ˆ')
                        self.player.item.append('å¤§å£å¾‘å­å½ˆ')
                        for i in range(2):
                            self.player.item.remove('æ‰‹é‹¸')
                        self.player.item.remove('æ”¾å¤§é¡')
                        self.player.item.remove('æœªçŸ¥è—åœ–')
                    elif (self.player.item.count('å¤§å£å¾‘å­å½ˆ') >= 1) and (self.player.item.count('è…ä¸Šè…ºç´ ') >= 1) and (self.player.item.count('è½‰æ›å™¨') >= 1):
                        print('ä½ ç²å¾—äº†æ¦´å½ˆç ²')
                        self.player.item.append('æ¦´å½ˆç ²')
                        self.player.item.remove('è…ä¸Šè…ºç´ ')
                        self.player.item.remove('å¤§å£å¾‘å­å½ˆ')
                        self.player.item.remove('è½‰æ›å™¨')
                        self.player.item.remove('æœªçŸ¥è—åœ–')
                    elif (self.player.item.count('å•¤é…’') >= 2) and (self.player.item.count('é¦™è¸') >= 1) and ((live_bullet+blank) >= 3):
                        print('ä½ ç²å¾—äº†å½ˆè—¥åŒ…')
                        self.player.item.remove('å•¤é…’')
                        self.player.item.remove('å•¤é…’')
                        self.player.item.remove('é¦™è¸')
                        self.player.item.append('å½ˆè—¥åŒ…')
                        self.player.item.remove('æœªçŸ¥è—åœ–')
                    elif len(self.player.item) == self.player.max_item:
                        print('ä½ ç²å¾—äº†æ“´å¢èƒŒåŒ…,ç‰©å“æ¬„å¢åŠ 2æ ¼')
                        self.player.item = []
                        self.player.max_item += 2
                    else:
                        print('ä½ çš„ç‰©å“ä¸è¶³ä»¥åˆæˆ')
                        continue
                    not_blue_print = False
                elif self.player.item[item-1] == 'ç¦è—¥':
                    #70%æ©Ÿç‡è¡€é‡ç¿»å€ä¸¦+3ï¼Œ30%è¡€é‡é™ä½åˆ°1é»ï¼Œè‹¥è¡€é‡ç‚º1å‰‡æ­»äº¡
                    print('ä½ ä½¿ç”¨äº†ç¦è—¥')
                    if random.randint(1,10) <= 7 or self.player.have_lust_mark:
                        self.player.hp *= 2
                        self.player.hp += 3
                        print('ä½ çš„è¡€é‡å¤§å¹…æå‡,ç¾åœ¨è¡€é‡ç‚º',self.player.hp)
                    else:
                        if self.player.hp == 1:
                            print('ä½ æ­»äº†')
                            self.player.hp = 0
                            time.sleep(2)
                            lobby_NPC[0].unlock_achievement('å¸æ¯’æœ‰ç¤™èº«å¿ƒå¥åº·ï¼Œè«‹å‹¿éš¨æ„å˜—è©¦')
                            time.sleep(2)    
                            return
                        self.player.hp = 1
                        print('ä½ ä¸­æ¯’äº†ï¼Œè¡€é‡é™ç‚º1')
                elif self.player.item[item-1] == 'å¤§å£å¾‘å­å½ˆ':
                    #å°‡ç›®å‰é€™ç™¼ç›´æ¥å­å½ˆæ›¿æ›æˆå¤§å£å¾‘å­å½ˆä¸¦ç›´æ¥ç™¼å°„ï¼Œé€ æˆ3é»å‚·å®³ï¼Œå¦‚æœæœ‰ä½¿ç”¨æ‰‹é‹¸å‰‡é€ æˆ6é»å‚·å®³
                    if self.computer.fog > 0:
                        print('æœ¦æœ§åœ‹ç‹ä½¿ä½ å°„åäº†')
                        self.computer.fog -= 1
                        handsaw = False
                    elif handsaw:
                        self.computer.hp -= 6
                        print('ä½ ç™¼å°„äº†å¤§å£å¾‘å­å½ˆ,é€ æˆ6é»å‚·å®³')
                    else:
                        self.computer.hp -= 3
                        print('ä½ ç™¼å°„äº†å¤§å£å¾‘å­å½ˆ,é€ æˆ3é»å‚·å®³')
                    if remain_bullet.pop(0):
                        live_bullet -= 1
                    else:
                        blank -= 1
                    self.computer.pop_bullet_pattern()
                    self.player.item.pop(item-1)
                    skip = True
                    handsaw = False
                elif self.player.item[item-1] == 'æ¦´å½ˆç ²':
                    #å°‡è‡ªèº«è¡€é‡é™ä½è‡³1é»ï¼Œä¸¦ç™¼å°„ç¾åœ¨é€™ç™¼å­å½ˆï¼Œè‹¥ç‚ºå¯¦å½ˆå‰‡é€ æˆ(é™ä½çš„è¡€é‡+1)é»å‚·å®³ï¼Œä½¿ç”¨æ‰‹é‹¸å‰‡é€ æˆå…©å€å‚·å®³ï¼Œè‹¥ç‚ºç©ºåŒ…å½ˆå‰‡ä¸é€ æˆå‚·å®³ï¼Œä½¿ç”¨å¾Œè¼ªåˆ°è‰è‰æ–¯çš„å›åˆ
                    damage = self.player.hp
                    self.player.hp = 1
                    if remain_bullet.pop(0):
                        if self.computer.fog > 0:
                            print('æœ¦æœ§åœ‹ç‹ä½¿ä½ å°„åäº†')
                            self.computer.fog -= 1
                            handsaw = False
                        elif handsaw:
                            self.computer.hp -= 2*damage
                            print('ä½ ç™¼å°„äº†æ¦´å½ˆç ²,é€ æˆ',2*damage,'é»å‚·å®³')
                            handsaw = False
                        else:
                            self.computer.hp -= damage
                            print('ä½ ç™¼å°„äº†æ¦´å½ˆç ²,é€ æˆ',damage,'é»å‚·å®³')
                        live_bullet -= 1
                    else:
                        print('ä½ ç™¼å°„äº†æ¦´å½ˆç ²,ä½†æ˜¯å­å½ˆæ‰“ç©ºäº†')
                        blank -= 1
                    self.computer.pop_bullet_pattern()
                    self.player.item.pop(item-1)
                    skip = True
                elif self.player.item[item-1] == 'å½ˆè—¥åŒ…':
                    #å°è‰è‰æ–¯é€ æˆå‰©é¤˜å¯¦å½ˆæ•¸é‡çš„å‚·å®³ï¼Œä¹‹å¾Œç”¨å¯¦å½ˆå’Œç©ºåŒ…å½ˆéš¨æ©Ÿå°‡å½ˆè—¥å¡«æ»¿è‡³8ç™¼
                    damage = live_bullet
                    if self.computer.fog > 0:
                        if damage > self.computer.fog:
                            damage -= self.computer.fog
                            self.computer.fog = 0
                            if handsaw:
                                damage *= 2
                            self.computer.hp -= damage
                            print('ä½ ä½¿ç”¨äº†å½ˆè—¥åŒ…')
                            print('æœ¦æœ§åœ‹ç‹ä½¿ä½ å°„åäº†éƒ¨åˆ†å­å½ˆ,å°è‰è‰æ–¯é€ æˆ',damage,'é»å‚·å®³')
                        else:
                            print('ä½ ä½¿ç”¨äº†å½ˆè—¥åŒ…ï¼Œä½†æ˜¯æœ¦æœ§åœ‹ç‹ä½¿ä½ å°„åäº†æ‰€æœ‰å­å½ˆ') 
                            self.computer.fog -= damage
                    else:
                        if handsaw:
                            damage *= 2
                        print('ä½ ä½¿ç”¨äº†å½ˆè—¥åŒ…,å°è‰è‰æ–¯é€ æˆ',damage,'é»å‚·å®³')
                        self.computer.hp -= damage
                    handsaw = False
                    remain_bullet = []
                    live_bullet = 0
                    blank = 0
                    for i in range(8-len(remain_bullet)):
                        if random.randint(0,1):
                            remain_bullet.append(True)
                            live_bullet += 1
                        else:
                            remain_bullet.append(False)
                            blank += 1
                    random.shuffle(remain_bullet)
                    print('å½ˆè—¥å·²é‡æ–°è£å¡«')
                    self.computer.reset_bullet_pattern(live_bullet+blank)
                    if self.player.blessing > 0:
                        handsaw = self.blessing(remain_bullet,'ç©å®¶',handsaw)
                elif self.player.item[item-1] == 'æ¼†é»‘çš‡å':
                    #ç§»é™¤é›™æ–¹æ‰€æœ‰é“å…·ï¼Œå°‡å½ˆå¤¾è£å¡«ç‚ºä¸€ç™¼ç©ºåŒ…å½ˆä¸€ç™¼å¯¦å½ˆï¼Œé€™ç™¼å¯¦å½ˆå°‡é€ æˆ5é»å‚·å®³
                    print('ä½ ä½¿ç”¨äº†æ¼†é»‘çš‡åï¼Œå½ˆè—¥è£å¡«ç‚ºä¸€ç™¼ç©ºåŒ…å½ˆä¸€ç™¼5é»å‚·å®³å¯¦å½ˆï¼Œç¥ˆç¦±å§!')
                    self.player.item = []
                    self.computer.item = []
                    remain_bullet = [True,False]
                    live_bullet = 1
                    blank = 1
                    self.computer.reset_bullet_pattern(live_bullet+blank)
                    random.shuffle(remain_bullet)
                    killer_queen = True
                    not_blue_print = False
                    self.player.queen_used.append('æ¼†é»‘çš‡å')
                    if self.player.blessing > 0:
                        handsaw = self.blessing(remain_bullet,'ç©å®¶',handsaw)
                elif self.player.item[item-1] == 'ç¥è–çš‡å':
                    #å›3é»è¡€é‡ï¼ŒèƒŒåŒ…ä¸Šé™+2ï¼Œç²å¾—3å€‹éš¨æ©Ÿç‰©å“
                    print('ä½ ä½¿ç”¨äº†ç¥è–çš‡åï¼Œå›å¾©3é»è¡€é‡ï¼ŒèƒŒåŒ…ä¸Šé™+2ï¼Œç²å¾—3å€‹éš¨æ©Ÿç‰©å“')
                    self.player.hp += 3
                    self.player.max_item += 3
                    self.give_participant_item(3,self.player)
                    self.player.max_item -= 1
                    self.player.queen_used.append('ç¥è–çš‡å')
                elif self.player.item[item-1] == 'è”šè—çš‡å':
                    #ç©å®¶çš„å›åˆçµæŸæ™‚ï¼Œç²å¾—ä¸€å€‹éš¨æ©Ÿç‰©å“
                    print('ä½ ä½¿ç”¨äº†è”šè—çš‡åï¼Œè¼ªåˆ°è‰è‰æ–¯çš„å›åˆæ™‚ä½ å°‡ç²å¾—ä¸€å€‹éš¨æ©Ÿç‰©å“')
                    self.player.item_queen += 1   
                    self.player.queen_used.append('è”šè—çš‡å')
                    if self.player.item_queen >= 5 :
                        time.sleep(1)
                        lobby_NPC[0].unlock_achievement('é“å…·æ°¸å‹•æ©Ÿ')
                        time.sleep(1)
                elif self.player.item[item-1] == 'è…¥ç´…çš‡å':
                    #ç©å®¶çš„å›åˆé–‹å§‹æ™‚ï¼Œé™„åŠ æ‰‹é‰…æ•ˆæœ
                    print('ä½ ä½¿ç”¨äº†è…¥ç´…çš‡åï¼Œæ¯å›åˆç²å¾—æ‰‹é‹¸æ•ˆæœä¸¦å…ç–«æ‰‹é‰…çš„é¡å¤–å‚·å®³ï¼Œå¯ä»¥è§¸ç™¼äº”æ¬¡')
                    self.player.blood_queen += 5       
                    self.player.queen_used.append('è…¥ç´…çš‡å') 
                elif self.player.item[item-1] == 'ç‰ç’ƒçš‡å':
                    #æ¯æ¬¡é‡æ–°è£å½ˆ(å›åˆé–‹å§‹ã€å½ˆè—¥åŒ…ã€æ¼†é»‘çš‡å)æ™‚é€šéˆç¬¬ä¸€é¡†å­å½ˆï¼Œè‹¥ç‚ºå¯¦å½ˆå‰‡é™„åŠ æ‰‹é‰…æ•ˆæœ
                    #è‹¥ç‚ºç©ºåŒ…å½ˆå‰‡å›å¾©ä¸€é»è¡€é‡ä¸¦æ¶ˆé™¤è‰è‰æ–¯ä¸€å€‹é“å…·æˆ–ç²å¾—ä¸€å€‹éš¨æ©Ÿé“å…·
                    #ä½¿ç”¨ç•¶ä¸‹æ¸…ç©ºè‰è‰æ–¯çš„é“å…·ã€æ¸…ç©ºå½ˆå¤¾ä¸¦è£ä¸Šä¸€é¡†å¯¦å½ˆ
                    print('ä½ ç²å¾—äº†ç‰ç’ƒçš„ç¥ç¦ï¼Œè‰è‰æ–¯çš„é“å…·è¢«æ¸…ç©ºï¼Œå½ˆå¤¾é‡æ–°è£å¡«äº†')
                    time.sleep(2)
                    lobby_NPC[0].unlock_achievement('ç‰ç’ƒçš„ç¥ç¦')
                    self.computer.item = [] 
                    self.computer.reset_bullet_pattern(1)
                    remain_bullet = [True]
                    if not handsaw:
                        handsaw = True
                        print('ä½ ç²å¾—äº†æ‰‹é‹¸æ•ˆæœ')
                    time.sleep(1)
                    live_bullet = 1
                    blank = 0
                    self.player.blessing += 1
                    self.player.queen_used.append('ç‰ç’ƒçš‡å')                          
                elif self.player.item[item-1] == 'è…ä¸Šè…ºç´ ':
                    print('ä½ ä½¿ç”¨äº†è…ä¸Šè…ºç´ ,å¯ä»¥å·å–è‰è‰æ–¯çš„ç‰©å“')
                    if len(self.computer.item) == 0:
                        print('è‰è‰æ–¯æ²’æœ‰ç‰©å“å¯ä»¥å·å–')
                        continue
                    print('è«‹é¸æ“‡è¦å·å–çš„ç‰©å“:')
                    for i in range(len(self.computer.item)):
                        print(i+1,'.',self.computer.item[i])
                    try:
                        steal = int(input())
                    except ValueError:
                        print('è«‹è¼¸å…¥æ­£ç¢ºçš„æ•¸å­—')
                        time.sleep(1)
                        continue  
                    if steal > len(self.computer.item):
                        print('è«‹è¼¸å…¥æ­£ç¢ºçš„æ•¸å­—')
                        continue
                    elif steal <= 0:
                        print('è«‹è¼¸å…¥æ­£ç¢ºçš„æ•¸å­—')
                        continue
                    #é¦¬ä¸Šä½¿ç”¨é¸æ“‡çš„ç‰©å“ 
                    if self.computer.item[steal-1] == 'æ‰‹é‹¸':
                        if handsaw:
                            print('æ‰‹é‰…æ•ˆæœå·²ç¶“å­˜åœ¨äº†')
                            continue
                        handsaw = True
                        print('ä½ ä½¿ç”¨äº†æ‰‹é‹¸,ä¸‹ä¸€ç™¼å­å½ˆé€ æˆå…©å€å‚·å®³')
                    elif self.computer.item[steal-1] == 'å•¤é…’':
                        if remain_bullet.pop(0):
                            print('ä½ ä½¿ç”¨äº†å•¤é…’,é€€æ‰ä¸€ç™¼å¯¦å½ˆ')
                            live_bullet -= 1
                        else:
                            print('ä½ ä½¿ç”¨äº†å•¤é…’,é€€æ‰ä¸€ç™¼ç©ºåŒ…å½ˆ')
                            blank -= 1
                        self.computer.pop_bullet_pattern()
                        if len(remain_bullet) == 0:
                            print('å­å½ˆæ‰“å®Œäº†')
                            print('é€²å…¥ä¸‹ä¸€å±€')
                            return
                    elif self.computer.item[steal-1] == 'æ‰‹æ©Ÿ':
                        print('ä½ ä½¿ç”¨äº†æ‰‹æ©Ÿ')
                        if len(remain_bullet) == 1:
                            n = 0
                        else:
                            n=random.randint(1,len(remain_bullet)-1)
                        if remain_bullet[n]:
                            print('ç¬¬',n+1,'ç™¼æ˜¯å¯¦å½ˆ')
                        else:
                            print('ç¬¬',n+1,'ç™¼æ˜¯ç©ºåŒ…å½ˆ')
                    elif self.computer.item[steal-1] == 'è½‰æ›å™¨':
                        print('ä½ ä½¿ç”¨äº†è½‰æ›å™¨,ç¾åœ¨é€™ç™¼å­å½ˆå°‡åè½‰')
                        remain_bullet[0] = not remain_bullet[0]
                        if remain_bullet[0]:
                            live_bullet += 1
                            blank -= 1
                        else:
                            live_bullet -= 1
                            blank += 1
                    elif self.computer.item[steal-1] == 'éæœŸè—¥ç‰©':
                        print('ä½ ä½¿ç”¨äº†éæœŸè—¥ç‰©')
                        if random.randint(0,1) or self.player.have_lust_mark:
                            self.player.hp += 2
                            print('ä½ å›å¾©äº†å…©é»è¡€é‡')
                        else:
                            self.player.hp -= 1
                            print('ä½ å¤±å»äº†ä¸€é»è¡€é‡')
                            if self.player.hp <= 0:
                                time.sleep(2)
                                print('**************************************')
                                print('ä½ æ­»äº†')
                                time.sleep(2)
                                return
                    elif self.computer.item[steal-1] == 'æ”¾å¤§é¡':
                        print('ä½ ä½¿ç”¨äº†æ”¾å¤§é¡çœ‹åˆ° ','å¯¦å½ˆ' if remain_bullet[0] else 'ç©ºåŒ…å½ˆ')
                    elif self.computer.item[steal-1] == 'é¦™è¸':
                        print('ä½ ä½¿ç”¨äº†é¦™è¸,å›å¾©ä¸€é»è¡€é‡')
                        self.player.hp += 1
                    elif self.computer.item[steal-1] == 'æ‰‹éŠ¬':
                        if self.computer.handcuff:
                            print('è‰è‰æ–¯å·²ç¶“è¢«éŠ¬ä½äº†')
                            continue
                        print('ä½ ä½¿ç”¨äº†æ‰‹éŠ¬,è‰è‰æ–¯ä¸‹å›åˆç„¡æ³•è¡Œå‹•')
                        self.computer.dohandcuff()
                    elif self.computer.item[steal-1] == 'æœªçŸ¥è—åœ–':
                        self.player.item.append('æœªçŸ¥è—åœ–')
                        print('ä½ ç²å¾—äº†æœªçŸ¥è—åœ–')
                    elif self.computer.item[steal-1] == 'ç¦è—¥':
                        print('ä½ ä½¿ç”¨äº†ç¦è—¥')
                        if random.randint(1,10) <= 70 or self.player.have_lust_mark:
                            self.player.hp *= 2
                            self.player.hp += 3
                            print('ä½ çš„è¡€é‡å¤§å¹…æå‡,ç¾åœ¨è¡€é‡ç‚º',self.player.hp)
                        else:
                            if self.player.hp == 1:
                                print('ä½ æ­»äº†')
                                time.sleep(2)
                                self.player.hp = 0
                                lobby_NPC[0].unlock_achievement('å¸æ¯’æœ‰ç¤™èº«å¿ƒå¥åº·ï¼Œè«‹å‹¿éš¨æ„å˜—è©¦')
                                time.sleep(2)    
                                return
                            self.player.hp = 1
                            print('ä½ ä¸­æ¯’äº†ï¼Œè¡€é‡é™ç‚º1')
                    elif self.computer.item[steal-1] == 'å¤§å£å¾‘å­å½ˆ':
                        if self.computer.fog > 0:
                            print('æœ¦æœ§åœ‹ç‹ä½¿ä½ å°„åäº†')
                            self.computer.fog -= 1
                            handsaw = False
                        elif handsaw:
                            self.computer.hp -= 6
                            print('ä½ ä½¿ç”¨äº†å¤§å£å¾‘å­å½ˆ,é€ æˆ6é»å‚·å®³')
                        else:
                            self.computer.hp -= 3
                            print('ä½ ä½¿ç”¨äº†å¤§å£å¾‘å­å½ˆ,é€ æˆ3é»å‚·å®³')
                        if remain_bullet.pop(0):
                            live_bullet -= 1
                        else:
                            blank -= 1
                        self.computer.pop_bullet_pattern()
                        handsaw = False
                    elif self.computer.item[steal-1] == 'æ¦´å½ˆç ²':
                        damage = self.player.hp 
                        self.player.hp = 1
                        if remain_bullet.pop(0):
                            if self.computer.fog > 0:
                                print('æœ¦æœ§åœ‹ç‹ä½¿ä½ å°„åäº†')
                                self.computer.fog -= 1
                                handsaw = False
                            elif handsaw:
                                self.computer.hp -= 2*damage
                                print('ä½ ä½¿ç”¨äº†æ¦´å½ˆç ²,é€ æˆ',2*damage,'é»å‚·å®³')
                                handsaw = False
                                if damage >= 15:
                                    lobby_NPC[0].unlock_achievement('å·¨ç ²')
                            else:
                                self.computer.hp -= damage
                                print('ä½ ä½¿ç”¨äº†æ¦´å½ˆç ²,é€ æˆ',damage,'é»å‚·å®³')
                                if damage >= 30:
                                    lobby_NPC[0].unlock_achievement('å·¨ç ²')
                            live_bullet -= 1
                        else:
                            print('ä½ ä½¿ç”¨äº†æ¦´å½ˆç ²,ä½†æ˜¯å­å½ˆæ‰“ç©ºäº†')
                            blank -= 1
                            handsaw = False
                        self.computer.pop_bullet_pattern()
                    elif self.computer.item[steal-1] == 'å½ˆè—¥åŒ…':
                        damage = live_bullet
                        if self.computer.fog > 0:
                            if damage > self.computer.fog:
                                damage -= self.computer.fog
                                self.computer.fog = 0
                                if handsaw:
                                    damage *= 2
                                self.computer.hp -= damage
                                print('ä½ ä½¿ç”¨äº†å½ˆè—¥åŒ…')
                                print('æœ¦æœ§åœ‹ç‹ä½¿ä½ å°„åäº†éƒ¨åˆ†å­å½ˆ,å°è‰è‰æ–¯é€ æˆ',damage,'é»å‚·å®³')
                            else:
                                print('ä½ ä½¿ç”¨äº†å½ˆè—¥åŒ…ï¼Œä½†æ˜¯æœ¦æœ§åœ‹ç‹ä½¿ä½ å°„åäº†æ‰€æœ‰å­å½ˆ') 
                                self.computer.fog -= damage
                        else:
                            if handsaw:
                                damage *= 2
                            print('ä½ ä½¿ç”¨äº†å½ˆè—¥åŒ…,å°è‰è‰æ–¯é€ æˆ',damage,'é»å‚·å®³')
                            self.computer.hp -= damage
                        handsaw = False
                        remain_bullet = []
                        live_bullet = 0
                        blank = 0
                        for i in range(8-len(remain_bullet)):
                            if random.randint(0,1):
                                remain_bullet.append(True)
                                live_bullet += 1
                            else:
                                remain_bullet.append(False)
                                blank += 1
                        random.shuffle(remain_bullet)
                        print('å½ˆè—¥å·²é‡æ–°è£å¡«')
                        self.computer.reset_bullet_pattern(live_bullet+blank)
                        if self.player.blessing > 0:
                            handsaw = self.blessing(remain_bullet,'ç©å®¶',handsaw)
                        
                    elif self.computer.item[steal-1] == 'è…ä¸Šè…ºç´ ':
                        print('ä½ ä¸èƒ½å·å–è…ä¸Šè…ºç´ ')
                        time.sleep(2)
                        lobby_NPC[0].unlock_achievement('å°±èªªäº†ä¸è¡Œ')
                        continue
                    else:
                        print('ä½ ä¸èƒ½å·å–åœ‹ç‹é“å…·')
                        continue
                    self.computer.item.pop(steal-1)

                if not_blue_print and not skip: 
                    self.player.item.pop(item-1)
                time.sleep(2)
                if self.computer.hp <= 0:
                    time.sleep(2)
                    print('**************************************')
                    print('ä½ è´äº†')
                    time.sleep(2)
                    return
                if not skip:
                    continue
            elif action==4:
                print('è‰è‰æ–¯çš„ç‰©å“æ¬„:',self.computer.item)
                time.sleep(4)
                continue
            if self.computer.hp <= 0:
                time.sleep(2)
                print('**************************************')
                print('ä½ è´äº†')
                time.sleep(2)
                return
            if self.player.hp <= 0:
                time.sleep(2)
                print('**************************************')
                print('ä½ æ­»äº†')
                time.sleep(2)
                return
            if len(remain_bullet) == 0:
                print('å­å½ˆæ‰“å®Œäº†')
                print('é€²å…¥ä¸‹ä¸€å±€')
                return
            if self.player.item_queen > 0:
                print('è”šè—çš‡åä½¿ä½ ç²å¾—éš¨æ©Ÿç‰©å“')
                time.sleep(1)
            for i in range(self.player.item_queen):
                self.give_participant_item(1,self.player)
            print('==========================================')
            print('è‰è‰æ–¯çš„å›åˆ')
            print('==========================================')
            time.sleep(1)
            try_count = 0
            not_blue_print = True

            if self.computer.handcuff:
                print('è‰è‰æ–¯è¢«æ‰‹éŠ¬éŠ¬ä½äº†,ç„¡æ³•è¡Œå‹•')
                self.computer.unhandcuff()
                continue

            skip = False
            not_blue_print = True

            while True:
                #è‰è‰æ–¯é€²è¡Œå‰©é¤˜å­å½ˆåˆ†æ
                if (live_bullet-self.computer.known_live) <= 0:
                    for i in range(len(self.computer.bullet_pattern)):
                        if self.computer.bullet_pattern[i] == 'unknown':
                            self.computer.set_bullet_pattern(i,'blank')
                elif (blank-self.computer.known_blank) <= 0:
                    for i in range(len(self.computer.bullet_pattern)):
                        if self.computer.bullet_pattern[i] == 'unknown':
                            self.computer.set_bullet_pattern(i,'live')
                if self.player.hp <= 0:
                    time.sleep(2)
                    print('**************************************')
                    print('ä½ æ­»äº†')
                    time.sleep(2)
                    return
                time.sleep(2)
                if len(remain_bullet) == 0:
                    print('å­å½ˆæ‰“å®Œäº†')
                    print('é€²å…¥ä¸‹ä¸€å±€')
                    return
                if (self.computer.rage_king > 0) and (handsaw == False):
                    print('ç‹‚æš´åœ‹ç‹çµ¦äºˆè‰è‰æ–¯æ‰‹é‰…æ•ˆæœ')
                    time.sleep(1)
                    handsaw = True
                    self.computer.rage_king -= 1
                if self.computer.item.count('è…¥ç´…çš‡å') > 0 & (not handsaw):
                    print('è…¥ç´…çš‡åä½¿è‰è‰æ–¯ç²å¾—æ‰‹é‹¸æ•ˆæœ')
                    time.sleep(1)
                    handsaw = True
                    self.computer.blood_queen -= 1
                #è‰è‰æ–¯çš„è¡Œå‹•åˆ¤æ–·
                if len(self.computer.bullet_pattern) != len(remain_bullet):
                    raise Exception('å­å½ˆæ•¸é‡ä¸ç¬¦')
                if len(self.computer.item) > 2 :
                    if try_count >= 3:
                        action = random.randint(1,2)
                        if self.computer.bullet_pattern[0] == 'live':
                            action = 1
                        elif self.computer.bullet_pattern[0] == 'blank':
                            action = 2
                    elif random.randint(1,4) == 4:
                        action = random.randint(1,2)
                    else:
                        action = 3
                elif ('æœ¦æœ§åœ‹ç‹' in self.computer.item or 'ç‹‚æš´åœ‹ç‹' in self.computer.item or 'ç‹¡è©åœ‹ç‹' in self.computer.item or 'è²ªå©ªåœ‹ç‹' in self.computer.item):
                    action = 3
                elif self.computer.bullet_pattern[0] == 'live':
                    action = 1
                elif self.computer.bullet_pattern[0] == 'blank':
                    action = 2
                elif len(self.computer.item) == 0:
                    action = random.randint(1,2)
                else:
                    action = random.randint(1,3)
                if (live_bullet > blank) & (action == 2):
                    action = 1
                if (self.computer.bullet_pattern[0] == 'live') and (action == 2):
                    action = 1
                elif (self.computer.bullet_pattern[0] == 'blank') and (action == 1):
                    action = 2
                
                if (self.computer.bullet_pattern[0] == 'blank') & ('è½‰æ›å™¨' in self.computer.item):
                    print('è‰è‰æ–¯ä½¿ç”¨äº†è½‰æ›å™¨,ç¾åœ¨é€™ç™¼å­å½ˆå°‡åè½‰')
                    remain_bullet[0] = True
                    live_bullet += 1
                    blank -= 1
                    self.computer.bullet_pattern[0] = 'live'
                    self.computer.item.remove('è½‰æ›å™¨')
                    time.sleep(2)
                    continue
                if (self.computer.bullet_pattern[0] == 'live') & ('æ‰‹é‹¸' in self.computer.item) and not handsaw:  
                    handsaw = True
                    print('è‰è‰æ–¯ä½¿ç”¨äº†æ‰‹é‹¸,ä¸‹ä¸€ç™¼å­å½ˆé€ æˆå…©å€å‚·å®³')
                    time.sleep(2)
                    self.computer.item.remove('æ‰‹é‹¸')
                    action = 1
                if 'æœªçŸ¥è—åœ–' in self.computer.item:
                    #é¦¬ä¸Šä½¿ç”¨æœªçŸ¥è—åœ–
                    print('è‰è‰æ–¯ä½¿ç”¨äº†æœªçŸ¥è—åœ–')
                    time.sleep(2)
                    temp = random.randint(1,5)
                    if temp == 1:
                        print('è‰è‰æ–¯ç²å¾—äº†ç¦è—¥')
                        
                        self.computer.item.append('ç¦è—¥')
                    elif temp == 2:
                        print('è‰è‰æ–¯ç²å¾—äº†å¤§å£å¾‘å­å½ˆ')
                        
                        self.computer.item.append('å¤§å£å¾‘å­å½ˆ')
                    elif temp == 3:
                        print('è‰è‰æ–¯ç²å¾—äº†æ¦´å½ˆç ²')
                        
                        self.computer.item.append('æ¦´å½ˆç ²')
                    elif temp == 4:
                        print('è‰è‰æ–¯ç²å¾—äº†å½ˆè—¥åŒ…')
                        
                        self.computer.item.append('å½ˆè—¥åŒ…')
                    elif temp == 5:
                        print('è‰è‰æ–¯ç²å¾—äº†æ“´å¢èƒŒåŒ…')
                        
                        self.computer.max_item += 1
                    self.computer.item.remove('æœªçŸ¥è—åœ–')
                    time.sleep(2)
                    continue
                if gun_lock and action == 2:
                    action = 1
                #è‰è‰æ–¯çš„è¡Œå‹•é¸é …å’Œç©å®¶ç›¸åŒ
                if action==1:
                    try_count = 0
                    if remain_bullet[0]&handsaw&killer_queen:
                        self.player.hp -= 10
                        print('è‰è‰æ–¯ä½¿ç”¨æ¼†é»‘çš‡åå°„ä¸­äº†ä½ ,é€ æˆåé»å‚·å®³')
                        if self.player.blood_queen > 0:
                            print('è…¥ç´…çš‡åä½¿ä½ å…ç–«é¡å¤–å‚·å®³')
                            self.player.hp += 5
                            self.player.blood_queen -= 1
                        handsaw = False
                        killer_queen = False
                        live_bullet -= 1
                        self.computer.pop_bullet_pattern()
                    elif remain_bullet[0]&killer_queen:
                        self.player.hp -= 5
                        print('è‰è‰æ–¯ä½¿ç”¨æ¼†é»‘çš‡åå°„ä¸­äº†ä½ ,é€ æˆäº”é»å‚·å®³')
                        live_bullet -= 1
                        self.computer.pop_bullet_pattern()
                        killer_queen = False
                    elif remain_bullet[0]&handsaw:
                        self.player.hp -= 2
                        print('è‰è‰æ–¯å°„ä¸­äº†ä½ ,é€ æˆå…©é»å‚·å®³')
                        if self.player.blood_queen > 0:
                            print('è…¥ç´…çš‡åä½¿ä½ å…ç–«é¡å¤–å‚·å®³')
                            self.player.hp += 1
                            self.player.blood_queen -= 1
                        handsaw = False
                        live_bullet -= 1
                        self.computer.pop_bullet_pattern()
                    elif remain_bullet[0]:
                        self.player.hp -= 1
                        print('è‰è‰æ–¯å°„ä¸­äº†ä½ ,é€ æˆä¸€é»å‚·å®³')
                        live_bullet -= 1
                        self.computer.pop_bullet_pattern()
                    else:
                        print('è‰è‰æ–¯çš„å­å½ˆæ‰“ç©ºäº†')
                        blank -= 1
                        self.computer.pop_bullet_pattern()
                        handsaw = False
                    remain_bullet.pop(0)
                    handsaw = False
                elif action==2:
                    try_count = 0
                    if remain_bullet[0] and (self.computer.fog > 0):
                        print('æœ¦æœ§åœ‹ç‹ä½¿è‰è‰æ–¯å°„åäº†')
                        self.computer.fog -= 1
                        handsaw = False
                        killer_queen = False
                        live_bullet -= 1
                        self.computer.pop_bullet_pattern()
                    elif remain_bullet[0]&handsaw&killer_queen:
                        self.computer.hp -= 10
                        print('è‰è‰æ–¯ä½¿ç”¨æ¼†é»‘çš‡åå°„ä¸­äº†è‡ªå·±,é€ æˆåé»å‚·å®³')
                        if self.computer.blood_queen > 0:
                            print('è…¥ç´…çš‡åä½¿ä½ å…ç–«é¡å¤–å‚·å®³')
                            self.computer.hp += 5
                            self.computer.blood_queen -= 1
                        else:
                            print('ä½ é€ƒéäº†ä¸€æˆª')
                        handsaw = False
                        killer_queen = False
                        live_bullet -= 1
                        self.computer.pop_bullet_pattern()
                    elif remain_bullet[0]&killer_queen:
                        self.computer.hp -= 5
                        print('è‰è‰æ–¯ä½¿ç”¨æ¼†é»‘çš‡åå°„ä¸­äº†è‡ªå·±,é€ æˆäº”é»å‚·å®³')
                        print('ä½ é€ƒéäº†ä¸€æˆª')
                        live_bullet -= 1
                        self.computer.pop_bullet_pattern()
                        killer_queen = False
                    elif remain_bullet[0]&handsaw:
                        self.computer.hp -= 2
                        print('è‰è‰æ–¯å°„ä¸­äº†è‡ªå·±,é€ æˆå…©é»å‚·å®³')
                        if self.computer.blood_queen > 0:
                            print('è…¥ç´…çš‡åä½¿è‰è‰æ–¯å…ç–«é¡å¤–å‚·å®³')
                            self.computer.hp += 1
                            self.computer.blood_queen -= 1
                        handsaw = False
                        live_bullet -= 1
                        self.computer.pop_bullet_pattern()
                    elif remain_bullet[0]:
                        self.computer.hp -= 1
                        print('è‰è‰æ–¯å°„ä¸­äº†è‡ªå·±,é€ æˆä¸€é»å‚·å®³')
                        live_bullet -= 1
                        self.computer.pop_bullet_pattern()
                        handsaw = False
                    else:
                        print('è‰è‰æ–¯å°„å‘è‡ªå·±ï¼Œå­å½ˆæ‰“ç©ºäº†,é¡å¤–ç²å¾—ä¸€å›åˆ')
                        remain_bullet.pop(0)
                        self.computer.pop_bullet_pattern()
                        blank -= 1
                        handsaw = False
                        continue
                    remain_bullet.pop(0)
                    handsaw = False
                elif action==3:
                    item = random.randint(0,len(self.computer.item)-1)
                    if (self.computer.item[item] == 'å•¤é…’') & (self.computer.bullet_pattern[0]=='live'):
                        try_count +=1
                        continue
                    if (self.computer.item[item] == 'æ‰‹éŠ¬') & self.player.handcuff:
                        try_count +=1
                        continue
                    if (self.computer.item[item] == 'æ‰‹æ©Ÿ') & (len(remain_bullet) <= 2):
                        try_count +=1
                        continue
                    if (self.computer.item[item] == 'æ‰‹é‹¸') & handsaw:
                        try_count +=1
                        continue
                    if (self.computer.item[item] == 'æ‰‹é‹¸') & (self.computer.bullet_pattern[0] == 'blank'):
                        try_count +=1
                        continue
                    if (self.computer.item[item] == 'æ¦´å½ˆç ²') & (self.computer.bullet_pattern[0] == 'blank'):
                        try_count +=1
                        continue
                    if (self.computer.item[item] == 'æ”¾å¤§é¡') & (self.computer.bullet_pattern[0] == 'blank'):
                        try_count +=1
                        continue
                    if (self.computer.item[item] == 'æ”¾å¤§é¡') & (self.computer.bullet_pattern[0] == 'live'):
                        try_count +=1
                        continue
                    if (self.computer.item[item] == 'æ‰‹æ©Ÿ') & ('unknown' not in self.computer.bullet_pattern):
                        try_count +=1
                        continue
                    if (self.computer.item[item] == 'è…ä¸Šè…ºç´ ') & (len(self.player.item) == 0):
                        try_count +=1
                        continue     
                    try_count = 0
                    if self.computer.item[item] == 'æ‰‹é‹¸':
                        handsaw = True
                        print('è‰è‰æ–¯ä½¿ç”¨äº†æ‰‹é‹¸,ä¸‹ä¸€ç™¼å­å½ˆé€ æˆå…©å€å‚·å®³')
                    elif self.computer.item[item] == 'å•¤é…’':
                        if remain_bullet.pop(0):
                            print('è‰è‰æ–¯ä½¿ç”¨äº†å•¤é…’,é€€æ‰ä¸€ç™¼å¯¦å½ˆ')
                            live_bullet -= 1
                            self.computer.pop_bullet_pattern()
                        else:
                            print('è‰è‰æ–¯ä½¿ç”¨äº†å•¤é…’,é€€æ‰ä¸€ç™¼ç©ºåŒ…å½ˆ')
                            blank -= 1
                            self.computer.pop_bullet_pattern()
                        if len(remain_bullet) == 0:
                            print('å­å½ˆæ‰“å®Œäº†')
                            print('é€²å…¥ä¸‹ä¸€å±€')
                            return
                    elif self.computer.item[item] == 'æ‰‹æ©Ÿ':
                        print('è‰è‰æ–¯ä½¿ç”¨äº†æ‰‹æ©Ÿ')
                        if len(remain_bullet) == 1:
                            n = 0
                        else:
                            n=random.randint(1,len(remain_bullet)-1)
                        if remain_bullet[n]:
                            self.computer.set_bullet_pattern(n,'live')
                        else:
                            self.computer.set_bullet_pattern(n,'blank')
                    elif self.computer.item[item] == 'è½‰æ›å™¨':
                        print('è‰è‰æ–¯ä½¿ç”¨äº†è½‰æ›å™¨,ç¾åœ¨é€™ç™¼å­å½ˆå°‡åè½‰')
                        remain_bullet[0] = not remain_bullet[0]
                        if remain_bullet[0]:
                            live_bullet += 1
                            blank -= 1
                        else:
                            live_bullet -= 1
                            blank += 1
                        if self.computer.bullet_pattern[0] == 'live':
                            self.computer.set_bullet_pattern(0,'blank')
                        elif self.computer.bullet_pattern[0] == 'blank':
                            self.computer.set_bullet_pattern(0,'live')
                    elif self.computer.item[item] == 'éæœŸè—¥ç‰©':
                        print('è‰è‰æ–¯ä½¿ç”¨äº†éæœŸè—¥ç‰©')
                        self.computer.hp += 2
                        print('è‰è‰æ–¯å›å¾©äº†å…©é»è¡€é‡')
                    elif self.computer.item[item] == 'æ”¾å¤§é¡':
                        print('è‰è‰æ–¯ä½¿ç”¨äº†æ”¾å¤§é¡')
                        self.computer.set_bullet_pattern(0,'live' if remain_bullet[0] else 'blank')
                    elif self.computer.item[item] == 'é¦™è¸':
                        print('è‰è‰æ–¯ä½¿ç”¨äº†é¦™è¸,å›å¾©ä¸€é»è¡€é‡')
                        self.computer.hp += 1
                    elif self.computer.item[item] == 'æ‰‹éŠ¬':
                        print('è‰è‰æ–¯ä½¿ç”¨äº†æ‰‹éŠ¬,ä½ ä¸‹å›åˆç„¡æ³•è¡Œå‹•')
                        self.player.dohandcuff()
                    elif self.computer.item[item] == 'æœ¦æœ§åœ‹ç‹':
                        print('è‰è‰æ–¯ä½¿ç”¨äº†***æœ¦æœ§åœ‹ç‹***ï¼Œæ¯å›åˆé¡å¤–å…ç–«ä¸€æ¬¡å‚·å®³')
                        self.player.queen_used.append('æœ¦æœ§åœ‹ç‹')
                        #fog_kingç‚ºä¸Šé™ï¼Œfogç‚ºç•¶å‰å…ç–«æ¬¡æ•¸
                        self.computer.fog_king += 1
                        self.computer.fog += 1
                    elif self.computer.item[item] == 'ç‹‚æš´åœ‹ç‹':
                        print('è‰è‰æ–¯ä½¿ç”¨äº†***ç‹‚æš´åœ‹ç‹***ï¼Œä¸‹5ç™¼å­å½ˆé€ æˆå…©å€å‚·å®³')
                        self.player_queen_used.append('ç‹‚æš´åœ‹ç‹')   
                        self.computer.rage_king += 5
                    elif self.computer.item[item] == 'ç‹¡è©åœ‹ç‹':
                        print('è‰è‰æ–¯ä½¿ç”¨äº†***ç‹¡è©åœ‹ç‹***ï¼Œèƒ½å¤ é çŸ¥éƒ¨åˆ†æœªä¾†')
                        self.player.queen_used.append('ç‹¡è©åœ‹ç‹')
                        self.computer.trick_king += 3
                    elif self.computer.item[item] == 'è²ªå©ªåœ‹ç‹':
                        print('è‰è‰æ–¯ä½¿ç”¨äº†***è²ªå©ªåœ‹ç‹***ï¼Œå·èµ°ä½ çš„é“å…·')
                        self.player.queen_used.append('è²ªå©ªåœ‹ç‹')
                        #å·èµ°ç©å®¶æ‰€æœ‰éçš‡åé“å…·ï¼Œç•™ä¸‹çš‡åé“å…·
                        temp_item = []
                        for i in range(len(self.player.item)):
                            if self.player.item[i] != 'æ¼†é»‘çš‡å' and self.player.item[i] != 'ç¥è–çš‡å' and self.player.item[i] != 'è”šè—çš‡å' and self.player.item[i] != 'è…¥ç´…çš‡å':
                                self.computer.item.append(self.player.item[i])
                            else:
                                temp_item.append(self.player.item[i])
                        self.player.item = temp_item                         
                        self.computer.item.remove('è²ªå©ªåœ‹ç‹')
                        skip = True
                    elif self.computer.item[item] == 'æœªçŸ¥è—åœ–':
                        print('è‰è‰æ–¯ä½¿ç”¨äº†æœªçŸ¥è—åœ–')
                        time.sleep(2)
                        temp = random.randint(1,5)
                        if temp == 1:
                            print('è‰è‰æ–¯ç²å¾—äº†ç¦è—¥')
                            self.computer.item.pop(item)
                            self.computer.item.append('ç¦è—¥')
                        elif temp == 2:
                            print('è‰è‰æ–¯ç²å¾—äº†å¤§å£å¾‘å­å½ˆ')
                            self.computer.item.pop(item)
                            self.computer.item.append('å¤§å£å¾‘å­å½ˆ')
                        elif temp == 3:
                            print('è‰è‰æ–¯ç²å¾—äº†æ¦´å½ˆç ²')
                            self.computer.item.pop(item)
                            self.computer.item.append('æ¦´å½ˆç ²')
                        elif temp == 4:
                            print('è‰è‰æ–¯ç²å¾—äº†å½ˆè—¥åŒ…')
                            self.computer.item.pop(item)
                            self.computer.item.append('å½ˆè—¥åŒ…')
                        elif temp == 5:
                            print('è‰è‰æ–¯ç²å¾—äº†æ“´å¢èƒŒåŒ…')
                            self.computer.item.pop(item)
                            self.computer.max_item += 1
                    elif self.computer.item[item] == 'ç¦è—¥':
                        print('è‰è‰æ–¯ä½¿ç”¨äº†ç¦è—¥')
                        self.computer.hp *= 2
                        self.computer.hp += 3
                        print('è‰è‰æ–¯çš„è¡€é‡å¤§å¹…æå‡,ç¾åœ¨è¡€é‡ç‚º',self.computer.hp)
                    elif self.computer.item[item] == 'å¤§å£å¾‘å­å½ˆ':
                        self.computer.item.pop(item)
                        if handsaw:
                            self.player.hp -= 6
                            print('è‰è‰æ–¯ä½¿ç”¨äº†å¤§å£å¾‘å­å½ˆ,é€ æˆ6é»å‚·å®³')
                        else:
                            self.player.hp -= 3
                            print('è‰è‰æ–¯ä½¿ç”¨äº†å¤§å£å¾‘å­å½ˆ,é€ æˆ3é»å‚·å®³')
                        if remain_bullet.pop(0):
                            live_bullet -= 1
                        else:
                            blank -= 1
                        self.computer.pop_bullet_pattern()
                        skip = True
                        handsaw = False
                    elif self.computer.item[item] == 'æ¦´å½ˆç ²':
                        self.computer.item.pop(item)
                        damage = self.computer.hp 
                        self.computer.hp = 1
                        if remain_bullet.pop(0):
                            if handsaw:
                                self.player.hp -= 2*damage
                                print('è‰è‰æ–¯ä½¿ç”¨äº†æ¦´å½ˆç ²,é€ æˆ',2*damage,'é»å‚·å®³')
                                handsaw = False
                            else:
                                self.player.hp -= damage
                                print('è‰è‰æ–¯ä½¿ç”¨äº†æ¦´å½ˆç ²,é€ æˆ',damage,'é»å‚·å®³')
                            live_bullet -= 1
                        else:
                            print('è‰è‰æ–¯ä½¿ç”¨äº†æ¦´å½ˆç ²,ä½†æ˜¯å­å½ˆæ‰“ç©ºäº†')
                            blank -= 1
                            handsaw = False

                        self.computer.pop_bullet_pattern()
                        skip = True
                    elif self.computer.item[item] == 'å½ˆè—¥åŒ…':
                        damage = live_bullet
                        if handsaw:
                            damage *= 2
                            handsaw = False 
                        self.player.hp -= damage
                        print('è‰è‰æ–¯ä½¿ç”¨äº†å½ˆè—¥åŒ…,å°ä½ é€ æˆ',damage,'é»å‚·å®³')
                        remain_bullet = []
                        live_bullet = 0
                        blank = 0
                        for i in range(8-len(remain_bullet)):
                            if random.randint(0,1):
                                remain_bullet.append(True)
                                live_bullet += 1
                            else:
                                remain_bullet.append(False)
                                blank += 1
                        random.shuffle(remain_bullet)
                        print('å½ˆè—¥å·²é‡æ–°è£å¡«')
                        if self.player.blessing > 0:
                            handsaw = self.blessing(remain_bullet,'è‰è‰æ–¯',handsaw)
                        self.computer.reset_bullet_pattern(live_bullet+blank)

                    elif self.computer.item[item] == 'è…ä¸Šè…ºç´ ':    
                        print('è‰è‰æ–¯ä½¿ç”¨äº†è…ä¸Šè…ºç´ ,å¯ä»¥å·å–ä½ çš„ç‰©å“')
                        if len(self.player.item) == 0:
                            print('ä½ æ²’æœ‰ç‰©å“å¯ä»¥å·å–')
                            continue
                        #éš¨æ©Ÿå·å–ç©å®¶çš„ä¸€ä»¶ç‰©å“ï¼Œé¦¬ä¸Šä½¿ç”¨å·å–çš„ç‰©å“
                        target = random.randint(0,len(self.player.item)-1)
                        steal = self.player.item.pop(target)
                        if steal == 'æ‰‹é‹¸':
                            handsaw = True
                            print('è‰è‰æ–¯å·èµ°äº†æ‰‹é‹¸,ä¸‹ä¸€ç™¼å­å½ˆé€ æˆå…©å€å‚·å®³')
                        elif steal == 'å•¤é…’':
                            if remain_bullet.pop(0):
                                print('è‰è‰æ–¯å·èµ°äº†å•¤é…’,é€€æ‰ä¸€ç™¼å¯¦å½ˆ')
                                live_bullet -= 1
                                self.computer.pop_bullet_pattern()
                            else:
                                print('è‰è‰æ–¯å·èµ°äº†å•¤é…’,é€€æ‰ä¸€ç™¼ç©ºåŒ…å½ˆ')
                                blank -= 1
                                self.computer.pop_bullet_pattern()
                            if len(remain_bullet) == 0:
                                print('å­å½ˆæ‰“å®Œäº†')
                                print('é€²å…¥ä¸‹ä¸€å±€')
                                return
                        elif steal == 'æ‰‹æ©Ÿ':
                            print('è‰è‰æ–¯å·èµ°äº†æ‰‹æ©Ÿ')
                            if len(remain_bullet) == 1:
                                n = 0
                            else:
                                n=random.randint(1,len(remain_bullet)-1)
                            if remain_bullet[n]:
                                self.computer.set_bullet_pattern(n,'live')
                            else:
                                self.computer.set_bullet_pattern(n,'blank')
                        elif steal == 'è½‰æ›å™¨':
                            print('è‰è‰æ–¯å·èµ°äº†è½‰æ›å™¨,ç¾åœ¨é€™ç™¼å­å½ˆå°‡åè½‰')
                            remain_bullet[0] = not remain_bullet[0]
                            if remain_bullet[0]:
                                live_bullet += 1
                                blank -= 1
                            else:
                                live_bullet -= 1
                                blank += 1
                            if self.computer.bullet_pattern[0] == 'live':
                                self.computer.set_bullet_pattern(0,'blank')
                            elif self.computer.bullet_pattern[0] == 'blank':
                                self.computer.set_bullet_pattern(0,'live')
                        elif steal == 'éæœŸè—¥ç‰©':
                            print('è‰è‰æ–¯å·èµ°äº†éæœŸè—¥ç‰©')
                            self.computer.hp += 2
                            print('è‰è‰æ–¯å›å¾©äº†å…©é»è¡€é‡')
                        elif steal == 'æ”¾å¤§é¡':
                            print('è‰è‰æ–¯å·èµ°äº†æ”¾å¤§é¡')
                            self.computer.set_bullet_pattern(0,'live' if remain_bullet[0] else 'blank')
                        elif steal == 'é¦™è¸':
                            print('è‰è‰æ–¯å·èµ°äº†é¦™è¸,å›å¾©ä¸€é»è¡€é‡')
                            self.computer.hp += 1
                        elif steal == 'æ‰‹éŠ¬':
                            print('è‰è‰æ–¯å·èµ°äº†æ‰‹éŠ¬,ä½ ä¸‹å›åˆç„¡æ³•è¡Œå‹•')
                            self.player.dohandcuff()
                        elif steal == 'æ¼†é»‘çš‡å':
                            #æ•ˆæœå’Œç©å®¶ä½¿ç”¨æ¼†é»‘çš‡åç›¸åŒ
                            print('è‰è‰æ–¯å·èµ°äº†æ¼†é»‘çš‡åï¼Œå½ˆè—¥è£å¡«ç‚ºä¸€ç™¼ç©ºåŒ…å½ˆä¸€ç™¼5é»å‚·å®³å¯¦å½ˆï¼Œç¥ˆç¦±å§!')
                            self.computer.item = []
                            self.player.item = []
                            remain_bullet = [True,False]
                            live_bullet = 1
                            blank = 1
                            self.computer.reset_bullet_pattern(live_bullet+blank)
                            random.shuffle(remain_bullet)
                            killer_queen = True
                            not_blue_print = False
                            if self.player.blessing > 0:
                                self.blessing(remain_bullet,'è‰è‰æ–¯',handsaw)
                        elif steal == 'ç¥è–çš‡å':
                            #æ•ˆæœå’Œç©å®¶ä½¿ç”¨ç¥è–çš‡åç›¸åŒ
                            print('è‰è‰æ–¯å·èµ°äº†ç¥è–çš‡åï¼Œå›å¾©3é»è¡€é‡ï¼ŒèƒŒåŒ…ä¸Šé™+2ï¼Œç²å¾—3å€‹éš¨æ©Ÿç‰©å“')
                            self.computer.hp += 3
                            self.computer.max_item += 2
                            self.give_participant_item(3,self.computer)
                        elif steal == 'è”šè—çš‡å':
                            #æ•ˆæœå’Œç©å®¶ä½¿ç”¨è”šè—çš‡åç›¸åŒ
                            print('è‰è‰æ–¯å·èµ°äº†è”šè—çš‡åï¼Œä½ ç²å¾—å›åˆæ™‚è‰è‰æ–¯å°‡ç²å¾—éš¨æ©Ÿç‰©å“')
                            self.computer.item_queen += 1
                        elif steal == 'è…¥ç´…çš‡å':
                            #æ•ˆæœå’Œç©å®¶ä½¿ç”¨è…¥ç´…çš‡åç›¸åŒ
                            print('è‰è‰æ–¯å·èµ°äº†è…¥ç´…çš‡åï¼Œä½ ç²å¾—å›åˆæ™‚è‰è‰æ–¯å°‡ç²å¾—æ‰‹é‹¸æ•ˆæœ')
                            self.computer.blood_queen += 1
                            
                        elif steal == 'æœªçŸ¥è—åœ–':
                            temp = random.randint(1,5)
                            if temp == 1:
                                print('è‰è‰æ–¯ç²å¾—äº†ç¦è—¥')
                                self.computer.item.append('ç¦è—¥')
                            elif temp == 2:
                                print('è‰è‰æ–¯ç²å¾—äº†å¤§å£å¾‘å­å½ˆ')
                                self.computer.item.append('å¤§å£å¾‘å­å½ˆ')
                            elif temp == 3:
                                print('è‰è‰æ–¯ç²å¾—äº†æ¦´å½ˆç ²')
                                self.computer.item.append('æ¦´å½ˆç ²')
                            elif temp == 4:
                                print('è‰è‰æ–¯ç²å¾—äº†å½ˆè—¥åŒ…')
                                self.computer.item.append('å½ˆè—¥åŒ…')
                            elif temp == 5:
                                print('è‰è‰æ–¯ç²å¾—äº†æ“´å¢èƒŒåŒ…')
                                self.computer.max_item += 1
                        elif steal == 'ç¦è—¥':
                            print('è‰è‰æ–¯å·èµ°äº†ç¦è—¥')
                            print('è‰è‰æ–¯çš„è¡€é‡å¤§å¹…æå‡,ç¾åœ¨è¡€é‡ç‚º',self.computer.hp)
                        elif steal == 'å¤§å£å¾‘å­å½ˆ':
                            if handsaw:
                                self.player.hp -= 6
                                print('è‰è‰æ–¯å·èµ°äº†å¤§å£å¾‘å­å½ˆ,é€ æˆ6é»å‚·å®³')
                            else:
                                self.player.hp -= 3
                                print('è‰è‰æ–¯å·èµ°äº†å¤§å£å¾‘å­å½ˆ,é€ æˆ3é»å‚·å®³')
                            if remain_bullet.pop(0):
                                live_bullet -= 1
                            else:
                                blank -= 1
                            handsaw = False
                            self.computer.pop_bullet_pattern()
                            if self.player.handcuff:
                                print('ä½ è¢«æ‰‹éŠ¬éŠ¬ä½äº†,ç„¡æ³•è¡Œå‹•')
                                self.player.unhandcuff()
                                try_count = 0
                                continue
                            else:
                                break
                        elif steal == 'æ¦´å½ˆç ²':
                            damage = self.computer.hp 
                            self.computer.hp = 1
                            if remain_bullet.pop(0):
                                if handsaw:
                                    self.player.hp -= 2*damage
                                    print('è‰è‰æ–¯å·èµ°äº†æ¦´å½ˆç ²,é€ æˆ',2*damage,'é»å‚·å®³')
                                    handsaw = False
                                else:
                                    self.player.hp -= damage
                                    print('è‰è‰æ–¯å·èµ°äº†æ¦´å½ˆç ²,é€ æˆ',damage,'é»å‚·å®³')
                                live_bullet -= 1
                            else:
                                print('è‰è‰æ–¯å·èµ°äº†æ¦´å½ˆç ²,ä½†æ˜¯å­å½ˆæ‰“ç©ºäº†')
                                blank -= 1
                                handsaw = False
                            self.computer.pop_bullet_pattern()
                            if self.player.handcuff:
                                print('ä½ è¢«æ‰‹éŠ¬éŠ¬ä½äº†,ç„¡æ³•è¡Œå‹•')
                                self.player.unhandcuff()
                                try_count = 0
                                continue
                            else:
                                break
                        elif steal == 'å½ˆè—¥åŒ…':
                            damage = live_bullet
                            if handsaw:
                                self.player.hp -= 2*damage
                                handsaw = False
                            self.player.hp -= damage
                            print('è‰è‰æ–¯å·èµ°äº†å½ˆè—¥åŒ…,å°ä½ é€ æˆ',damage,'é»å‚·å®³')
                            remain_bullet = []
                            live_bullet = 0
                            blank = 0
                            for i in range(8-len(remain_bullet)):
                                if random.randint(0,1):
                                    remain_bullet.append(True)
                                    live_bullet += 1
                                else:
                                    remain_bullet.append(False)
                                    blank += 1
                            random.shuffle(remain_bullet)
                            print('å½ˆè—¥å·²é‡æ–°è£å¡«')
                            if self.player.blessing > 0:
                                handsaw = self.blessing(remain_bullet,'è‰è‰æ–¯',handsaw)
                            self.computer.reset_bullet_pattern(live_bullet+blank)
                        elif steal == 'è…ä¸Šè…ºç´ ':
                            print('è‰è‰æ–¯è©¦è‘—å·å–è…ä¸Šè…ºç´ ä½†å¤±æ•—äº†')
                            self.player.item.append('è…ä¸Šè…ºç´ ')
                        elif steal == 'ç‰ç’ƒçš‡å':
                            print('è‰è‰æ–¯è©¦è‘—å·å–ç‰ç’ƒçš‡åä½†å¤±æ•—äº†')
                            self.player.item.append('ç‰ç’ƒçš‡å')
                    if skip and not self.player.handcuff:
                        break
                    elif skip and self.player.handcuff:
                        print('ä½ è¢«æ‰‹éŠ¬éŠ¬ä½äº†,ç„¡æ³•è¡Œå‹•')
                        self.player.unhandcuff()
                        try_count = 0
                        continue
                    if not_blue_print:
                        self.computer.item.pop(item)
                    continue
                if self.player.hp <= 0:
                    time.sleep(2)
                    print('**************************************')
                    print('ä½ æ­»äº†')
                    time.sleep(2)
                    return
                if self.computer.hp <= 0:
                    time.sleep(2)
                    print('**************************************')
                    print('ä½ è´äº†')
                    time.sleep(2)
                    return
                if self.player.handcuff:
                    print('ä½ è¢«æ‰‹éŠ¬éŠ¬ä½äº†,ç„¡æ³•è¡Œå‹•')
                    self.player.unhandcuff()
                    try_count = 0
                    continue
                if len(remain_bullet) == 0:
                    print('å­å½ˆæ‰“å®Œäº†')
                    print('é€²å…¥ä¸‹ä¸€å±€')
                    return
                if self.computer.item_queen > 0:
                    print('è”šè—çš‡åä½¿è‰è‰æ–¯ç²å¾—éš¨æ©Ÿç‰©å“')
                    time.sleep(1)
                for i in range(self.computer.item_queen):
                    self.give_participant_item(1,self.computer)
                break      

#æ–°æ‰‹æ•™å­¸
class tutorial_game(challenge_mode):
    def __init__(self,player,computer,hp):
        game.__init__(self,player,computer,hp,1)
    def basic_one_round(self, live_bullet, blank):
        super().one_round_Samael(live_bullet, blank, 0)
    def give_item(self, number):
        for i in range(number):
            if len(self.player.item) < self.player.max_item:                
                item = self.item_list[random.randint(0,len(self.item_list)-1)]
                print('ä½ ç²å¾—äº†',item)
                self.player.item.append(item)
            else:
                print('ä½ çš„ç‰©å“æ¬„å·²æ»¿')
            if len(self.computer.item) < self.computer.max_item:
                self.computer.item.append(self.item_list[random.randint(0,len(self.item_list)-1)])
        self.player.item.sort(key = ['ç‰ç’ƒçš‡å','æ¼†é»‘çš‡å','ç¥è–çš‡å','è”šè—çš‡å','è…¥ç´…çš‡å','æœªçŸ¥è—åœ–','ç¦è—¥','å¤§å£å¾‘å­å½ˆ','æ¦´å½ˆç ²','å½ˆè—¥åŒ…','æ”¾å¤§é¡','é¦™è¸','æ‰‹é‹¸','å•¤é…’','æ‰‹éŠ¬','æ‰‹æ©Ÿ','è½‰æ›å™¨','éæœŸè—¥ç‰©','è…ä¸Šè…ºç´ '].index)
        self.computer.item.sort(key = ['æœ¦æœ§åœ‹ç‹','ç‹‚æš´åœ‹ç‹','ç‹¡è©åœ‹ç‹','è²ªå©ªåœ‹ç‹','æœªçŸ¥è—åœ–','ç¦è—¥','å¤§å£å¾‘å­å½ˆ','æ¦´å½ˆç ²','å½ˆè—¥åŒ…','æ”¾å¤§é¡','é¦™è¸','æ‰‹é‹¸','å•¤é…’','æ‰‹éŠ¬','æ‰‹æ©Ÿ','è½‰æ›å™¨','éæœŸè—¥ç‰©','è…ä¸Šè…ºç´ '].index)
    
    def item_one_round(self, live_bullet, blank, item_number):
        super().one_round_Lilit(live_bullet, blank, item_number)
        
#å­˜è®€æª”
def save_game(main_player, lobby_NPC):
    with open('savefile.pkl', 'wb') as f:
        pickle.dump((main_player, lobby_NPC), f)
    print('éŠæˆ²å·²å„²å­˜')

def load_game():
    with open('savefile.pkl', 'rb') as f:
        main_player, lobby_NPC = pickle.load(f)
    return main_player, lobby_NPC
#ä¸»ç¨‹å¼
if __name__ == '__main__':
    if os.path.exists('savefile.pkl'):
        action = input('æ˜¯å¦è¼‰å…¥å­˜æª”? y/n')
        if action == 'y':
            main_player, lobby_NPC = load_game()
            lobby_NPC[1]=(shopkeeper())
        else:
            main_player = player_in_lobby(input('è«‹è¼¸å…¥è§’è‰²åå­—:'),0)
            lobby_NPC = []
            lobby_NPC.append(collection_manager())
            lobby_NPC.append(shopkeeper())
            lobby_NPC.append(host())
            #æ–°æ‰‹æ•™å­¸  
            lobby_NPC[2].tutorial()
    else:
        main_player = player_in_lobby(input('è«‹è¼¸å…¥è§’è‰²åå­—:'),0)
        lobby_NPC = []
        lobby_NPC.append(collection_manager())
        lobby_NPC.append(shopkeeper())
        lobby_NPC.append(host())
        #æ–°æ‰‹æ•™å­¸  
        lobby_NPC[2].tutorial()
    while True:
        risk = 1
        first_move = 'ç©å®¶'
        money = 0
        in_challenge_mode = False
        if main_player.money >= 10000000:
            lobby_NPC[0].unlock_achievement('ç¬¬ä¸€æ¡¶é‡‘')
        if main_player.money >= 500000000:
            lobby_NPC[0].unlock_achievement('è²¡å¯Œè‡ªç”±')
        if main_player.money >= 999999999999:
            lobby_NPC[0].unlock_achievement('å¯Œå¯æ•µåœ‹')
        if main_player.extra_hp >= 6:
            time.sleep(1)
            lobby_NPC[0].unlock_achievement('æ»¿è¡€') 

        #è‡ªå‹•å­˜æª”
        save_game(main_player, lobby_NPC)

        print('=====================================    BuckShot    =====================================')
        print('ä½ çš„åå­—æ˜¯',main_player.name,'ä½ çš„é‡‘éŒ¢æ˜¯',main_player.money,'ä½ çš„é“å…·æ¬„ä½æ˜¯',main_player.max_item,'ä½ çš„é¡å¤–è¡€é‡æ˜¯',main_player.extra_hp)
        if len(main_player.unlockable_item) > 0:
            main_player.show_unlockable_item()
        if len(main_player.item) > 0:    
            main_player.show_item()
        print('==========================================================================================')
        action = input('ä½ ç«™åœ¨åµé›œçš„è³­å ´ä¸­ï¼Œè¼¸å…¥1æŸ¥çœ‹è¦å‰‡,è¼¸å…¥2é€ è¨ªå•†åº—,è¼¸å…¥3å‰å¾€åœ–é‘‘,æŒ‰ä¸‹Enterå‰å¾€è³­æ¡Œ  ')
        if action == '1':
            print('ä½ å«ä½äº†è–©é‚çˆ¾')
            time.sleep(2)
            if lobby_NPC[2].devil_dependency:
                print('è–©é‚çˆ¾: è¦ªæ„›çš„çœ·å±¬ï¼Œéœ€è¦ä»€éº¼å¹«åŠ©å—?')
            else:
                lobby_NPC[2].say_normal_dialogue()
                print('è–©é‚çˆ¾: éœ€è¦ä»€éº¼å¹«åŠ©å—?')
            time.sleep(2)
            lobby_NPC[2].show_rule()
            continue
        elif action == '2':
            print('ä½ èµ°é€²äº†é™°æš—çš„åº—å…§')
            time.sleep(1)
            lobby_NPC[1].say_normal_dialogue()
            time.sleep(1.5)
            for i in range(len(lobby_NPC[1].shop)):
                lobby_NPC[1].shop[i].show_item(i+1)
            print('8 é›¢é–‹å•†åº—')
            action = input(f'ä½ æœ‰ {main_player.money} å…ƒï¼Œè³¼è²·å•†å“?')
            if action == '1':
                if main_player.money >= lobby_NPC[1].shop[0].price and lobby_NPC[1].shop[0].check_required_item(main_player):
                    main_player.buy_item('äººå·¥å¿ƒè‡Ÿ',lobby_NPC[1].shop[0].price)
                    lobby_NPC[1].player_buy_item(0)
                    print('ä½ è³¼è²·äº†äººå·¥å¿ƒè‡Ÿï¼Œä½ ç¾åœ¨æœ‰',main_player.unlockable_item.count('äººå·¥å¿ƒè‡Ÿ'),'æ¬¡å¾©æ´»æ©Ÿæœƒ')
                else:
                    print('ä½ çš„éŒ¢ä¸å¤ æˆ–è€…é€£å‹æ•¸ä¸è¶³')
            elif action == '2':
                if main_player.money >= lobby_NPC[1].shop[1].price and lobby_NPC[1].shop[1].check_required_item(main_player):
                    main_player.max_item += 1
                    main_player.money -= lobby_NPC[1].shop[1].price  
                    lobby_NPC[1].player_buy_item(1) 
                    print('ä½ çš„é“å…·æ¬„ä½å¢åŠ äº†ï¼Œç¾åœ¨å¯ä»¥ä¿å­˜',main_player.max_item,'å€‹é“å…·')
                else:
                    print('ä½ çš„éŒ¢ä¸å¤ æˆ–è€…é€£å‹æ•¸ä¸è¶³')
            elif action == '3':
                if main_player.money >= lobby_NPC[1].shop[2].price and lobby_NPC[1].shop[2].check_required_item(main_player): 
                    print('ä½ è§£é–äº†æ°¸ä¹…éš¨æ©Ÿçš‡å') 
                    main_player.buy_item('éš¨æ©Ÿçš‡å',lobby_NPC[1].shop[2].price)
                    lobby_NPC[1].player_buy_item(2)
                else:
                    print('ä½ çš„éŒ¢ä¸å¤ æˆ–è€…é€£å‹æ•¸ä¸è¶³')
            elif action == '4':
                if main_player.money >= lobby_NPC[1].shop[3].price and lobby_NPC[1].shop[3].check_required_item(main_player):
                    main_player.extra_hp += 1
                    main_player.money -= lobby_NPC[1].shop[3].price  
                    lobby_NPC[1].player_buy_item(3)
                    print('ä½ çš„è¡€é‡å¢åŠ äº†ï¼Œç¾åœ¨æœ‰',main_player.extra_hp,'é»é¡å¤–è¡€é‡')
                else:
                    print('ä½ çš„éŒ¢ä¸å¤ æˆ–è€…é€£å‹æ•¸ä¸è¶³')
            elif action == '5':
                if main_player.money >= lobby_NPC[1].shop[4].price and lobby_NPC[1].shop[4].check_required_item(main_player):
                    main_player.buy_item('æ°¸ä¹…è—åœ–',lobby_NPC[1].shop[4].price)  
                    lobby_NPC[1].player_buy_item(4) 
                    print('ä½ è§£é–äº†æ°¸ä¹…æœªçŸ¥è—åœ–')
                else:
                    print('ä½ çš„éŒ¢ä¸å¤ æˆ–è€…é€£å‹æ•¸ä¸è¶³')
            elif action == '6':
                if main_player.money >= lobby_NPC[1].shop[5].price and lobby_NPC[1].shop[5].check_required_item(main_player):
                    main_player.buy_item('ç‰ç’ƒçš‡å',lobby_NPC[1].shop[5].price)
                    lobby_NPC[1].player_buy_item(5)
                    print('ä½ è§£é–äº†ç‰ç’ƒçš‡å')
                else:
                    print('ä½ çš„éŒ¢ä¸å¤ æˆ–è€…é€£å‹æ•¸ä¸è¶³')
            elif action == '7':
                if main_player.money >= lobby_NPC[1].shop[6].price and lobby_NPC[1].shop[6].check_required_item(main_player):
                    main_player.buy_item('æœ€çµ‚è©¦ç…‰',lobby_NPC[1].shop[6].price)
                    lobby_NPC[1].player_buy_item(6)
                    print('ä½ è§£é–äº†æœ€çµ‚è©¦ç…‰')
                    lobby_NPC[1].unlock_final_challenge()
                else:
                    print('ä½ çš„éŒ¢ä¸å¤ æˆ–è€…é€£å‹æ•¸ä¸è¶³')
            time.sleep(2)
            continue
        elif action == '3':
            print('ä½ èµ°é€²é–±è¦½å®¤ï¼Œé€™è£¡çš„æ°£æ°›ä»¤ä½ æ„Ÿåˆ°èˆ’é©ï¼Œä¸€æœ¬åœ–é‘‘è¢«æ”¾åœ¨æœ€é¡¯çœ¼çš„ä½ç½®')
            time.sleep(1)
            if 'å—œè¡€å°è¨˜' in main_player.unlockable_item:
                lobby_NPC[0].unlock_mark_item('å—œè¡€å°è¨˜')
            if 'æ‰­æ›²å°è¨˜' in main_player.unlockable_item:
                lobby_NPC[0].unlock_mark_item('æ‰­æ›²å°è¨˜')
                lobby_NPC[0].unlock_snake_item()
            if 'å¢®å¤©ä½¿å°è¨˜' in main_player.unlockable_item:
                lobby_NPC[0].unlock_mark_item('å¢®å¤©ä½¿å°è¨˜')
            if 'â˜…æ…¾ä¹‹è¡€å°è¨˜â˜…' in main_player.unlockable_item:
                lobby_NPC[0].unlock_mark_item('â˜…æ…¾ä¹‹è¡€å°è¨˜â˜…')
            if 'â˜…é‚„æ²’æƒ³å¥½â˜…' in main_player.unlockable_item:
                lobby_NPC[0].unlock_mark_item('â˜…é‚„æ²’æƒ³å¥½â˜…')
            if 'â˜…æ­»ä¹‹å¤©ä½¿å°è¨˜â˜…' in main_player.unlockable_item:
                lobby_NPC[0].unlock_mark_item('â˜…æ­»ä¹‹å¤©ä½¿å°è¨˜â˜…')
            lobby_NPC[0].say_normal_dialogue()
            time.sleep(1.5)
            lobby_NPC[0].show_list()
            time.sleep(1)
            continue
            
        #ä¸‹æ³¨éšæ®µ
        while True:
            try:
                money = (int(input('è«‹è¼¸å…¥ä½ çš„ä¸‹æ³¨é‡‘é¡:')))
                break
            except ValueError:
                print('è«‹è¼¸å…¥æ­£ç¢ºçš„æ•¸å­—:')
            
        if money > main_player.money:
            print('ä½ çš„éŒ¢ä¸å¤ ')
            continue
        else:
            main_player.money -= money
        #åŠ æ³¨éšæ®µ
        #riské è¨­ç‚º1ï¼Œåˆ¤æ–·ç”¨è³ªæ•¸ä¹˜æ³•
        #risk % 2 == 0 é«˜é¢¨éšªæ¨¡å¼ï¼Œå€ç‡5å€
        print('é«˜é¢¨éšªæ¨¡å¼ä¸‹ï¼Œç‰¹æ®Šé“å…·å¯ä»¥ç›´æ¥å‡ºç¾ï¼Œç©å®¶ç²å¾—çš‡åå’ŒèŠå®¶ç²å¾—è—åœ–çš„æ©Ÿç‡ç¿»å€')
        print('æ¯å›åˆæœ‰50%æ©Ÿç‡é›™æ–¹è¡€é‡å¤§å¹…æå‡ï¼Œç²å‹æ™‚çé‡‘5å€ï¼Œé ˆè‡³å°‘å®Œæˆ5å±€æ‰æœ‰é¡å¤–å€ç‡')
        risk_input = input('æ˜¯å¦ä¸‹æ³¨é«˜é¢¨éšªæ¨¡å¼? : 1.æ˜¯ 2.å¦')
        if risk_input == '1':
            risk *= 2
        #risk % 3 == 0 æ®ºæ‰‹åœ‹ç‹æ¨¡å¼ï¼Œå€ç‡10å€
        print('æ®ºæ‰‹åœ‹ç‹æ¨¡å¼ä¸‹ï¼ŒèŠå®¶æœ‰æ©Ÿæœƒç²å¾—ç¨ç‰¹çš„"åœ‹ç‹"é“å…·ï¼Œç²å‹æ™‚çé‡‘10å€ï¼Œé ˆè‡³å°‘å®Œæˆ5å±€æ‰æœ‰é¡å¤–å€ç‡') 
        risk_input = input('æ˜¯å¦ä¸‹æ³¨æ®ºæ‰‹åœ‹ç‹æ¨¡å¼? : 1.æ˜¯ 2.å¦')
        if risk_input == '1':
            risk *= 3
        #risk % 5 == 0 å¹½é–‰çš‡åæ¨¡å¼ï¼Œå€ç‡7å€
        print('å¹½é–‰çš‡åæ¨¡å¼ä¸‹ï¼Œç©å®¶ç„¡æ³•ç²å¾—"çš‡å"é“å…·ï¼Œç²å‹æ™‚çé‡‘7å€ï¼Œé ˆè‡³å°‘å®Œæˆ5å±€æ‰æœ‰é¡å¤–å€ç‡')
        risk_input = input('æ˜¯å¦ä¸‹æ³¨å¹½é–‰çš‡åæ¨¡å¼? : 1.æ˜¯ 2.å¦')
        if risk_input == '1':
            risk *= 5    
        #risk % 7 == 0 èŠå®¶å…ˆæ‰‹æ¨¡å¼ï¼Œå€ç‡50å€
        print('èŠå®¶å…ˆæ‰‹æ¨¡å¼ä¸‹ï¼ŒèŠå®¶å…ˆè¡Œå‹•ï¼Œç²å‹æ™‚çé‡‘50å€ï¼Œé ˆè‡³å°‘å®Œæˆ5å±€æ‰æœ‰é¡å¤–å€ç‡')
        risk_input = input('æ˜¯å¦ä¸‹æ³¨èŠå®¶å…ˆæ‰‹æ¨¡å¼? : 1.æ˜¯ 2.å¦')
        if risk_input == '1':
            risk *= 7
            first_move = 'èŠå®¶'
        #è©¦ç…‰æ¨¡å¼(æš«å®š)
        in_challenge_mode = bool(int(input('æ˜¯å¦é€²å…¥è©¦ç…‰æ¨¡å¼? : 1.æ˜¯ 0.å¦')))
        round = 0
        player1 = player(5,main_player.item,money)
        if not in_challenge_mode:
            player1.enable_mark('å—œè¡€å°è¨˜' in main_player.unlockable_item, 'æ‰­æ›²å°è¨˜' in main_player.unlockable_item, 'å¢®å¤©ä½¿å°è¨˜' in main_player.unlockable_item, 'â˜…æ…¾ä¹‹è¡€å°è¨˜â˜…' in main_player.unlockable_item, 'â˜…é‚„æ²’æƒ³å¥½â˜…' in main_player.unlockable_item, 'â˜…æ­»ä¹‹å¤©ä½¿å°è¨˜â˜…' in main_player.unlockable_item)
        computer1 = computer(5,[])
        hp=random.randint(2,6)
        win_count = 0
        if not in_challenge_mode:
            games={}
            games[round] = game(player1,computer1,hp,risk)
            games[round].player_bonus(win_count)
        #è¨ˆç®—å‹å ´æ•¸
        while in_challenge_mode == False:
            live_bullet = random.randint(1,4)
            blank = random.randint(1,4)
            item_number = random.randint(2,5)
            games[round].set_first_move(first_move)
            games[round].one_round(live_bullet,blank,item_number)
            games[round].round += 1
            if player1.hp <= 0:
                if 'äººå·¥å¿ƒè‡Ÿ' in main_player.unlockable_item:
                    print('ä½ çš„äººå·¥å¿ƒè‡Ÿå•Ÿå‹•äº†ï¼Œä½ ç²å¾—äº†ä¸€æ¬¡å¾©æ´»æ©Ÿæœƒ')
                    main_player.unlockable_item.remove('äººå·¥å¿ƒè‡Ÿ')
                    time.sleep(1)
                    print('æ‰‹è¡“èŠ±è²»ä½ 50%çš„è²¡ç”¢')
                    main_player.revive()
                    time.sleep(2)
                    lobby_NPC[0].unlock_achievement('æ¢å¾©å‘¼å¸')
                    break
                else:
                    print('ä½ çš„å±é«”æ—èººè‘—æœªèƒ½å¸¶èµ°çš„',player1.money+main_player.money,'å…ƒ')
                    main_player.die()
                    break
            elif computer1.hp <= 0:
                player1.end_snake_mark()
                win_count += 1
                if player1.money == 0:
                    player1.money = random.randint(14000,52459)
                    print('ä½ ç²å¾—äº†',player1.money,'å…ƒ')
                    time.sleep(2)
                    print('åŠ å€æˆ–æ”¾æ£„?')
                    print('1.åŠ å€ 2.æ”¾æ£„')
                    action = input()
                    if action == '1':
                        round += 1
                        print('ä½ å¸¶è‘—',player1.money,'å…ƒç¹¼çºŒéŠæˆ²')
                        computer1 = computer(5,[])
                        hp=random.randint(2,6)
                        player1.death_mark_activate = player1.have_death_mark
                        games[round] = game(player1,computer1,hp,risk)
                        continue
                    else:
                        print('ä½ å¸¶è‘—',player1.money,'å…ƒé›¢é–‹äº†è³­æ¡Œ')
                        main_player.earn_money(player1.money)
                        main_player.save_item(player1.item)
                        input('æŒ‰ä¸‹Enteré›¢é–‹')
                        lobby_NPC[0].unlock_achievement('è¦‹å¥½å°±æ”¶')
                        for item in player1.queen_used:
                            lobby_NPC[0].unlock_queen_king_item(item)
                        lobby_NPC[0].unlock_normal_item()
                        lobby_NPC[0].unlock_special_item()
                        time.sleep(2)
                        break
                else:
                    player1.money *= 2
                    print('ä½ ç²å¾—äº†',player1.money,'å…ƒ')
                    time.sleep(2)
                    print('ä½ é€£å‹äº†',win_count,'å ´')
                    print('åŠ å€æˆ–æ”¾æ£„?')
                    print('1.åŠ å€ 2.æ”¾æ£„')
                    action = input()
                    if action == '1':
                        round += 1
                        print('ä½ å¸¶è‘—',player1.money,'å…ƒç¹¼çºŒéŠæˆ²')
                        computer1 = computer(5,[])
                        hp=random.randint(2,6)
                        player1.death_mark_activate = player1.have_death_mark
                        games[round] = game(player1,computer1,hp,risk)
                        games[round].player_bonus(win_count)
                        
                        for i in range(int(round/3)):
                            games[round].computer_bonus(i)
                        continue
                    else:
                        print('ä½ ä½¿ç”¨äº†',player1.queen_used.count('æ¼†é»‘çš‡å'),'å€‹æ¼†é»‘çš‡åï¼Œæ¯å€‹çé‡‘å€ç‡ç‚º1.7')
                        time.sleep(1)
                        print('ä½ ä½¿ç”¨äº†',player1.queen_used.count('è…¥ç´…çš‡å'),'å€‹è…¥ç´…çš‡åï¼Œæ¯å€‹çé‡‘å€ç‡ç‚º1.5')
                        time.sleep(1)
                        print('ä½ ä½¿ç”¨äº†',player1.queen_used.count('è”šè—çš‡å'),'å€‹è”šè—çš‡åï¼Œæ¯å€‹çé‡‘å€ç‡ç‚º1.2')
                        time.sleep(1)
                        print('ä½ ä½¿ç”¨äº†',player1.queen_used.count('ç¥è–çš‡å'),'å€‹ç¥è–çš‡åï¼Œæ¯å€‹çé‡‘å€ç‡ç‚º1.1')
                        time.sleep(1)
                        print('åŸå§‹çé‡‘ç‚º',player1.money,'å…ƒ')
                        n = pow(1.7,player1.queen_used.count('æ¼†é»‘çš‡å'))*pow(1.5,player1.queen_used.count('è…¥ç´…çš‡å'))*pow(1.2,player1.queen_used.count('è”šè—çš‡å'))*pow(1.1,player1.queen_used.count('ç¥è–çš‡å'))
                        time.sleep(1)
                        print('çš‡åçé‡‘å€ç‡ç‚º',n)
                        if (risk % 2 == 0) and (win_count >= 5):
                            n *= 5
                            time.sleep(1)
                            print('é«˜é¢¨éšªæ¨¡å¼ä¸‹ï¼Œçé‡‘5å€')
                        if (risk % 3 == 0) and (win_count >= 5):
                            n *= 10
                            time.sleep(1)
                            print('æ®ºæ‰‹åœ‹ç‹æ¨¡å¼ä¸‹ï¼Œçé‡‘10å€') 
                        if (risk % 5 == 0) and (win_count >= 5):
                            n *= 7
                            time.sleep(1)
                            print('å¹½é–‰çš‡åæ¨¡å¼ä¸‹ï¼Œçé‡‘7å€')
                        if (risk % 7 == 0) and (win_count >= 5):
                            n *= 50
                            time.sleep(1)
                            print('èŠå®¶å…ˆæ‰‹æ¨¡å¼ä¸‹ï¼Œçé‡‘50å€')
                        time.sleep(1)
                        print('æœ€çµ‚å€ç‡ç‚º',n)
                        time.sleep(1)
                        print('æœ€çµ‚çé‡‘ç‚º',int(player1.money*n),'å…ƒ')
                        time.sleep(1)
                        print('ä½ å¸¶è‘—',int(player1.money*n),'å…ƒé›¢é–‹äº†è³­æ¡Œ')
                        if (win_count >= 5) and ('äº”é€£å‹æ¨™è¨˜' not in main_player.unlockable_item):
                            main_player.unlockable_item.append('äº”é€£å‹æ¨™è¨˜')
                            print('ä½ ç²å¾—äº†äº”é€£å‹æ¨™è¨˜')
                        if (win_count >= 10) and ('åé€£å‹æ¨™è¨˜' not in main_player.unlockable_item):
                            main_player.unlockable_item.append('åé€£å‹æ¨™è¨˜')
                            print('ä½ ç²å¾—äº†åé€£å‹æ¨™è¨˜')
                        if (win_count >= 20) and ('äºŒåé€£å‹æ¨™è¨˜' not in main_player.unlockable_item):
                            main_player.unlockable_item.append('äºŒåé€£å‹æ¨™è¨˜')
                            print('ä½ ç²å¾—äº†äºŒåé€£å‹æ¨™è¨˜')
                        if (win_count >= 50) and ('äº”åé€£å‹æ¨™è¨˜' not in main_player.unlockable_item):
                            main_player.unlockable_item.append('äº”åé€£å‹æ¨™è¨˜')
                            print('ä½ ç²å¾—äº†äº”åé€£å‹æ¨™è¨˜')
                        if (win_count >= 5):
                            print('ä½ é€£å‹äº†',win_count,'å ´')
                        input('æŒ‰ä¸‹Enteré›¢é–‹')
                        if win_count >= 10:
                            if risk % 2 == 0:
                                lobby_NPC[0].unlock_achievement('é¢¨éšªå¤§å¸«')
                            if risk % 3 == 0:
                                lobby_NPC[0].unlock_achievement('äº’ç›¸å‚·å®³å‘€')
                            if risk % 5 == 0:
                                lobby_NPC[0].unlock_achievement('çœŸå¯¦åŠ›')
                            if risk % 7 == 0:
                                lobby_NPC[0].unlock_achievement('ä½ æ‰æ˜¯æŒ‘æˆ°è€…')
                            if risk == 210:
                                lobby_NPC[0].unlock_achievement('è³­ç¥')
                        for item in player1.queen_used:
                            lobby_NPC[0].unlock_queen_king_item(item)
                        lobby_NPC[0].unlock_normal_item()
                        lobby_NPC[0].unlock_special_item()
                        time.sleep(2)
                        main_player.earn_money(int(player1.money*n))
                        main_player.save_item(player1.item)
                break
        if in_challenge_mode == True:
            action = input('è©¦ç…‰ç­‰ç´š? 1.è‰è‰æ–¯ 2.åˆ©ç¶­å¦ 3.è–©é‚çˆ¾')
            challenger = lobby_NPC[int(action)-1]
            round = 1
            win_count = 0
            player1 = player(5,main_player.item,money)
            computer1 = computer(5,[])
            hp=random.randint(2,6)
            challenge_games={}
            if challenger.name == 'è‰è‰æ–¯':
                #å¹½é–‰çš‡å+é«˜é¢¨éšª
                risk = 10
            elif challenger.name == 'åˆ©ç¶­å¦':
                #èŠå®¶å…ˆæ‰‹+æ®ºæ‰‹åœ‹ç‹
                risk = 21
            elif challenger.name == 'è–©é‚çˆ¾':
                risk = 1
                #åµæ¸¬æ˜¯å¦ç‚ºç¬¬ä¸‰å±€ç”¨
                pp = 0
                lobby_NPC[2].devil_dependency = True
            elif challenger.name == 'æƒ¡é­”å…¬ä¸»':
                pass
            #é–‹å§‹å‰å°è©±
            challenger.before_challenge()

            challenge_games[round] = challenge_mode(player1,computer1,hp,risk,challenger.name)
            challenge_games[round].player_bonus(win_count)
        while in_challenge_mode == True:
            if challenger.name == 'è‰è‰æ–¯':
                max_round = 5
                live_bullet = random.randint(1,4)
                blank = random.randint(1,4)
                item_number = random.randint(2,5)
                challenge_games[round].set_first_move('ç©å®¶')
                challenge_games[round].one_round_Lilit(live_bullet,blank,item_number)
                if (player1.hp > 0) and (computer1.hp > 0):
                    if challenge_games[round].computer.handcuff:
                        challenge_games[round].computer.unhandcuff()
                        print('è‰è‰æ–¯å’¬ç¢æ‰‹éŠ¬ï¼Œæ¢å¾©è¡Œå‹•')
                    else:
                        challenge_games[round].Lilit_life_steal()
                if player1.hp >= 44:
                    lobby_NPC[0].devil_dependency = True
            elif challenger.name == 'åˆ©ç¶­å¦':
                risk = 21
                max_round = 5
                live_bullet = random.randint(1,4)
                blank = random.randint(1,4)
                item_number = random.randint(3,5)
                challenge_games[round].set_first_move('èŠå®¶')
                challenge_games[round].one_round_Leviathan(live_bullet,blank,item_number)

            elif challenger.name == 'è–©é‚çˆ¾':
                risk = 1
                max_round = 3
                if round == 1:
                    live_bullet = 2
                    blank = 2
                    foresee = 2
                elif round == 2:
                    live_bullet = 4
                    blank = 4
                    foresee = 4
                elif round == 3:
                    live_bullet = 1
                    blank = 1
                    if pp == 0:
                        challenge_games[round].computer.regen = True
                    foresee = 0
                    pp = 1
                item_number = 0
                challenge_games[round].set_first_move('ç©å®¶')
                challenge_games[round].one_round_Samael(live_bullet,blank,foresee)
            challenge_games[round].round += 1
            if player1.hp <= 0:
                if 'äººå·¥å¿ƒè‡Ÿ' in main_player.unlockable_item:
                    print('ä½ çš„äººå·¥å¿ƒè‡Ÿå•Ÿå‹•äº†ï¼Œä½ ç²å¾—äº†ä¸€æ¬¡å¾©æ´»æ©Ÿæœƒ')
                    main_player.unlockable_item.remove('äººå·¥å¿ƒè‡Ÿ')
                    time.sleep(1)
                    print('æ‰‹è¡“èŠ±è²»ä½ 50%çš„è²¡ç”¢')
                    main_player.revive()
                    time.sleep(1)
                    lobby_NPC[0].unlock_achievement('æ¢å¾©å‘¼å¸')
                    break

                else:
                    print('ä½ çš„éˆé­‚è¢«',challenger.name,'å¾µæ”¶äº†ï¼Œæœªèƒ½å¸¶èµ°çš„',player1.money+main_player.money,'å…ƒè¢«å›æ”¶äº†')
                    main_player.die()
                    break
            elif computer1.hp <= 0:
                win_count += 1
                player1.end_snake_mark()
                if win_count < max_round:
                    challenger.challenge_mode_dialogue(win_count,computer1)
                    round += 1
                    challenger_item_list = computer1.item
                    computer1 = computer(5,challenger_item_list)
                    hp=random.randint(2,6)
                    challenge_games[round] = challenge_mode(player1,computer1,hp,risk,challenger.name)
                    challenge_games[round].player_bonus(win_count)
                    continue
                else:
                    challenger.challenge_mode_dialogue(win_count,computer1)
                    time.sleep(1)
                    print('ä½ æˆ°å‹äº†',challenger.name,'é€šéäº†è©¦ç…‰')
                    challenger.challenge_mode_reward(main_player)
                    input('æŒ‰ä¸‹Enteré›¢é–‹')
                    for item in player1.queen_used:
                        lobby_NPC[0].unlock_queen_king_item(item)
                    lobby_NPC[0].unlock_normal_item()
                    lobby_NPC[0].unlock_special_item()
                    time.sleep(2)
                    if lobby_NPC[0].devil_dependency and challenger.name == 'è‰è‰æ–¯':
                        lobby_NPC[0].devil_transform()
                    elif lobby_NPC[1].devil_dependency and challenger.name == 'åˆ©ç¶­å¦':
                        lobby_NPC[1].devil_transform()
                    elif lobby_NPC[2].devil_dependency and challenger.name == 'è–©é‚çˆ¾':
                        lobby_NPC[2].devil_transform()
                break
        if main_player.die_state:
            print('éŠæˆ²çµæŸ')
            break
