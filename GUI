import tkinter as tk
from pyfirmata import Arduino, util
import time

class ArduinoGUI:
    def __init__(self, master):
        self.master = master
        master.title("Arduino LED PWM Control")

        # Connect to Arduino
        # Adjust your Arduino connection port accordingly
        self.board = Arduino('/dev/ttyUSB0') 
        # self.board = Arduino('/dev/ttyUSB1')
        # self.board = Arduino('/dev/ttyACM0')
        # self.board = Arduino('/dev/ttyACM1')

        self.led_pin = self.board.get_pin('d:9:p')  # d for digital, 9 for pin, p for PWM

        # Create a GUI slider for controlling the LED brightness
        self.brightness_slider = tk.Scale(master, from_=0, to=100, orient=tk.HORIZONTAL, command=self.update_brightness)
        self.brightness_slider.set(0)  # Initialize brightness to 0
        self.brightness_slider.pack()

    def update_brightness(self, brightness):
        brightness = float(brightness) / 100.0  # Scale brightness from 0-100 to 0-1
        self.led_pin.write(brightness)

    def close(self):
        self.board.exit()
        self.master.destroy()

# Create the GUI window
root = tk.Tk()
app = ArduinoGUI(root)

# Ensure the application cleans up properly upon exit
root.protocol("WM_DELETE_WINDOW", app.close)

# Run the application
root.mainloop()
